#!/usr/bin/env python

import os
import re

from fire import Fire
from traxix.utils import _f


def fe(*args, p=".", e=None):
    if e:
        args = list(args)
        args.append(f"{e}$")
    results = []
    for i, path in enumerate(_f(*args, p=p)):
        print(i, path)
        results.append(path)

    file_to_open = input("file to open: ")
    if file_to_open == "":
        file_to_open = "0"
    os.system(f"emacsclient {results[int(file_to_open)]} &")


if __name__ == "__main__":
    Fire(fe)

(self.webpackChunkqslwidgets=self.webpackChunkqslwidgets||[]).push([[718,40,772],{91400:(e,t,a)=>{"use strict";a.d(t,{f:()=>Te,U:()=>De});var n=a(56271),i=a.n(n),o=a(78564);const l=e=>{var{name:t,value:a,onValueChange:n,min:l,max:s,width:r,disabled:c,valueLabelDisplay:d="on"}=e,u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["name","value","onValueChange","min","max","width","disabled","valueLabelDisplay"]);return i().createElement(o.Stack,{direction:"row",alignItems:"center",spacing:2,style:r?{width:r}:{}},i().createElement(o.Typography,{fontSize:"small"},t),i().createElement(o.Slider,Object.assign({},u,{size:"small",value:a,style:r?{width:r}:{},min:l,classes:{thumb:"slider-thumb"},max:s,disabled:c,valueLabelDisplay:d,valueLabelFormat:e=>e,onChange:(e,t)=>n(t)})))},s=i().createContext({}),r=()=>{const e=i().useContext(s);return i().createElement(o.Box,{style:{width:"100%",height:"100%",position:"absolute",top:0},onClick:e.setFocus})},c=255,d=[{dx:0,dy:-1},{dx:-1,dy:0},{dx:0,dy:1},{dx:1,dy:0}],u=(e,t)=>Object.assign(Object.assign({},e),{x:e.x+t.dx,y:e.y+t.dy}),m=(e,t)=>e.y*t+e.x,g=(e,t)=>({x:Math.round(e.x*t.sx),y:Math.round(e.y*t.sy)}),p=(e,t,a)=>{const n={x:Math.max(0,Math.round((e.x-t.dx)*a.width)),y:Math.max(0,Math.round((e.y-t.dy)*a.height))};return{point:n,kernel:{dx:Math.min(Math.round((2*t.dx+Math.min(0,e.x-t.dx))*a.width),a.width-n.x),dy:Math.min(Math.round((2*t.dy+Math.min(0,e.y-t.dy))*a.height),a.height-n.y)}}},v=(e,t,a,n)=>{if(t.x<0||t.y<0||t.x+a.dx>e.dimensions.width||t.y+a.dy>e.dimensions.height)throw`Detected invalid block fill point/parameters. kernel: (${a.dx}, ${a.dy}), point: (${t.x}, ${t.y}), dimensions: (${e.dimensions.width}, ${e.dimensions.height})`;const i=Array(a.dx).fill(n);Array.from(Array(a.dy).keys()).forEach((a=>{e.values.set(i,(t.y+a)*e.dimensions.width+t.x)}))},b=(e,t,a)=>{const n=p(e,a,t.dimensions);return v(t,n.point,n.kernel,0),t.values},h=(e,t,a)=>{const n=Math.pow(a.threshold,2);if(a.previous&&t.width*t.height!==a.previous.values.length)throw`Incompatible dimensions for mask (${a.previous.values.length}) and canvas (${t.width}x${t.height}).`;const i={values:new Uint8ClampedArray(a.previous?a.previous.dimensions.width*a.previous.dimensions.height:t.width*t.height),dimensions:a.previous?a.previous.dimensions:{height:t.height,width:t.width}},o={sx:i.dimensions.width/t.width,sy:i.dimensions.height/t.height},l={equals:(e,t)=>((e,t,a)=>{if(3!==e.length||3!==t.length)throw"These points do not have the same number of color values.";const[n,i,o]=e,[l,s,r]=t,c=2*Math.min(Math.abs(l-n),255-Math.abs(l-n)),d=Math.abs(s-i),u=Math.abs(r-o);return c*c+d*d+u*u<=a})(Array.from(e),Array.from(t),n),isInBounds:e=>e.x<t.width&&e.y<t.height&&e.x>=0&&e.y>=0,getImageValue:e=>{var a;const n=3*m(e,t.width);return null===(a=t.hsv)||void 0===a?void 0:a.slice(n,n+3)},getMatchValue:e=>{const t=m(g(e,o),i.dimensions.width),a=i.values[t];switch(a){case 0:return"unknown";case c:return"matched";default:return e.direction<0||"0"===a.toString(2).padStart(d.length,"0")[e.direction]?"unknown":"visited"}},setMatchValue:(e,t)=>{const a=m(g(e,o),i.dimensions.width);switch(t){case"matched":i.values[a]=c;break;case"visited":const n=i.values[a].toString(2).padStart(d.length,"0"),o=parseInt(n.substring(0,e.direction)+1+n.substring(e.direction+1),2);i.values[a]=o;break;default:throw`Unsupported flood map setting passed: ${t}`}}},s=p(e,a.radius,i.dimensions),r=p(e,a.radius,t);return v(i,s.point,s.kernel,c),((e,t,a)=>{const n=e.filter((e=>t.isInBounds(e)));let i=0;if(a)for(;n.length>0&&i<a;){const e=n.shift(),a=d.map(((t,a)=>Object.assign(Object.assign({},u(e,t)),{origin:e,direction:a}))).filter(t.isInBounds).filter((e=>"unknown"==t.getMatchValue(e))),o=a.filter((e=>{const a=t.getImageValue(e),n=t.getImageValue(e.origin);return void 0!==n&&void 0!==a&&t.equals(n,a)}));a.forEach((e=>t.setMatchValue(e,"visited"))),o.forEach((e=>t.setMatchValue(e,"matched"))),n.push(...o),i+=1}})(((e,t)=>[Array.from(Array(t.dx).keys()).map((a=>[{x:a+e.x,y:e.y},{x:a+e.x,y:e.y+t.dy}])),Array.from(Array(t.dy).keys()).map((a=>[{y:a+e.y,x:e.x},{y:a+e.y,x:e.x+t.dx}]))].flat(2).map((t=>Object.assign(Object.assign({},t),{origin:e,direction:-1}))))(r.point,r.kernel),l,t.hsv?1e6:0),a.previous&&a.previous.values.forEach(((e,t)=>{e===c&&(i.values[t]=e)})),a.radius&&t.hsv&&((e,t)=>{for(let a=0;a<=e.dimensions.height-t.dy;a++){let n=0;for(;n<=e.dimensions.width-t.dx;)[{dx:0,dy:0},{dx:t.dx,dy:0},t,{dx:0,dy:t.dy}].map((t=>(a+t.dy)*e.dimensions.width+n+t.dx)).every((t=>e.values[t]===c))?(v(e,{x:n,y:a},t,c),n+=t.dx):n+=1}})(i,{dx:Math.round(a.radius.dx*i.dimensions.width),dy:Math.round(a.radius.dy*i.dimensions.height)}),i.values},f=e=>100*e+"%",y=(e,t,a,n)=>(n?[t]:[]).concat(e.slice(0,a>-1?a:void 0).concat(a>-1?e.slice(a+1):[])),w=e=>{try{return JSON.parse(JSON.stringify(e))}catch(t){throw`Failed to copy object: ${e}`}},x=e=>Object.keys(e).filter((t=>1==e[t].length)).map((t=>`${t}: ${e[t][0]}`)).join(", "),E=1e-4,O=e=>({image:w((null==e?void 0:e.image)||{}),polygons:w((null==e?void 0:e.polygons)||[]),masks:((null==e?void 0:e.masks)||[]).map((e=>{return Object.assign(Object.assign({},e),{map:{dimensions:e.map.dimensions,values:(t=e.map.counts,new Uint8ClampedArray(t.map(((e,t)=>Array.from(Array(e).keys()).map((()=>t%2==0?c:0)))).flat()))}});var t})),dimensions:(null==e?void 0:e.dimensions)?w(e.dimensions):void 0,boxes:w((null==e?void 0:e.boxes)||[])}),k=e=>{const t=e.pt1,a=e.pt2||e.pt1;return Object.assign(Object.assign({},e),{pt1:{x:Math.min(t.x,a.x),y:Math.min(t.y,a.y)},pt2:{x:Math.max(t.x,a.x),y:Math.max(t.y,a.y)}})},j=e=>Object.assign(Object.assign({},e),{boxes:e.boxes.map(k),masks:e.masks.map((e=>{return Object.assign(Object.assign({},e),{map:{dimensions:e.map.dimensions,counts:(t=e.map.values,t.reduce(((e,t)=>((e.length-1)%2==0==(t==c)?e[e.length-1]+=1:e.push(1),e)),[0]))}});var t}))}),S=e=>{let t=e.reduce(((e,t)=>t.options?e.concat(t.options.filter((e=>e.shortcut)).map((e=>e.shortcut))):e),[]);return e.map((e=>Object.assign(Object.assign({},e),{options:e.options?e.options.map((e=>{let a=e.shortcut;return a||(a=[...e.name.toLowerCase()].find((e=>-1==t.indexOf(e))),a&&t.push(a)),Object.assign(Object.assign({},e),{shortcut:a})})):void 0})))};var C=a(90328),M=a.n(C);const z=(e,t,a)=>Math.pow((e.x-t.x)*(a?a.width:1),2)+Math.pow((e.y-t.y)*(a?a.height:1),2),I=(e,t)=>{if(!t||0===t.length)return!1;const a=t[0];return e.x===a.x&&e.y===a.y},B=(e,t,a)=>{if(!t.active||"polygons"!==t.mode||0==t.active.region.points.length)return e;const n=t.active.region.points[0];return Math.sqrt(z(n,e.coords,a))>10?e:Object.assign(Object.assign({},e),{coords:n})};var N=a(92519),R=a.n(N);const P=(e,t,a,n,i,o,l,s)=>{let r=R()(e.drawing);if(!n.source.current)throw"Did not find relevant media elements.";const d=parseFloat(getComputedStyle(n.source.current).getPropertyValue("--media-viewer-scale")||"1");if(1==parseFloat(getComputedStyle(n.source.current).getPropertyValue("--media-viewer-dragging")||"0"))return e;if(r.active&&r.active.idx>-1)return Object.assign(Object.assign({},e),{drawing:Object.assign(Object.assign({},r),{active:void 0}),labels:Object.assign(Object.assign({},e.labels),{[r.mode]:r.active?y(e.labels[r.mode],e.drawing.active.region,e.drawing.active.idx,!0):e.labels[r.mode]})});if("masks"==r.mode){if(!n.canvas.current&&!e.canvas)throw"Did not find necessary canvas element.";const o=e.canvas||((e,t,a)=>{const n=t.getContext("2d"),i={width:"VIDEO"===(o=e).nodeName?o.videoWidth:o.naturalWidth,height:"VIDEO"===o.nodeName?o.videoHeight:o.naturalHeight};var o;if(!n)throw Error("Failed to get a drawing context.");const l=a/Math.max(i.width,i.height);t.width=Math.round(l*i.width),t.height=Math.round(l*i.height),n.filter=getComputedStyle(e).filter,n.drawImage(e,0,0,i.width,i.height,0,0,t.width,t.height);try{const e=Array.from(n.getImageData(0,0,t.width,t.height).data);return{hsv:new Uint8ClampedArray(Array.from(Array(t.width*t.height).keys()).map((t=>((...e)=>{const[t,a,n]=e,i=Math.max(t,a,n),o=Math.min(t,a,n),l=i-o,s=0===i?0:l/i,r=i/255,c=6*l;let d;switch(i){case o:d=0;break;case t:d=(a-n+l*(a<n?6:0))/c;break;case a:d=(n-t+2*l)/c;break;case n:d=(t-a+4*l)/c;break;default:throw"Failed to select appropriate value for h."}return[d,s,r].map((e=>Math.min(Math.round(255*e),255)))})(...e.slice(4*t,4*t+3)))).flat()),width:t.width,height:t.height}}catch(e){return console.error(`Failed to load image, likely due to CORS issues: ${e}.`),{width:t.width,height:t.height}}})(n.source.current,n.canvas.current,l||512),s=Object.assign(Object.assign({},o),{hsv:r.flood?o.hsv:void 0});if("masks"===r.mode&&r.flood&&!s.hsv)throw"Flood fill failed due to cross-origin media. Please disable flood fill.";const u={previous:r.active?r.active.region.map:void 0,radius:{dx:t.radius/n.source.current.clientWidth/d,dy:t.radius/n.source.current.clientHeight/d},threshold:t.threshold};if(r.active)r.active=Object.assign(Object.assign({},r.active),{region:Object.assign(Object.assign({},r.active.region),{map:Object.assign(Object.assign({},r.active.region.map),{values:i&&u.previous?b(a,u.previous,u.radius):h(a,s,u)})})});else{const t=((e,t)=>function(t,a){let n=t.length;for(;n--;)if((i=t[n]).map.values[Math.round(e.y*i.map.dimensions.height)*i.map.dimensions.width+Math.round(e.x*i.map.dimensions.width)]===c)return n;var i;return-1}(t))(a,e.labels.masks);r.active=-1===t||i?{idx:-1,region:{map:{dimensions:{width:o.width,height:o.height},values:h(a,s,u)},labels:{}}}:{idx:t,region:e.labels.masks[t]}}return Object.assign(Object.assign({},e),{canvas:o,drawing:r})}if("polygons"===r.mode)return r.active?r.active=Object.assign(Object.assign({},r.active),{region:Object.assign(Object.assign({},r.active.region),{points:r.active.region.points.concat([B(Object.assign(Object.assign({},t),{coords:a}),r,{width:n.source.current.clientWidth*d,height:n.source.current.clientHeight*d}).coords])})}):r.active=o&&!i&&void 0!==s?{region:o,idx:s}:{region:{points:[a],labels:{}},idx:-1},Object.assign(Object.assign({},e),{drawing:r});if("boxes"===r.mode){if(r.active){let e,t;r.active.region.pt2&&z(a,r.active.region.pt1)<z(a,r.active.region.pt2)?(e=a,t=r.active.region.pt2):(e=r.active.region.pt1,t=a),r.active=Object.assign(Object.assign({},r.active),{region:Object.assign(Object.assign({},r.active.region),{pt1:e,pt2:t})})}else r.active=o&&!i&&void 0!==s?{region:o,idx:s}:{region:{pt1:a,labels:{}},idx:-1};return Object.assign(Object.assign({},e),{drawing:r})}throw"Failed to handle media click operation."},D=(e,t,a)=>t&&t.indexOf(e)>-1?a?t.filter((t=>t!=e)):[]:a?(t||[]).concat([e]):[e],A=(e,t)=>{if(!t)throw Error("Requested mouse position without a ref.");const{x:a,y:n,width:i,height:o}=t.getBoundingClientRect();return{x:(e.x-window.scrollX-a)/i,y:(e.y-window.scrollY-n)/o}},T=()=>(0,o.useMediaQuery)((0,o.useTheme)().breakpoints.up("sm")),L=(e,t,a,n)=>i().useMemo((()=>{const a=n&&0!==n?M()(e,n):e;return(e,...n)=>a(A({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY},t.current),e,...n)}),[...a||[],t]),Z=(e,t)=>{const{hasFocus:a}=i().useContext(s),n=i().useCallback((t=>{var n,i;const o=!(!t.target||!t.target.closest(".react-image-labeler-input-target")),l=null===(n=t.target)||void 0===n?void 0:n.nodeName,s="true"===(null===(i=t.target)||void 0===i?void 0:i.contentEditable);a&&"TEXTAREA"!==l&&("INPUT"!==l||o&&a)&&!s&&e(t)}),(t||[]).concat([e,a]));i().useEffect((()=>(document.addEventListener("keydown",n,!1),()=>{document.removeEventListener("keydown",n,!1)})),[n])},F=(e,t)=>new Promise((a=>{if(!e)return;e.focus({preventScroll:!0}),e.classList.add("active");const{x:n,y:i}=e.getBoundingClientRect(),o=Object.assign({bubbles:!0,cancelable:!0},t?{clientX:n+t.x,clientY:i+t.y}:{});e.dispatchEvent(new MouseEvent("mousedown",o)),e.dispatchEvent(new MouseEvent("mouseup",o)),(100,new Promise((e=>setTimeout(e,100)))).then((()=>{e.dispatchEvent(new MouseEvent("click",o)),e.classList.remove("active"),e.blur(),a()}))})),K=()=>{},_=(e,t,a,n)=>{const o=i().useRef(K);i().useEffect((()=>{o.current=e})),i().useEffect((()=>{a&&null!==t&&!1!==t&&o.current()}),[a]),i().useEffect((()=>{if(null===t||!1===t)return;const e=setInterval((()=>o.current()),t);return()=>clearInterval(e)}),[t].concat(n||[]))},$=(e,t)=>{const{setToast:a}=i().useContext(s),[n,o]=i().useState({src:t,loadState:"loading",mediaState:void 0});return i().useEffect((()=>{t!==n.src&&o({src:t,loadState:t?"loading":"loaded",mediaState:n.mediaState})}),[t]),Object.assign(Object.assign({},n),{callbacks:{onError:i().useCallback((()=>{o(Object.assign(Object.assign({},n),{loadState:"error"})),a(`An error occurred loading ${n.src}.`)}),[n]),onLoad:i().useCallback((t=>{e(t).then((e=>o({mediaState:e,loadState:"loaded",src:n.src})),(e=>a(`An error occurred loading ${n.src}.`)))}),[e,n])}})},V=(e,t,a)=>{const[n,o]=i().useState({labels:O(e||{}),dirty:!1,canvas:null,drawing:{mode:"boxes"}}),[l,s]=i().useState([]),r=i().useCallback((e=>{a&&a.length>0&&s([n].concat(l).slice(0,10)),o(e)}),[l,n]),[c,d]=i().useState({radius:5,threshold:1,coords:void 0}),u=i().useCallback((()=>r(Object.assign(Object.assign({},n),{labels:O(e||{}),dirty:!1,canvas:null,drawing:"masks"===n.drawing.mode?{mode:"masks",flood:n.drawing.flood}:{mode:n.drawing.mode}}))),[e,n]),m=i().useCallback((()=>s([])),[]),g=i().useCallback((()=>{l.length>0&&(o(Object.assign(Object.assign({},l[0]),{dirty:!0})),s(l.slice(1)))}),[l]);return i().useEffect(u,[e].concat(t||[])),i().useEffect(m,a||[]),{cursor:c,setCursor:d,draft:n,setDraft:r,resetDraft:u,undo:l.length>0?g:void 0}},W=(e,t,a,n,o,l,r)=>{const{setFocus:c,setToast:d}=i().useContext(s);return{onClick:L(((n,i,s,u)=>{if(c(),l&&o.source.current&&(o.canvas.current||e.canvas))try{t(P(e,a,n,o,i.altKey,s,r,u))}catch(e){d(e)}}),o.source,[e,a]),onMouseMove:L((t=>{if(!l||!o.source.current)return;const i=parseFloat(getComputedStyle(o.source.current).getPropertyValue("--media-viewer-scale")||"1");n(B(Object.assign(Object.assign({},a),{coords:t}),e.drawing,{width:o.source.current.clientWidth*i,height:o.source.current.clientHeight*i}))}),o.source,[e,a],0)}},U=(e,t)=>e&&e.filter((e=>e.timestamp===t))[0]||{timestamp:t,end:void 0,labels:{image:{}}},G=()=>{const[e,t]=i().useState({contrast:1,brightness:1,saturation:1}),a=i().useMemo((()=>`contrast(${e.contrast}) brightness(${e.brightness}) saturate(${e.saturation})`),[e]);return{value:e,filter:a,set:t}};var H=a(14933);const q=(0,o.styled)(o.Box)`
  & .minimap .mask-cursor {
    display: none;
  }

  & .minimap .box-text {
    visibility: hidden;
  }

  & .viewport img,
  .viewport video {
    vertical-align: bottom;
  }

  & .viewport .loading-placeholder .region {
    visibility: hidden;
  }

  & img,
  & video {
    max-width: none;
    max-height: none;
    image-rendering: pixelated;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
    user-drag: none;
  }
`,Y=({children:e,media:t,size:a,controls:n,loadState:c,onMouseLeave:d,cursor:u})=>{const{setFocus:m,maxViewHeight:g}=i().useContext(s),p={viewport:i().useRef(null),minimap:i().useRef(null),media:i().useRef(null)},[v,b]=i().useState({zoom:1,pos:{x:0,y:0},minimapSize:{width:128,height:128},zoomInitialized:!1}),[h,y]=i().useState(!1),[w,x]=i().useState(g);i().useEffect((()=>{if("loading"===c)b(Object.assign(Object.assign({},v),{pos:{x:0,y:0},zoomInitialized:!1}));else if("loaded"==c&&a&&!v.zoomInitialized&&w>0){const e=128/Math.max(a.width,a.height);b(Object.assign(Object.assign({},v),{zoomInitialized:!0,zoom:Math.min(w/a.width,g/a.height),minimapSize:{width:e*a.width,height:e*a.height}}))}}),[c,a,w]),_((()=>{!p.viewport.current||w&&p.viewport.current.clientWidth===w||x(p.viewport.current.clientWidth)}),100,!0,[w]);const E=i().useMemo((()=>{if(!a)return;const e={width:v.zoom*a.width,height:v.zoom*a.height},t={width:Math.min(w,e.width),height:Math.min(g,e.height)};return{raw:a,zoomed:e,viewport:t,margin:{width:t.width/e.width/2,height:t.height/e.height/2}}}),[a,w,g,v.zoom]),O=L((e=>{if(m(),!E)throw"Failed to process minimap position.";b(Object.assign(Object.assign({},v),{pos:{x:Math.max(e.x-E.margin.width,0),y:Math.max(e.y-E.margin.height,0)}}))}),p.minimap,[m,v,E]),k=i().useCallback((e=>{if(E){if(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.ctrlKey){const t=e.cursor||u,a=Math.max(v.zoom-e.deltaY/200,10/Math.min(E.raw.width,E.raw.height));let n;n=t?{x:Math.max(t.x-v.zoom*(t.x-v.pos.x)/a,0),y:Math.max(t.y-v.zoom*(t.y-v.pos.y)/a,0)}:v.pos,b(Object.assign(Object.assign({},v),{zoom:a,pos:n}))}else b(Object.assign(Object.assign({},v),{pos:{x:Math.max(v.pos.x+e.deltaX/E.zoomed.width,0),y:Math.max(v.pos.y+e.deltaY/E.zoomed.height,0)}}));return m(),!1}}),[v,u,E]),j=(0,H.useGesture)({onDrag:({delta:[e,t]})=>{0===e&&0===t||(k({deltaX:-e,deltaY:-t,ctrlKey:!1}),y(!0))},onDragEnd:()=>setTimeout((()=>y(!1)),250),onPinch:e=>{if(e.memo&&e.memo>0&&E){const t=A({x:e.origin[0]+window.scrollX,y:e.origin[1]+window.scrollY},p.media.current);k({deltaX:0,deltaY:e.memo-e.da[0],ctrlKey:!0,cursor:t})}return e.last?-1:e.da[0]}},{drag:{preventDefault:!0}});return i().useEffect((()=>{if(p.media.current)return p.media.current.addEventListener("wheel",k,{passive:!1}),()=>{p.media.current&&p.media.current.removeEventListener("wheel",k)}}),[p.media,k]),i().createElement(q,{className:"media-viewer"},i().createElement(o.Box,{sx:{mb:2}},i().createElement(o.Box,{className:"viewport",style:{position:"relative",overflow:"hidden",height:Math.min(g,(null==E?void 0:E.zoomed.height)||g)},ref:p.viewport},i().createElement(r,null),"loading"==c?i().createElement(o.CircularProgress,{style:{position:"absolute",left:"50%",right:"50%",top:"50%",bottom:"50%"}}):null,i().createElement(o.Box,Object.assign({className:"media",ref:p.media},j(),{onMouseLeave:"loaded"==c?d:void 0,style:"loaded"===c?{"--media-viewer-scale":v.zoom,transform:`scale(${v.zoom}) translate(${f(-v.pos.x)}, ${f(-v.pos.y)})`,"--media-viewer-dragging":h?1:0,transformOrigin:"0 0",position:"absolute",touchAction:"none"}:{width:0,height:0,overflow:"hidden"}}),"loaded"===c?e:null,t.main))),i().createElement(o.Box,{className:"controls",style:{display:"grid",gridTemplateColumns:`${v.minimapSize.width}px 1fr`,gridTemplateRows:"auto",gridTemplateAreas:'"minimap zoom"',gridColumnGap:10,alignItems:"center"}},i().createElement(o.Paper,{className:"minimap",style:Object.assign(Object.assign({},v.minimapSize),{position:"relative"}),onClick:O},"loaded"===c&&a?i().createElement("div",{style:{width:"100%",height:"100%"}},i().createElement("div",{style:{transform:`scale(${v.minimapSize.width/a.width})`,transformOrigin:"0 0"}},t.mini),e,E?i().createElement("div",{style:{outline:"2px solid red",outlineOffset:"-1px",position:"absolute",left:f(v.pos.x),top:f(v.pos.y),width:f(Math.min(1-v.pos.x,E.viewport.width/E.zoomed.width)),height:f(Math.min(1-v.pos.y,E.viewport.height/E.zoomed.height))}}):null,i().createElement("div",{ref:p.minimap,className:"hover-target",style:Object.assign(Object.assign({position:"absolute",top:0},v.minimapSize),{display:"block"})})):null),i().createElement(o.Box,null,n||null,i().createElement(l,{name:"Zoom",className:"zoom",min:Math.min(1,Math.round(100*v.zoom)),max:Math.max(500,Math.round(100*v.zoom)),width:"100%",valueLabelDisplay:"auto",value:Math.round(100*v.zoom),onValueChange:e=>b(Object.assign(Object.assign({},v),{zoom:e/100}))}))))};var X=a(47359);const J=(0,o.styled)(o.Box)`
  & label.label-panel-entry-option-label {
    margin-bottom: 0;
  }

  & legend.label-panel-entry-label {
    margin-bottom: 0;
    border-bottom: none;
  }
`,Q=({config:e,selected:t,setSelected:a,disabled:n,editConfig:l})=>{const r=i().useMemo((()=>e.options||e.multiple?((e,t)=>t.concat(e?e.filter((e=>-1==(t||[]).findIndex((t=>t.name===e)))).map((e=>({name:e,shortcut:""}))):[]))(t||[],e.options||[]):void 0),[e.options,t]),c=i().useRef(null),{setFocus:d}=i().useContext(s),u=i().useMemo((()=>r?r.reduce(((e,t,a)=>t.shortcut?Object.assign(Object.assign({},e),{[t.shortcut]:a}):e),{}):{}),[r]),m=i().useCallback((n=>a(e.name,D(n,t,e.multiple))),[t,e,a]);Z((e=>{if(e.ctrlKey||e.shiftKey||!u)return;const t=u[e.key];if(t>-1&&c.current){const a=c.current.querySelector(`.react-image-labeler-input-target[data-index='${t}'] input`);F(a),e.preventDefault(),e.stopPropagation(),d()}}),[u,c,d]);const[g,p]=i().useState({freeform:""});return i().useEffect((()=>p({freeform:r||e.multiple||!e.freeform||!t?"":t[0]||""})),[t]),i().createElement(J,{display:"inline"},i().createElement(o.FormControl,{sx:{ml:3,mr:3,mt:0,mb:3},component:"fieldset",variant:"standard",className:"label-panel-entry",disabled:!!n,name:e.name},i().createElement(o.FormLabel,{component:"legend",className:"label-panel-entry-label"},e.displayName||e.name," ",l?i().createElement(o.IconButton,{"aria-label":`edit ${e.name}`,className:"edit-label-entry",onClick:()=>l(e.name)},i().createElement(X.Edit,null)):null),i().createElement(o.FormGroup,{ref:c},(r||[]).map(((a,n)=>{const l={checked:!!(t&&t.indexOf(a.name)>-1),onChange:()=>m(a.name),name:a.name,className:"react-image-labeler-input-target"},s=`${a.displayName||a.name} ${a.shortcut?`(${a.shortcut})`:""}`;return i().createElement(o.FormControlLabel,{className:"label-panel-entry-option-label",key:n,control:e.multiple?i().createElement(o.Checkbox,Object.assign({},l,{"data-index":n})):i().createElement(o.Radio,Object.assign({},l,{"data-index":n,onClick:l.onChange})),color:"primary",label:s})}))),e.freeform?i().createElement(o.Input,{value:g.freeform,name:`${e.name}-freeform`,placeholder:e.multiple?"Add new option":void 0,onKeyPress:t=>{"Enter"===t.key&&(e.multiple||r?(m(g.freeform),p({freeform:""})):d(),t.preventDefault())},onChange:t=>{p(Object.assign(Object.assign({},g),{freeform:t.target.value})),e.multiple||r||m(t.target.value),t.preventDefault(),t.stopPropagation()}}):null))},ee=({config:e,labels:t,setLabels:a,disabled:n,editConfig:l})=>{const s=i().useCallback(((e,n)=>a(Object.assign(Object.assign({},t),{[e]:n}))),[t]);return i().createElement(o.Box,{ml:-3,mr:-3},e.map(((e,a)=>i().createElement(Q,{key:e.name,config:e,disabled:n,editConfig:l,selected:t[e.name],setSelected:s}))))},te=({open:e,existing:t,allowRegion:a=!0,onSave:n,onClose:l})=>{const s={properties:[],displayName:"",name:"",level:"image",options:[],mockSelected:[]},[r,c]=i().useState(s);i().useEffect((()=>{var e,a,n;t&&c(Object.assign(Object.assign({},s),{properties:[].concat((null===(e=null==t?void 0:t.config)||void 0===e?void 0:e.freeform)?["freeform"]:[]).concat((null===(a=null==t?void 0:t.config)||void 0===a?void 0:a.multiple)?["multiple"]:[]),displayName:t.config.displayName||"",name:t.config.name||"",level:t.level||"image",options:(null===(n=null==t?void 0:t.config.options)||void 0===n?void 0:n.map((e=>e.displayName||e.name)))||[]}))}),[t]);const d=i().useMemo((()=>r.name&&(r.properties.indexOf("freeform")>-1||r.options.length>0)),[r]),u=i().useMemo((()=>r.options.length>0?r.options.map((e=>Object.assign({name:e},(null==t?void 0:t.config.options)&&t.config.options.find((t=>(t.displayName||t.name)===e))||{}))):void 0),[r,t]);return i().createElement(o.Modal,{open:e,"aria-describedby":"add-or-update-new-label-entry-description"},i().createElement(o.Box,{sx:{p:2,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",color:"text.secondary",border:"2px solid #000",boxShadow:24}},i().createElement(o.Typography,{id:"add-or-update-new-label-entry-description",sx:{mb:1}},t?"Edit Label Configuration":"Add New Label Configuration"),i().createElement(o.Box,{ml:-3,mr:-3},i().createElement(Q,{setSelected:(e,[t])=>c(Object.assign(Object.assign({},r),{name:t})),selected:[r.name],disabled:!!t,config:{multiple:!1,freeform:!0,name:"Name"}}),i().createElement(Q,{setSelected:(e,[t])=>c(Object.assign(Object.assign({},r),{displayName:t})),selected:[r.displayName],disabled:!!t,config:{multiple:!1,freeform:!0,name:"Display Name"}}),i().createElement(o.Divider,{sx:{mb:2}}),i().createElement(Q,{disabled:!!t,setSelected:(e,[t])=>c(Object.assign(Object.assign({},r),{level:t||r.level})),selected:[r.level],config:{options:a?[{name:"image",displayName:"Image"},{name:"regions",displayName:"Regions"}]:[{name:"image",displayName:"Image"}],multiple:!1,freeform:!1,name:"Level"}}),i().createElement(Q,{setSelected:(e,t)=>c(Object.assign(Object.assign({},r),{properties:t})),selected:r.properties,config:{options:[{name:"freeform",displayName:"Freeform"},{name:"multiple",displayName:"Multiple"}],multiple:!0,freeform:!1,name:"Type"}}),i().createElement(Q,{setSelected:(e,t)=>c(Object.assign(Object.assign({},r),{options:t})),selected:r.options,config:{options:[],multiple:!0,freeform:!0,name:"Options"}})),i().createElement(o.ButtonGroup,{size:"small","aria-label":"label editing control menu"},i().createElement(o.Button,{disabled:!d,onClick:()=>{n({name:r.name,displayName:r.displayName,multiple:r.properties.indexOf("multiple")>-1,freeform:r.properties.indexOf("freeform")>-1,options:u},r.level),c(s)}},"Save"),i().createElement(o.Button,{onClick:()=>{l(),c(s)}},"Cancel")),d?i().createElement(o.Box,null,i().createElement(o.Divider,{sx:{mt:2,mb:2}}),i().createElement(o.Typography,null,"Your new label configuration will look like the following."),i().createElement(o.Box,{sx:{ml:-3,mr:-3,mt:1,mb:-3}},i().createElement(Q,{selected:r.mockSelected,setSelected:(e,t)=>c(Object.assign(Object.assign({},r),{mockSelected:t})),config:{name:r.name,displayName:r.displayName,options:u,multiple:r.properties.indexOf("multiple")>-1,freeform:r.properties.indexOf("freeform")>-1}}))):null))},ae=({data:e})=>i().createElement(o.TableContainer,{tabIndex:0,component:o.Paper,sx:{mb:0,mt:0},className:"metadata"},i().createElement(o.Table,{"aria-label":"metadata table"},i().createElement(o.TableBody,null,Object.entries(e).map((([e,t],a)=>i().createElement(o.TableRow,{key:a,sx:{"&:last-child td, &:last-child th":{border:0}}},i().createElement(o.TableCell,{align:"right",component:"th",scope:"row"},i().createElement("b",null,e)),i().createElement(o.TableCell,null,t)))))));const ne=e=>{var t,{draft:a,cursor:n,disabled:c,callbacks:d,showNavigation:u,setDraft:m,setCursor:g,allowRegion:p=!0}=e,v=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["draft","cursor","disabled","callbacks","showNavigation","setDraft","setCursor","allowRegion"]);const b=(0,o.useTheme)(),h=Object.fromEntries(["next","prev","save","finishRegion","clearRegion","delete","ignore","selectAll","selectNone","undoRegion","undo"].map((e=>[e,i().useRef(null)]))),f=T(),w=i().useMemo((()=>{var e,t;const n=a.drawing.active?"regions":"image",i={image:S((null===(e=v.config)||void 0===e?void 0:e.image)||[]),regions:S((null===(t=v.config)||void 0===t?void 0:t.regions)||[])},o=i[n]||[];return{level:n,activeConfig:o,config:i,direction:f?v.direction:"column",allowRegionSelection:(null==i?void 0:i.regions)&&i.regions.length>0&&p,disableLabelPanel:c||void 0!==a.drawing.active&&!0===a.drawing.active.region.readonly,labels:a.drawing.active?a.drawing.active.region.labels:a.labels.image,editConfig:(null==d?void 0:d.onSaveConfig)?e=>E({configEditorOpen:!0,index:o.findIndex((t=>t.name==e))}):void 0}}),[v.config,a.labels,a.drawing.active,p,c]),[x,E]=i().useState({configEditorOpen:!1,index:null}),{setFocus:O,hasFocus:k,setToast:j}=i().useContext(s),C=i().useCallback((e=>m(Object.assign(Object.assign({},a),{dirty:!0,labels:Object.assign(Object.assign({},a.labels),{[a.drawing.mode]:a.drawing.active?y(a.labels[a.drawing.mode],a.drawing.active.region,a.drawing.active.idx,e):a.labels[a.drawing.mode]}),drawing:Object.assign(Object.assign({},a.drawing),{active:void 0})}))),[a]);Z((e=>{let t;if((null==d?void 0:d.onKeyboardEvent)&&d.onKeyboardEvent(e),!e.altKey){switch(e.key){case"A":t=e.ctrlKey&&e.shiftKey?"selectNone":null;break;case"a":t=e.ctrlKey&&!e.shiftKey?"selectAll":null;break;case"z":t=e.metaKey!==e.ctrlKey?a.drawing.active?"undoRegion":"undo":null;break;case"ArrowRight":t=e.ctrlKey||e.shiftKey?null:"next",a.dirty&&null!==t&&(j("Please save or reset your changes before advancing to next item."),t=null);break;case"ArrowLeft":t="prev",a.dirty&&null!==t&&(j("Please save or reset your changes before returning to previous item."),t=null);break;case"Enter":t=e.ctrlKey||e.shiftKey?null:a.drawing.active?"finishRegion":"save";break;case"Backspace":case"Delete":t=e.ctrlKey||e.shiftKey?null:a.drawing.active?"clearRegion":"delete";break;default:return}t&&h[t].current&&(F(h[t].current).then(O),e.preventDefault(),e.stopPropagation())}}),[d,x,a,h,O,j]);const M=i().useCallback((e=>{m(Object.assign(Object.assign({},a),{dirty:!0,labels:a.drawing.active?a.labels:Object.assign(Object.assign({},a.labels),{image:e}),drawing:a.drawing.active?Object.assign(Object.assign({},a.drawing),{active:Object.assign(Object.assign({},a.drawing.active),{region:Object.assign(Object.assign({},a.drawing.active.region),{labels:e})})}):a.drawing}))}),[a,m]);return i().createElement(o.Box,null,i().createElement(r,null),i().createElement(ee,{config:w.activeConfig,disabled:w.disableLabelPanel,labels:w.labels,editConfig:w.editConfig,setLabels:M}),a.drawing&&(null===(t=a.drawing.active)||void 0===t?void 0:t.region.metadata)?i().createElement(o.Box,{sx:{position:"relative",zIndex:1}},i().createElement(ae,{data:a.drawing.active.region.metadata})):null,Object.keys((a.drawing.active?w.config.regions:w.config.image)||[]).length>0?i().createElement(o.Divider,{sx:{mb:3}}):null,w.allowRegionSelection?i().createElement(o.Box,null,i().createElement(o.Stack,{alignContent:"center",direction:w.direction,spacing:2},i().createElement(o.Box,{sx:{borderRight:"masks"===a.drawing.mode?`solid 1px ${b.palette.divider}`:void 0}},i().createElement(o.FormControl,null,i().createElement(o.FormLabel,null,"Drawing Mode"),i().createElement(o.RadioGroup,{row:!0,className:"drawing-mode-select",onChange:e=>m(Object.assign(Object.assign({},a),{drawing:"masks"===e.target.value?{flood:!1,mode:"masks"}:{mode:e.target.value}})),value:a.drawing.mode},[["boxes","Box"],["polygons","Polygon"],["masks","Mask"]].map((([e,t],n)=>i().createElement(o.FormControlLabel,{key:n,value:e,control:i().createElement(o.Radio,{className:"drawing-mode-option react-image-labeler-input-target",size:"small"}),label:t,disabled:!!a.drawing.active||c})))))),"masks"===a.drawing.mode?i().createElement(o.Box,{style:{display:"grid",gridTemplateColumns:"row"==w.direction?"100px 200px 200px":"100px 200px",gridTemplateAreas:"row"==w.direction?'"toggle threshold size"':'"toggle threshold" "size size"',gridTemplateRows:"auto",columnGap:25}},i().createElement(o.FormControlLabel,{style:{gridArea:"toggle"},control:i().createElement(o.Checkbox,{checked:a.drawing.flood,onChange:(e,t)=>m(Object.assign(Object.assign({},a),{drawing:"masks"===a.drawing.mode?Object.assign(Object.assign({},a.drawing),{flood:t}):a.drawing}))}),label:"Flood"}),i().createElement(o.Box,{style:{gridArea:"threshold",display:"inline-flex"}},i().createElement(l,{name:"Flood Threshold",value:n.threshold,min:0,disabled:!a.drawing.flood,max:20,width:"100%","aria-label":"segmentation mask flood threshold",onValueChange:e=>g(Object.assign(Object.assign({},n),{threshold:e}))})),i().createElement(o.Box,{style:{gridArea:"size",display:"inline-flex"}},i().createElement(l,{name:"Cursor Size",value:n.radius,min:1,max:50,width:"100%","aria-label":"segmentation mask labeling radius",onValueChange:e=>g(Object.assign(Object.assign({},n),{radius:e}))}))):null),i().createElement(o.Divider,{sx:{mb:2,mt:2}})):null,i().createElement(o.Stack,{direction:w.direction,spacing:2},a.drawing.active?i().createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"region control menu"},i().createElement(o.Button,{ref:h.finishRegion,onClick:()=>C(!0),startIcon:"⏎",className:"finish-region"},a.drawing.active.region.readonly?"Deselect":"Finish"),i().createElement(o.Button,{startIcon:"⌫",disabled:a.drawing.active.region.readonly,onClick:()=>C(!1),ref:h.clearRegion},"Delete"),(null==d?void 0:d.onUndo)?i().createElement(o.Button,{disabled:c,onClick:d.onUndo,startIcon:"⌃Z",ref:h.undoRegion},"Undo"):null):i().createElement(o.Stack,{direction:w.direction,spacing:2,style:{width:"100%"}},(null==d?void 0:d.onSelectAll)||(null==d?void 0:d.onSelectNone)?i().createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"selection control menu",className:"selection-control"},(null==d?void 0:d.onSelectAll)?i().createElement(o.Button,{disabled:!(null==d?void 0:d.onSelectAll)||c,onClick:null==d?void 0:d.onSelectAll,startIcon:"⌃A",ref:h.selectAll,className:"select-all"},"Select All"):null,(null==d?void 0:d.onSelectNone)?i().createElement(o.Button,{disabled:!(null==d?void 0:d.onSelectNone)||c,onClick:null==d?void 0:d.onSelectNone,startIcon:"⌃⇧A",ref:h.selectNone,className:"select-none"},"Select None"):null):null,i().createElement(o.ButtonGroup,{fullWidth:!0,size:"small","aria-label":"label control menu"},i().createElement(o.Button,{ref:h.save,disabled:!(null==d?void 0:d.onSave)||c,onClick:null==d?void 0:d.onSave,startIcon:"⏎",className:"save"},"Save"),(null==d?void 0:d.onIgnore)||(null==d?void 0:d.onUnignore)?i().createElement(o.Button,{ref:h.ignore,disabled:c,onClick:(null==d?void 0:d.onIgnore)||(null==d?void 0:d.onUnignore)},(null==d?void 0:d.onIgnore)?"Ignore":"Unignore"):null,(null==d?void 0:d.onDelete)?i().createElement(o.Button,{startIcon:"⌫",ref:h.delete,disabled:c,onClick:d.onDelete},"Delete"):null,(null==d?void 0:d.onReset)&&a.dirty?i().createElement(o.Button,{disabled:c,onClick:d.onReset},"Reset"):null,(null==d?void 0:d.onUndo)?i().createElement(o.Button,{disabled:c,onClick:d.onUndo,ref:h.undo,startIcon:"⌃Z"},"Undo"):null,d.onDownload?i().createElement(o.Button,{onClick:d.onDownload},"Download"):null),(null==d?void 0:d.onPrev)||(null==d?void 0:d.onNext)||u?i().createElement(o.ButtonGroup,{size:"small",fullWidth:!0,"aria-label":"navigation control menu"},i().createElement(o.Button,{startIcon:i().createElement(X.KeyboardArrowLeft,null),ref:h.prev,disabled:!(null==d?void 0:d.onPrev)||a.dirty,onClick:d.onPrev},"Previous"),i().createElement(o.Button,{startIcon:i().createElement(X.KeyboardArrowRight,null),ref:h.next,disabled:!(null==d?void 0:d.onNext)||a.dirty,onClick:d.onNext},"Next")):null,(null==d?void 0:d.onSaveConfig)||(null==d?void 0:d.onShowIndex)?i().createElement(o.ButtonGroup,{size:"small","aria-label":"add new configuration menu",fullWidth:!0},(null==d?void 0:d.onSaveConfig)?i().createElement(o.Button,{startIcon:i().createElement(X.Add,null),className:"add-new-label",onClick:()=>E({index:null,configEditorOpen:!0})},"Add Type"):null,(null==d?void 0:d.onShowIndex)?i().createElement(o.Button,{startIcon:i().createElement(X.List,null),className:"show-data-index",disabled:c,onClick:d.onShowIndex},"View Index"):null):null),i().createElement(o.Box,{title:k?"Listening for keyboard shortcuts.":"Keyboard shortcuts disabled. Click inside the widget to enable.",onClick:O,style:{zIndex:1}},i().createElement(X.Keyboard,{color:k?"primary":"warning",fontSize:"large"}))),d&&d.onSaveConfig&&x.configEditorOpen?i().createElement(te,{allowRegion:p,open:x.configEditorOpen,onClose:()=>E(Object.assign(Object.assign({},x),{configEditorOpen:!1})),existing:null!==x.index?{config:w.activeConfig[x.index],level:w.level}:void 0,onSave:(e,t)=>{if(null===x.index&&(w.config[t]||[]).find((t=>t.name===e.name)))throw"User attempted to add a config with the name of an existing config.";const a=w.config[t],n=null===x.index?a.length:x.index;d.onSaveConfig(Object.assign(Object.assign({},w.config),{[t]:a.slice(0,n).concat([e]).concat(a.slice(n+1))})),E({index:null,configEditorOpen:!1})}}):null)},ie=({images:e})=>{const[t,a]=i().useState(0);return i().useEffect((()=>a(0)),[e]),i().createElement("div",{style:{width:0,height:0,overflow:"hidden"}},e.map(((e,n)=>n<=t?i().createElement("img",{src:e,key:n,onLoad:()=>a(n+1)}):null)))};const oe=e=>{var{polygon:t,color:a,candidate:n}=e,o=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["polygon","color","candidate"]);const{points:l,xmin:s,ymin:r,xmax:c,ymax:d}=((e,t)=>{const a=t?e.concat([t]):e,[n,i,o,l]=[Math.min,Math.max].map((e=>["x","y"].map((t=>e.apply(Math,a.map((e=>e[t]))))))).flat();return{points:a,xmin:n,ymin:i,xmax:o,ymax:l}})(t.points,n),u=Math.max(c-s,E),m=Math.max(d-r,E);return i().createElement("svg",Object.assign({className:"region polygon",width:f(u),height:f(m)},o,{style:Object.assign({position:"absolute",left:f(s),top:f(r),overflow:"visible"},o.style||{})}),i().createElement("text",Object.assign({fill:a},o,{className:"box-text",alignmentBaseline:"hanging",onClick:o.onClick}),x(t.labels)),i().createElement("svg",Object.assign({},o),Array.from(Array(l.length-1).keys()).map((e=>i().createElement("line",{key:e,stroke:a,strokeWidth:"calc(2px / var(--media-viewer-scale, 1))",x1:f((l[e].x-s)/u),y1:f((l[e].y-r)/m),x2:f((l[e+1].x-s)/u),y2:f((l[e+1].y-r)/m)})))))};const le=e=>{var{box:t,color:a,candidate:n}=e,o=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["box","color","candidate"]);const l=t.pt1,s=t.pt2||n;if(!s)return null;const[r,c,d,u]=[Math.min,Math.max].map((e=>["x","y"].map((t=>e.apply(Math,[l,s].map((e=>e[t]))))))).flat(),m=Math.max(d-r,E),g=Math.max(u-c,E);return i().createElement("svg",Object.assign({className:"region box",width:f(m),height:f(g)},o,{style:Object.assign({position:"absolute",left:f(r),top:f(c),height:f(g),overflow:"visible"},o.style||{})}),i().createElement("text",{fill:a,className:"box-text",z:0,dominantBaseline:"hanging",onClick:o.onClick},x(t.labels)),i().createElement("rect",Object.assign({},o,{x:0,y:0,fill:"none",width:"100%",strokeWidth:"calc(2px / var(--media-viewer-scale, 1))",height:"100%",stroke:a,z:1})))};const se=e=>{var{radius:t,round:a,x:n,y:o,crosshair:l}=e,s=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["radius","round","x","y","crosshair"]);return i().createElement("div",Object.assign({},s,{className:"mask-cursor",style:Object.assign(Object.assign({},s.style||{}),{height:2*t+"px",width:2*t+"px",boxSizing:"content-box",borderRadius:a?`${t+2}px`:void 0,transform:`translate(${-t-2}px, ${-t-2}px) scale(calc(1/var(--media-viewer-scale, 1)))`,left:f(n),top:f(o),position:"absolute",border:"2px solid red",cursor:"none",overflow:"visible",pointerEvents:"none"})}),l?i().createElement("svg",{style:{position:"absolute",left:"-10%",top:"-10%",height:"120%",width:"120%",overflow:"visible",pointerEvents:"none"}},i().createElement("line",{x1:"50%",x2:"50%",y1:"0%",y2:"100%",stroke:"red",strokeWidth:"2px"}),i().createElement("line",{y1:"50%",y2:"50%",x1:"0%",x2:"100%",stroke:"red",strokeWidth:"2px"})):null)};const re=e=>{var{bitmap:t,color:a}=e,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["bitmap","color"]);const o=i().useRef(null);return i().useEffect((()=>{if(t&&o.current){const e=o.current.getContext("2d");if(!e)throw"Failed to find canvas context.";o.current.width=t.dimensions.width,o.current.height=t.dimensions.height;const n=e.createImageData(t.dimensions.width,t.dimensions.height),i="red"===a?[255,0,0,127]:"blue"===a?[0,0,255,127]:[255,255,0,127];Uint8ClampedArray.from(Array.from(t.values).map((e=>255===e?i:[0,0,0,0])).flat()).forEach(((e,t)=>n.data[t]=e)),e.putImageData(n,0,0)}}),[t,a,o]),i().createElement("canvas",Object.assign({},n,{className:"region mask",style:Object.assign(Object.assign({},n.style||{}),{imageRendering:"pixelated",position:"absolute",width:"100%",height:"100%",top:0}),ref:o}))},ce=(0,o.styled)(o.Box)`
  .box-text {
    font-size: calc(10pt / var(--media-viewer-scale, 1));
    font-family: Roboto, Helvetica, Arial, sans-serif;
    transform: translate(
      calc(10px / var(--media-viewer-scale, 1)),
      calc(10px / var(--media-viewer-scale, 1))
    );
  }

  svg,
  .mask-cursor,
  canvas {
    z-index: 1;
  }
`,de=({config:e,draft:t,callbacks:a,cursor:n})=>{var o,l;const s=(null==e?void 0:e.regions)&&e.regions.length>0?"none":void 0;return i().createElement(ce,null,t.labels.masks.map(((e,n)=>{var o;return"masks"!==t.drawing.mode||(null===(o=t.drawing.active)||void 0===o?void 0:o.idx)!==n?i().createElement(re,Object.assign({color:e.readonly?"yellow":"blue",key:n,bitmap:e.map,style:{cursor:s,pointerEvents:"masks"===t.drawing.mode?void 0:"none"}},a)):null})),t.labels.polygons.map(((e,n)=>{var o;return"polygons"!==t.drawing.mode||(null===(o=t.drawing.active)||void 0===o?void 0:o.idx)!==n?i().createElement(oe,Object.assign({polygon:e,style:{cursor:s,pointerEvents:"polygons"===t.drawing.mode?void 0:"none"},key:n,color:e.readonly?"yellow":"blue"},a,{onClick:t=>a.onClick(t,e,n)})):null})),t.labels.boxes.map(((e,n)=>{var o;return"boxes"!==t.drawing.mode||(null===(o=t.drawing.active)||void 0===o?void 0:o.idx)!==n?i().createElement(le,Object.assign({color:e.readonly?"yellow":"blue",box:e,key:n,style:{cursor:s,pointerEvents:"boxes"===t.drawing.mode?void 0:"none"}},a,{onClick:t=>a.onClick(t,e,n)})):null})),t.drawing.active?"polygons"===t.drawing.mode?i().createElement(oe,Object.assign({color:"red",polygon:t.drawing.active.region},a,{candidate:t.drawing.active.idx>-1?void 0:n.coords,style:{cursor:s,pointerEvents:"none"}})):"boxes"===t.drawing.mode?i().createElement(le,Object.assign({color:"red",box:t.drawing.active.region,candidate:t.drawing.active.idx>-1?void 0:n.coords,style:{cursor:s,pointerEvents:"none"}},a)):"masks"===t.drawing.mode?i().createElement(re,Object.assign({color:"red"},a,{bitmap:t.drawing.active.region.map,style:{cursor:s,pointerEvents:"none"}})):null:null,n.coords&&void 0!==n?i().createElement(se,Object.assign({},a,{radius:"masks"===t.drawing.mode?n.radius:5,x:n.coords.x,y:n.coords.y,crosshair:"masks"!==t.drawing.mode&&("boxes"===t.drawing.mode||!I(n.coords,null===(l=null===(o=t.drawing.active)||void 0===o?void 0:o.region)||void 0===l?void 0:l.points)),round:"masks"!==t.drawing.mode})):null)},ue=({enhancements:e,setEnhancements:t})=>{const a=T();return i().createElement(o.Box,{sx:{display:"grid",gridTemplateColumns:a?"1fr 1fr 1fr 100px":"1fr",columnGap:2}},[{key:"saturation",name:"Saturation"},{key:"brightness",name:"Brightness"},{key:"contrast",name:"Contrast"}].map((a=>i().createElement(l,{min:0,max:10,step:.1,name:a.name,key:a.key,marks:[{value:1}],valueLabelDisplay:"auto",value:e[a.key],onValueChange:n=>t(Object.assign(Object.assign({},e),{[a.key]:n}))}))))},me=e=>i().createElement(o.Box,{sx:{display:"flex",alignItems:"center"}},i().createElement(o.Box,{sx:{width:"100%",mr:1}},i().createElement(o.LinearProgress,{variant:"determinate",value:e.progress})),i().createElement(o.Box,{sx:{minWidth:20,textAlign:"right"}},i().createElement(o.Typography,{variant:"body2",color:"text.secondary"},`${Math.round(e.progress)}%`))),ge=({layout:e="horizontal",control:t,content:a,metadata:n,progress:l})=>{const s=T();return i().createElement(o.Box,null,void 0!==l&&l>=0?i().createElement(o.Box,{sx:{mb:1}},i().createElement(me,{progress:l})):null,i().createElement(o.Box,{style:{display:"grid",gridTemplateColumns:(a||n)&&"horizontal"===e&&s?"315px 1fr":"1fr",gridTemplateRows:"auto",gridTemplateAreas:a||n?"horizontal"===e&&s?'"control-panel image-target"':'"image-target" "control-panel"':'"control-panel"',gridColumnGap:a||n?20:0,rowGap:a||n?20:0,position:"relative"}},i().createElement(o.Box,{style:{position:"relative",gridArea:"control-panel"}},i().createElement(r,null),t),i().createElement(o.Box,{style:{position:"relative",gridArea:"image-target"}},i().createElement(r,null),i().createElement(o.Stack,{rowGap:1},a,n?i().createElement(o.Box,{sx:{position:"relative",zIndex:1}},i().createElement(ae,{data:n})):null))))},pe=({target:e,labels:t={image:{}},options:a,callbacks:n,metadata:l,preload:s,config:r={image:[],regions:[]}})=>{var c,d,u;const{draft:m,setDraft:g,resetDraft:p,cursor:v,setCursor:b,undo:h}=V(t,[e],[e]),f={viewer:i().useRef(null),source:i().useRef(null),canvas:i().useRef(null)},y=G(),w=$(i().useCallback((e=>new Promise(((e,t)=>{if(f.source.current){const t={width:f.source.current.naturalWidth,height:f.source.current.naturalHeight};e({size:t,layout:t.height>t.width?"horizontal":"vertical"})}else t("Did not find source ref.")}))),[f.source,e]),e),x=i().useCallback((()=>{var e;return(null==n?void 0:n.onSave)?n.onSave(Object.assign(Object.assign({},j(m.labels)),{dimensions:null===(e=w.mediaState)||void 0===e?void 0:e.size})):void 0}),[m,w.mediaState,null==n?void 0:n.onSave]),E=W(m,g,v,b,f,!!(r.regions&&r.regions.length>0),null==a?void 0:a.maxCanvasSize);return i().createElement(ge,{metadata:l,progress:null==a?void 0:a.progress,layout:(null===(c=w.mediaState)||void 0===c?void 0:c.layout)||"horizontal",control:i().createElement(ne,{cursor:v,setCursor:b,config:r,disabled:"loading"===w.loadState,direction:"horizontal"===((null===(d=w.mediaState)||void 0===d?void 0:d.layout)||"horizontal")?"column":"row",draft:m,showNavigation:null==a?void 0:a.showNavigation,setDraft:g,callbacks:Object.assign(Object.assign({},n),{onSave:(null==n?void 0:n.onSave)?x:void 0,onReset:p,onUndo:h})}),content:i().createElement(o.Box,null,i().createElement(o.Box,null,i().createElement(Y,{size:null===(u=w.mediaState)||void 0===u?void 0:u.size,cursor:v.coords,controls:i().createElement(ue,{enhancements:y.value,setEnhancements:e=>{y.set(e),g(Object.assign(Object.assign({},m),{canvas:null}))}}),media:{main:e?i().createElement("img",Object.assign({},E,{ref:f.source,onLoad:w.callbacks.onLoad,onError:w.callbacks.onError,draggable:!1,src:w.src,style:{cursor:r.regions&&r.regions.length>0?"none":void 0,filter:y.filter}})):null,mini:e?i().createElement("img",{src:w.src,style:{filter:y.filter}}):null},loadState:w.loadState,onMouseLeave:()=>b(Object.assign(Object.assign({},v),{coords:void 0}))},i().createElement(de,{cursor:v,config:r,draft:m,callbacks:E}))),"loading"!==w.loadState&&null===m.canvas?i().createElement("canvas",{style:{display:"none"},ref:f.canvas}):null,"loading"!==w.loadState&&s?i().createElement(ie,{images:s}):null)})},ve=e=>void 0===e||isNaN(e)?"00:00":`${Math.floor(e/60).toString().padStart(2,"0")}:${Math.round(e%60).toString().padStart(2,"0")}`,be=({timestamp:e,secondary:t,duration:a,marks:n,setTimestamp:l,setSecondary:s,secondaryThumbnail:r})=>i().createElement(o.Box,{sx:{width:"100%"},className:"playbar"},i().createElement(o.Stack,{direction:"row",alignItems:"center",spacing:2},i().createElement(o.Typography,{fontSize:"small"},ve(e),"/",ve(a)),i().createElement(o.Box,{style:{width:"100%",display:"inherit",position:"relative"}},void 0!==t&&void 0!==a?i().createElement(o.Box,{style:{position:"absolute",maxWidth:100,maxHeight:100,left:f(t/a),bottom:"60%"}},r):null,i().createElement(o.Slider,{size:"small",min:0,step:.01,classes:{thumb:"slider-thumb"},componentsProps:{markLabel:{onClick:e=>{const t=e.currentTarget.getAttribute("data-index");t&&l(n[parseInt(t)])}}},max:a||10,valueLabelDisplay:"auto",marks:n.map((e=>({value:e,label:e}))),value:[e].concat(void 0!==t?[t]:[]),onChange:(e,t,a)=>{const n=t,i=e.altKey;i&&(1==n.length||n[a]>=n[1-a])?s(n[a]):i||l(n[a])}})))),he=({target:e,config:t={image:[],regions:[]},labels:a,metadata:n,options:l,callbacks:r})=>{var c,d,u,m;const g={mini:i().useRef(null),main:i().useRef(null),secondaryThumbnail:i().useRef(null),viewer:i().useRef(null),canvas:i().useRef(null),playpause:i().useRef(null),fastforward:i().useRef(null),mute:i().useRef(null)},{setFocus:p,setToast:v}=i().useContext(s),b=G(),h=i().useMemo((()=>a||[]),[a]),{playbackState:f,setPlaybackState:w,toggleMute:x}=((e,t)=>{const{setFocus:a}=i().useContext(s),[n,o]=i().useState({paused:!0,playbackRate:0,muted:!1,timestamp:0,labels:{image:{}},end:void 0});i().useEffect((()=>{e.main.current&&o(Object.assign(Object.assign({},n),U(t,e.main.current.currentTime)))}),[t,e.main]),_((()=>{!e.main.current||e.main.current.paused===n.paused&&e.main.current.currentTime===n.timestamp&&e.main.current.playbackRate===n.playbackRate||o(Object.assign(Object.assign(Object.assign(Object.assign({},n),{paused:e.main.current.paused,playbackRate:e.main.current.playbackRate}),e.main.current.paused?U(t,e.main.current.currentTime):{end:void 0,labels:{}}),{timestamp:e.main.current.currentTime})),e.secondaryThumbnail.current&&n.end&&e.secondaryThumbnail.current.currentTime!==n.end&&(e.secondaryThumbnail.current.currentTime=n.end),["main","mini"].map((t=>{const a=e[t].current;a&&a&&a.muted!==n.muted&&(a.muted=n.muted)}))}),10,!0);const l=i().useCallback((()=>o(Object.assign(Object.assign({},n),{muted:!n.muted}))),[n]),r=i().useCallback(((t,i,l)=>{if(e.main.current&&e.mini.current){if(0==t)e.main.current.pause(),e.mini.current.pause();else if(t>0)e.main.current.playbackRate=t,e.mini.current.playbackRate=t,e.main.current.paused&&(e.main.current.play(),e.mini.current.play());else if(t<0)throw"Rewinding is not supported.";void 0!==i&&(e.main.current.currentTime=i,e.mini.current.currentTime=i),void 0!==l&&o(Object.assign(Object.assign({},n),{end:l})),a()}}),[e,n,a]);return{playbackState:n,setPlaybackState:r,toggleMute:l}})(g,h),{draft:E,setDraft:O,resetDraft:k,cursor:S,setCursor:C,undo:M}=V(f.labels,[f.timestamp,e],[f.timestamp,e]);Z((e=>{let t;switch(e.key){case"Spacebar":case" ":t=E.dirty?null:"playpause",t||v("Save or reset your labels to continue playback.");break;case"ArrowRight":t=e.altKey&&!E.dirty?"fastforward":null,!t&&e.altKey&&v("Save or reset your labels to continue playback.");break;case"m":t=e.altKey?"mute":null;default:return}t&&g[t].current&&(F(g[t].current).then(p),e.preventDefault(),e.stopPropagation())}),[g]);const z=$((e=>new Promise(((e,t)=>{if(g.main.current){const t={width:g.main.current.videoWidth,height:g.main.current.videoHeight};e({duration:g.main.current.duration,layout:t.height>t.width?"horizontal":"vertical",size:t})}else t("Could not handle loading because video element was missing.")}))),e),I=W(E,O,S,C,{source:g.main,canvas:g.canvas},!!(t.regions&&t.regions.length>0),null==l?void 0:l.maxCanvasSize),B=i().useMemo((()=>f.paused?I:{onClick:()=>w(0),onMouseMove:void 0}),[f.paused,w]),N=[{icon:f.paused?X.PlayArrow:X.Pause,label:f.paused?"play (spacebar)":"pause (spacebar)",className:"playpause",disabled:f.paused&&E.dirty,ref:g.playpause,callbacks:{onClick:()=>w(f.paused?1:0)}},{icon:X.FastForward,label:"forward (alt→)",className:"fastforward",ref:g.fastforward,disabled:f.paused&&E.dirty,callbacks:{onClick:()=>w(f.playbackRate+1)}},{icon:f.muted?X.VolumeMute:X.VolumeUp,label:"mute/unmute forward (alt+m)",className:"mute",ref:g.mute,disabled:!f.paused,callbacks:{onClick:x}}];return i().createElement(ge,{metadata:n,layout:(null===(c=z.mediaState)||void 0===c?void 0:c.layout)||"horizontal",progress:null==l?void 0:l.progress,control:i().createElement(ne,{cursor:S,setCursor:C,config:t,disabled:"loading"===z.loadState||!f.paused,direction:"horizontal"===((null===(d=z.mediaState)||void 0===d?void 0:d.layout)||"horizontal")?"column":"row",draft:E,showNavigation:null==l?void 0:l.showNavigation,setDraft:O,callbacks:Object.assign(Object.assign({},r),{onSave:()=>{return(null==r?void 0:r.onSave)?r.onSave((e={labels:j(E.labels),timestamp:f.timestamp,end:f.end},y(t=a||[],e,t.findIndex((t=>t.timestamp===e.timestamp)),!0).sort(((e,t)=>e.timestamp>t.timestamp?1:-1)))):void 0;var e,t},onReset:k,onUndo:M})}),content:i().createElement(o.Box,null,i().createElement(Y,{size:null===(u=z.mediaState)||void 0===u?void 0:u.size,loadState:z.loadState,cursor:S.coords,onMouseLeave:()=>C(Object.assign(Object.assign({},S),{coords:void 0})),media:{main:i().createElement("video",Object.assign({disablePictureInPicture:!0,onLoadedMetadata:z.callbacks.onLoad,onError:z.callbacks.onError},B,{ref:g.main,src:z.src,style:{filter:b.filter,cursor:t.regions&&t.regions.length>0&&f.paused?"none":void 0}})),mini:i().createElement("video",{src:e,ref:g.mini,style:{filter:b.filter}})},controls:i().createElement(o.Box,null,i().createElement(o.Stack,{direction:"row",alignItems:"center",spacing:2},i().createElement(o.Stack,{direction:"row",alignItems:"center",spacing:0},N.map((e=>i().createElement(o.IconButton,Object.assign({},e.callbacks,{disabled:e.disabled,className:e.className,ref:e.ref,key:e.label,"aria-label":e.label,title:e.label,size:"small"}),i().createElement(e.icon,{fontSize:"small"}))))),i().createElement(be,{marks:(a||[]).map((e=>e.timestamp)),timestamp:f.timestamp,duration:null===(m=z.mediaState)||void 0===m?void 0:m.duration,secondary:f.end,secondaryThumbnail:i().createElement("video",{src:e,ref:g.secondaryThumbnail,style:{maxWidth:"100%",maxHeight:"100%",filter:b.filter}}),setSecondary:e=>w(0,void 0,e),setTimestamp:e=>E.dirty?void 0:w(0,e)})),i().createElement(ue,{enhancements:b.value,setEnhancements:e=>{b.set(e),O(Object.assign(Object.assign({},E),{canvas:null}))}}))},i().createElement(de,{config:t,cursor:S,draft:E,callbacks:I})),"loading"!==z.loadState&&null===E.canvas?i().createElement("canvas",{style:{display:"none"},ref:g.canvas}):null)})},fe=(0,o.styled)(o.ImageList)`
  & .MuiImageListItem-root {
    width: 100%;

    & img {
      transition: opacity 1s;
      z-index: 0;
      opacity: 1;
    }

    &.active,
    &:active img {
      transition: opacity 1s;
      opacity: 0.25;
    }
  }
  & .MuiImageListItemBar-titleWrap {
    padding: 8px;
  }
  & .MuiImageListItemBar-root {
    z-index: 1;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.7) 0%,
      rgba(0, 0, 0, 0.3) 70%,
      rgba(0, 0, 0, 0) 100%
    );
  }
`,ye=({target:e=[],labels:t,options:a,callbacks:n,setStates:l,states:c,config:d={image:[],regions:[]},columns:u=3})=>{const m=T(),g=G(),p=i().useCallback((e=>l(c.slice(0,e).concat([Object.assign(Object.assign({},c[e]),{selected:!c[e].selected})]).concat(c.slice(e+1)))),[l,c]),{setToast:v}=i().useContext(s),{draft:b,setDraft:h,resetDraft:f}=V(t,[e]),y=i().useCallback((()=>(null==n?void 0:n.onSave)?n.onSave(Object.assign({},j(b.labels))):void 0),[b,null==n?void 0:n.onSave]);return i().useEffect((()=>{c&&c.some((e=>["boxes","masks","polygons"].some((t=>e.labels&&e.labels[t||"masks"]&&e.labels[t||"masks"].length>0))))&&v("Warning: One of these items has region labels that will be overwritten upon saving.")}),[c]),i().createElement(ge,{layout:m?"horizontal":"vertical",progress:null==a?void 0:a.progress,control:i().createElement(ne,{cursor:{radius:0,threshold:0,coords:void 0},setCursor:e=>{},disabled:!1,direction:"column",showNavigation:null==a?void 0:a.showNavigation,config:{image:null==d?void 0:d.image,regions:void 0},draft:b,setDraft:h,callbacks:Object.assign(Object.assign({},n),{onSave:(null==n?void 0:n.onSave)?y:void 0,onReset:f,onSelectAll:c.some((e=>e.visible&&!e.selected))?()=>l(c.map((e=>Object.assign(Object.assign({},e),{selected:e.visible})))):void 0,onSelectNone:c.some((e=>e.visible&&e.selected))?()=>l(c.map((e=>Object.assign(Object.assign({},e),{selected:!1})))):void 0})}),content:i().createElement(o.Box,null,i().createElement(r,null),i().createElement(fe,{cols:u,sx:{mt:0},variant:"masonry"},c.map(((t,a)=>{var n;return t.visible?i().createElement(o.ImageListItem,{key:a,"data-index":a,onClick:()=>p(a),tabIndex:0,className:"batch-image-list-item"},i().createElement(o.ImageListItemBar,{position:"top",title:i().createElement(o.Box,{sx:{height:25}},t.ignored?i().createElement(o.Box,{title:"ignored",flexDirection:"row-reverse",alignItems:"center",display:"flex"},i().createElement(X.VisibilityOff,null)):t.labeled?i().createElement(o.Box,{title:"labeled",flexDirection:"row-reverse",alignItems:"center",display:"flex"},i().createElement(X.TurnedIn,null)):null),actionIcon:i().createElement(o.IconButton,{sx:{color:"white"},"aria-label":`selected ${a}`},t.selected?i().createElement(X.CheckCircle,null):i().createElement(X.Circle,null)),actionPosition:"left"}),e[a]?i().createElement("img",{src:e[a],style:{filter:g.filter}}):i().createElement(o.Box,{sx:{mb:5}}),t.metadata?i().createElement(ae,{data:Object.fromEntries(Object.entries(t.metadata||{}).concat((null===(n=t.labels)||void 0===n?void 0:n.image)?(d.image||[]).map((e=>[e.displayName||e.name,t.labels.image[e.name]?e.multiple?t.labels.image[e.name].join(", "):t.labels.image[e.name][0]:void 0])).filter((([e,t])=>void 0!==t)):[]))}):null):null}))),i().createElement(ue,{enhancements:g.value,setEnhancements:g.set}))})},we=i().forwardRef(((e,t)=>i().createElement("div",{style:{width:0,height:0,overflow:"hidden"}},i().createElement("div",{ref:t,className:"react-image-labeler-input-target",tabIndex:-1}))));var xe=a(50594);const Ee=e=>{var{maxViewHeight:t=512,children:a}=e,n=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(a[n[i]]=e[n[i]])}return a}(e,["maxViewHeight","children"]);const l={hidden:i().useRef(null),container:i().useRef(null)},[r,c]=i().useState(""),[d,u]=i().useState(!1),m=i().useCallback((()=>{l.hidden.current&&l.hidden.current.focus({preventScroll:!0})}),[l.hidden]);_((()=>{const e=!(!l.container.current||!l.container.current.contains(document.activeElement));e!==d&&u(e)}),100,!0,[l,d]);const g=()=>c("");return i().createElement(s.Provider,{value:{container:l.container,setToast:c,setFocus:m,hasFocus:d,maxViewHeight:t}},i().createElement(o.Box,{className:"react-image-labeler",ref:l.container,style:{position:"relative"}},i().createElement(o.Box,Object.assign({},n),a,i().createElement(we,{ref:l.hidden}),i().createElement(o.Snackbar,{sx:{position:"absolute",height:"100%",left:"50%"},anchorOrigin:{horizontal:"center",vertical:"top"},open:""!==r,autoHideDuration:3e3,action:i().createElement(i().Fragment,null,i().createElement(o.IconButton,{size:"small","aria-label":"close",color:"inherit",onClick:g},i().createElement(xe.Z,{fontSize:"small"}))),onClose:g,message:r}))))};var Oe=a(5228);const ke=(0,o.styled)(Oe.DataGrid)`
  & .MuiDataGrid-cell:focus {
    outline: none;
  }
`,je=({idx:e,indexState:t,setIndexState:a,label:n,visible:l=!0,rowKey:r})=>{const c=i().useRef(null),{setFocus:d,maxViewHeight:u}=i().useContext(s);return Z((e=>{if(!c.current||!l)return;let t;switch(e.key){case"ArrowRight":t=".MuiTablePagination-actions button:nth-of-type(2)";break;case"ArrowLeft":t=".MuiTablePagination-actions button:nth-of-type(1)";break;default:return}if(!t)return;const a=c.current.querySelector(t);a&&(F(a),d())}),[c,l]),i().createElement(o.Box,{onClick:d},i().createElement(o.Box,{style:{height:u,width:"100%"},ref:c},i().createElement(ke,{disableColumnFilter:!0,rows:t.rows,rowCount:t.rowCount,columns:t.columns,paginationMode:"server",autoHeight:!0,pageSize:t.rowsPerPage,rowsPerPageOptions:[t.rowsPerPage],disableSelectionOnClick:!0,onRowClick:e=>n(e.id),selectionModel:[e],page:t.page,onPageChange:e=>a(Object.assign(Object.assign({},t),{page:e})),sortModel:t.sortModel,onSortModelChange:e=>a(Object.assign(Object.assign({},t),{sortModel:e})),hideFooterSelectedRowCount:!0,getRowId:e=>e[r]})),i().createElement(o.ButtonGroup,{sx:{mt:2},fullWidth:!0,size:"small","aria-label":"index control menu"},i().createElement(o.Button,{onClick:()=>n(e),startIcon:i().createElement(X.ArrowBack,null)},"Back to Labeling")))};var Se=a(75243),Ce=a.n(Se),Me=a(48931);const ze=(0,o.styled)(o.Box)`
  & .recharts-reference-area-rect {
    fill-opacity: 0.25;
  }
  & .recharts-reference-area.active .recharts-reference-area-rect:hover,
  .recharts-reference-area-rect:hover {
    fill: red;
  }
  & .recharts-reference-area.active .recharts-reference-area-rect {
    fill: blue;
  }

  & .recharts-dot {
    fill: white;
    stroke: var(--line-color);
  }

  & .recharts-dot.hoverable:hover,
  .recharts-dot.active {
    fill: var(--line-color);
  }

  & .recharts-dot.active:hover {
    fill: red;
    stroke: red;
  }

  & .recharts-text.recharts-label {
    text-anchor: middle;
  }
`,Ie=({target:e,toggle:t,labels:a})=>{const{setFocus:n}=i().useContext(s),o=i().useMemo((()=>e.plots.map((e=>e.x.values.map(((t,a)=>Object.assign(Object.assign({},Object.fromEntries(e.y.lines.map((e=>[e.name,e.values[a]])))),{[e.x.name]:t})))))),[e]);return i().createElement(ze,{onClick:n},e.plots.map(((e,l)=>{var s,r,c,d,u,m,g,p,v,b,h,f;return i().createElement(Me.LineChart,{key:l,width:(null===(s=e.size)||void 0===s?void 0:s.width)||512,height:(null===(r=e.size)||void 0===r?void 0:r.height)||256,data:o[l]},i().createElement(Me.XAxis,{height:e.x.height||60,dataKey:e.x.name,type:e.x.type||"number",tickCount:e.x.tickCount,label:e.x.name}),i().createElement(Me.YAxis,{type:(null===(c=e.y.types)||void 0===c?void 0:c.left)||"number",domain:null===(d=e.y.limits)||void 0===d?void 0:d.left,allowDataOverflow:!0,label:(null===(u=e.y.labels)||void 0===u?void 0:u.left)?{value:null===(m=e.y.labels)||void 0===m?void 0:m.left,angle:-90,position:"insideLeft"}:void 0,width:(null===(g=e.y.widths)||void 0===g?void 0:g.left)||60,yAxisId:"left",orientation:"left"}),i().createElement(Me.YAxis,{type:(null===(p=e.y.types)||void 0===p?void 0:p.right)||"number",allowDataOverflow:!0,domain:null===(v=e.y.limits)||void 0===v?void 0:v.right,label:(null===(b=e.y.labels)||void 0===b?void 0:b.right)?{value:null===(h=e.y.labels)||void 0===h?void 0:h.right,angle:-90,position:"insideRight"}:void 0,width:(null===(f=e.y.widths)||void 0===f?void 0:f.right)||60,yAxisId:"right",orientation:"right"}),i().createElement(Me.Legend,null),i().createElement(Me.CartesianGrid,null),(e.areas||[]).map(((e,o)=>i().createElement(Me.ReferenceArea,{yAxisId:"left",label:e.label,key:o,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2,stroke:e.stroke||"black",strokeDasharray:e.strokeDashArray||"4",className:(a.image&&a.image[e.labelKey]?a.image[e.labelKey]:[]).indexOf(e.labelVal)>-1?"active":void 0,onClick:()=>{t&&t(e.labelKey,e.labelVal),n()}}))),e.y.lines.map(((n,o)=>i().createElement(Me.Line,{key:o,animationDuration:e.y.animation||1500,yAxisId:n.axis||"left",type:n.type||"monotone",dataKey:n.name,stroke:n.color,dot:!!n.dot&&(o=>{var l,s;const r=o.payload[e.x.name],c=a.image&&!!(null===(l=n.dot)||void 0===l?void 0:l.labelKey),d=!(!c||!a.image[n.dot.labelKey])&&(a.image[n.dot.labelKey]||[]).indexOf(r.toString())>-1,u={key:o.key,r:o.r,cx:o.cx,cy:o.cy,strokeWidth:o.strokeWidth,style:{"--line-color":o.stroke},className:d?"active":c?"hoverable":void 0,onClick:(null===(s=n.dot)||void 0===s?void 0:s.labelKey)&&t?()=>t(n.dot.labelKey,r.toString()):void 0};return i().createElement(Me.Dot,Object.assign({},u))})}))))})))};var Be=a(83601),Ne=a.n(Be);const Re=(0,o.styled)(o.Box)`
  & .metadata table {
    border: 1px solid;
  }
  & .metadata {
    margin-top: 5px;
    box-shadow: none;
    border-radius: 0;
  }
`,Pe=({target:e,labels:t,config:a={image:[]},options:n,callbacks:l,metadata:r})=>{const c={container:i().useRef(null),downloadable:i().useRef(null)},{setToast:d}=i().useContext(s),{draft:u,setDraft:m,resetDraft:g,cursor:p,setCursor:v,undo:b}=V(t,[e],[e]),h=L((e=>{v(Object.assign(Object.assign({},p),{coords:e}))}),c.container,[p]),f=i().useCallback((()=>v(Object.assign(Object.assign({},p),{coords:void 0}))),[p]),y=i().useCallback((()=>(null==l?void 0:l.onSave)?l.onSave(Object.assign({},j(u.labels))):void 0),[u,null==l?void 0:l.onSave]),w=i().useCallback(((e,t)=>{var n;return m(Object.assign(Object.assign({},u),{dirty:!0,labels:Object.assign(Object.assign({},u.labels),{image:Object.assign(Object.assign({},u.labels.image),{[e]:D(t,u.labels.image[e]||[],!!a.image&&(null===(n=a.image.filter((t=>t.name===e))[0])||void 0===n?void 0:n.multiple))})})}))}),[u.labels,a,m]),x=i().useMemo((()=>e?e.plots.reduce(((e,t)=>{var a,n;return{width:e.width+((null===(a=t.size)||void 0===a?void 0:a.width)||512),height:e.height+((null===(n=t.size)||void 0===n?void 0:n.height)||256)}}),{width:0,height:0}):void 0),[e]),E=i().useCallback((()=>{return t=void 0,a=void 0,i=function*(){yield Ne()(c.downloadable.current,{logging:!1}).then((t=>{if(!(null==e?void 0:e.filename))return;const a=t.toDataURL("image/png",1);a?Ce().saveAs(a,e.filename.toLowerCase().endsWith(".png")?e.filename:e.filename+".png"):d("Failed to render figure.")}))},new((n=void 0)||(n=Promise))((function(e,o){function l(e){try{r(i.next(e))}catch(e){o(e)}}function s(e){try{r(i.throw(e))}catch(e){o(e)}}function r(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(l,s)}r((i=i.apply(t,a||[])).next())}));var t,a,n,i}),[e,t,c.downloadable,d]);return i().createElement(o.Box,null,i().createElement(ge,{metadata:r,progress:null==n?void 0:n.progress,layout:"vertical",control:i().createElement(ne,{cursor:p,config:{image:a.image||[]},setCursor:v,allowRegion:!1,disabled:!1,direction:"row",draft:u,showNavigation:null==n?void 0:n.showNavigation,setDraft:m,callbacks:Object.assign(Object.assign({},l),{onSave:(null==l?void 0:l.onSave)?y:void 0,onReset:g,onDownload:(null==e?void 0:e.filename)?E:void 0,onUndo:b})}),content:i().createElement(Y,{cursor:p.coords,onMouseLeave:f,media:{main:e?i().createElement(o.Box,{ref:c.container,onMouseMove:h},i().createElement(Ie,{target:e,labels:u.labels,toggle:w})):void 0,mini:e?i().createElement(Ie,{target:e,labels:u.labels}):void 0},size:x,loadState:"loaded"})}),e&&x?i().createElement(o.Box,{style:{overflow:"scroll",height:0}},i().createElement(Re,{ref:c.downloadable,style:{display:"inline-block",padding:20}},i().createElement(Ie,{target:e,labels:u.labels}),r?i().createElement(ae,{data:r}):null)):void 0)},De={states:[],urls:[],type:"image",message:"",config:{image:[],regions:[]},labels:{image:{},polygons:[],masks:[],boxes:[]},action:"",preload:[],maxCanvasSize:512,maxViewHeight:512,idx:0,viewState:"labeling",indexState:{rows:[],columns:[],rowsPerPage:5,rowCount:0,sortModel:[],page:1},buttons:{next:!0,prev:!0,save:!0,config:!0,delete:!0,ignore:!0,unignore:!0},base:{serverRoot:"",url:""},progress:-1,mode:"light"},Ae=({extract:e})=>{var t,a;const{setToast:n}=i().useContext(s),l=e("config"),r=e("states"),c=e("urls"),d=e("type"),u=e("labels"),m=e("action"),g=e("progress"),p=e("mode"),v=e("buttons"),b=e("preload"),h=e("maxCanvasSize"),f=e("viewState"),y=e("indexState"),w=e("idx"),x=e("message");i().useEffect((()=>{""!==x.value&&(n(x.value),x.set(""))}),[x.value,n]);const E={config:{image:(null===(t=l.value)||void 0===t?void 0:t.image)||[],regions:(null===(a=l.value)||void 0===a?void 0:a.regions)||[]},preload:b.value,options:{progress:g.value,maxCanvasSize:h.value,showNavigation:!0},callbacks:{onSave:v.value.save?e=>{u.set(e),m.set("save")}:void 0,onSaveConfig:v.value.config?l.set:void 0,onNext:v.value.next?()=>m.set("next"):void 0,onPrev:v.value.prev?()=>m.set("prev"):void 0,onDelete:v.value.delete?()=>m.set("delete"):void 0,onIgnore:v.value.ignore?()=>m.set("ignore"):void 0,onUnignore:v.value.unignore?()=>m.set("unignore"):void 0,onShowIndex:()=>m.set("index")}};return i().createElement(o.ThemeProvider,{theme:(0,o.createTheme)({palette:{mode:p.value||"light"}})},i().createElement(o.ScopedCssBaseline,null,i().createElement(o.Box,{style:{padding:16}},i().createElement(o.Box,{hidden:"index"!==f.value},i().createElement(je,{indexState:y.value,setIndexState:e=>{y.set(e),m.set("index")},visible:"index"===f.value,rowKey:"qslId",idx:w.value,label:e=>{w.set(e),m.set("label")}})),0===r.value.length||"index"===f.value?null:1==r.value.length?"image"===d.value?i().createElement(pe,Object.assign({},E,{labels:u.value||{},target:"transitioning"===f.value?void 0:c.value[0],metadata:"transitioning"===f.value?{}:r.value[0].metadata})):"video"===d.value?i().createElement(he,Object.assign({},E,{labels:Array.isArray(u.value)?u.value:[],target:c.value[0],metadata:"transitioning"===f.value?{}:r.value[0].metadata})):"time-series"==d.value?i().createElement(Pe,Object.assign({},E,{labels:u.value||{},target:"transitioning"===f.value?void 0:c.value[0],metadata:"transitioning"===f.value?{}:r.value[0].metadata})):null:i().createElement(ye,Object.assign({},E,{labels:u.value||{},target:c.value,states:"transitioning"===f.value?[]:r.value,setStates:e=>r.set(e)})))))},Te=e=>i().createElement(Ee,{maxViewHeight:e.extract("maxViewHeight").value},i().createElement(Ae,Object.assign({},e)))},46718:(e,t,a)=>{"use strict";a.d(t,{p:()=>g,N:()=>p});var n=a(56271),i=a.n(n),o=a(14456),l=a.n(o),s=a(97697),r=a(82565);const c=(e,t,a,n)=>{i().useEffect((()=>{const n=t=>e&&a(e,t);return null==e||e.on(t,n),()=>{null==e||e.unbind(t,n)}}),(n||[]).concat([e]))};var d=a(91400),u=a(18657);const m=({model:e})=>{const t=(e=>t=>((e,t)=>{const[a,n]=i().useState(null==t?void 0:t.get(e));return c(t,`change:${e}`,(t=>{n(t.get(e))}),[e]),{value:a,set:function(a,n){null==t||t.set(e,a,n),null==t||t.save_changes()}}})(t,e))(e),a=t("base");return i().useEffect((()=>{a.set({serverRoot:s.PageConfig.getOption("serverRoot"),url:s.PageConfig.getBaseUrl()})})),i().createElement(d.f,{extract:t})};class g extends r.DOMWidgetModel{defaults(){return Object.assign(Object.assign(Object.assign({},super.defaults()),{_model_name:g.model_name,_model_module:g.model_module,_model_module_version:g.model_module_version,_view_name:g.view_name,_view_module:g.view_module,_view_module_version:g.view_module_version}),d.U)}}g.serializers=Object.assign({},r.DOMWidgetModel.serializers),g.model_name="MediaLabelerModel",g.model_module=u.o,g.model_module_version=u.Y,g.view_name="MediaLabelerView",g.view_module=u.o,g.view_module_version=u.Y;class p extends r.DOMWidgetView{render(){this.el.classList.add("qsl-image-labeler-widget");const e=i().createElement(m,{model:this.model});l().render(e,this.el)}}},18657:(e,t,a)=>{"use strict";a.d(t,{Y:()=>i,o:()=>o});const n=a(4147),i=n.version,o=n.name},95318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},50594:(e,t,a)=>{"use strict";var n=a(95318);t.Z=void 0;var i=n(a(64938)),o=a(85893),l=(0,i.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.Z=l},64938:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n.createSvgIcon}});var n=a(54040)},35893:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(49064).Z},57144:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(87596).Z},54040:(e,t,a)=>{"use strict";a.r(t),a.d(t,{capitalize:()=>i.Z,createChainedFunction:()=>o.Z,createSvgIcon:()=>l.Z,debounce:()=>s.Z,deprecatedPropType:()=>r,isMuiElement:()=>c.Z,ownerDocument:()=>d.Z,ownerWindow:()=>u.Z,requirePropFactory:()=>m,setRef:()=>g,unstable_ClassNameGenerator:()=>x,unstable_useEnhancedEffect:()=>p.Z,unstable_useId:()=>v.Z,unsupportedProp:()=>b,useControlled:()=>h.Z,useEventCallback:()=>f.Z,useForkRef:()=>y.Z,useIsFocusVisible:()=>w.Z});var n=a(88076),i=a(98216),o=a(35893),l=a(82066),s=a(57144);const r=function(e,t){return()=>null};var c=a(77795),d=a(8038),u=a(5340);a(22122);const m=function(e,t){return()=>null},g=a(7960).Z;var p=a(58974),v=a(27909);const b=function(e,t,a,n,i){return null};var h=a(49299),f=a(2068),y=a(51705),w=a(79674);const x={configure:e=>{console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),n.Z.configure(e)}}},77795:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(56271);const i=function(e,t){return n.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},8038:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(57094).Z},5340:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(58290).Z},49299:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(8925).Z},58974:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(16600).Z},2068:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(73633).Z},51705:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(30067).Z},27909:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(57579).Z},79674:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});const n=a(99962).Z},49064:(e,t,a)=>{"use strict";function n(...e){return e.reduce(((e,t)=>null==t?e:function(...a){e.apply(this,a),t.apply(this,a)}),(()=>{}))}a.d(t,{Z:()=>n})},87596:(e,t,a)=>{"use strict";function n(e,t=166){let a;function n(...n){clearTimeout(a),a=setTimeout((()=>{e.apply(this,n)}),t)}return n.clear=()=>{clearTimeout(a)},n}a.d(t,{Z:()=>n})},57094:(e,t,a)=>{"use strict";function n(e){return e&&e.ownerDocument||document}a.d(t,{Z:()=>n})},58290:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(57094);function i(e){return(0,n.Z)(e).defaultView||window}},7960:(e,t,a)=>{"use strict";function n(e,t){"function"==typeof e?e(t):e&&(e.current=t)}a.d(t,{Z:()=>n})},8925:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(56271);function i({controlled:e,default:t,name:a,state:i="value"}){const{current:o}=n.useRef(void 0!==e),[l,s]=n.useState(t);return[o?e:l,n.useCallback((e=>{o||s(e)}),[])]}},16600:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var n=a(56271);const i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect},73633:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(56271),i=a(16600);function o(e){const t=n.useRef(e);return(0,i.Z)((()=>{t.current=e})),n.useCallback(((...e)=>(0,t.current)(...e)),[])}},30067:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(56271),i=a(7960);function o(e,t){return n.useMemo((()=>null==e&&null==t?null:a=>{(0,i.Z)(e,a),(0,i.Z)(t,a)}),[e,t])}},57579:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(56271);let i=0;const o=n.useId;function l(e){if(void 0!==o){const t=o();return null!=e?e:t}return function(e){const[t,a]=n.useState(e),o=e||t;return n.useEffect((()=>{null==t&&(i+=1,a(`mui-${i}`))}),[t]),o}(e)}},99962:(e,t,a)=>{"use strict";a.d(t,{Z:()=>u});var n=a(56271);let i,o=!0,l=!1;const s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function r(e){e.metaKey||e.altKey||e.ctrlKey||(o=!0)}function c(){o=!1}function d(){"hidden"===this.visibilityState&&l&&(o=!0)}function u(){const e=n.useCallback((e=>{var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",r,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",d,!0))}),[]),t=n.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!function(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch(e){}return o||function(e){const{type:t,tagName:a}=e;return!("INPUT"!==a||!s[t]||e.readOnly)||"TEXTAREA"===a&&!e.readOnly||!!e.isContentEditable}(t)}(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(l=!0,window.clearTimeout(i),i=window.setTimeout((()=>{l=!1}),100),t.current=!1,!0)},ref:e}}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"qslwidgets","version":"0.0.38","description":"Widgets for the QSL image labeling package.","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/faustomorales/qsl","bugs":{"url":"https://github.com/faustomorales/qsl/issues"},"license":"MIT","author":{"name":"Fausto Morales","email":"fausto@robinbay.com"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/faustomorales/qsl"},"scripts":{"build":"tsc && webpack --env production","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:build":"parallel-webpack --watch","clean":"rimraf ../qsl/ui/eelapp && rimraf ../qsl/ui/nbextension/index.js* ../qsl/ui/labextension","format":"prettier --write src","test":"jest","storybook":"start-storybook -p 6006"},"dependencies":{"@emotion/react":"^11.8.1","@emotion/styled":"^11.8.1","@jupyter-widgets/base":"^1.1.10 || ^2.0.0 || ^3.0.0 || ^4.0.0","@mui/icons-material":"^5.6.1","@mui/material":"^5.6.1","@mui/x-data-grid":"^5.11.0","@use-gesture/react":"^10.2.15","file-saver":"^2.0.5","html2canvas":"^1.4.1","lodash.clonedeep":"^4.5.0","lodash.debounce":"^4.0.8","react":"^17.0.2","react-dom":"^17.0.2","react-highlight":"^0.14.0","recharts":"^2.1.10","svelte":"^3.48.0","svelte-adapter":"^0.5.0"},"devDependencies":{"@babel/core":"^7.14.5","@babel/preset-env":"^7.14.5","@babel/preset-react":"^7.14.5","@babel/preset-typescript":"^7.14.5","@jupyterlab/builder":"^3.0.0","@phosphor/application":"^1.6.0","@phosphor/widgets":"^1.6.0","@storybook/addon-actions":"^6.5.9","@storybook/addon-essentials":"^6.5.9","@storybook/addon-interactions":"^6.5.9","@storybook/addon-links":"^6.5.9","@storybook/builder-webpack5":"^6.5.9","@storybook/manager-webpack5":"^6.5.9","@storybook/react":"^6.5.9","@storybook/testing-library":"^0.0.13","@types/file-saver":"^2.0.5","@types/jest":"^26.0.0","@types/lodash.clonedeep":"^4.5.7","@types/lodash.debounce":"^4.0.7","@types/react":"^17.0.11","@types/react-dom":"^17.0.8","@types/react-highlight":"^0.12.5","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.6.0","@typescript-eslint/parser":"^3.6.0","acorn":"^7.2.0","babel-loader":"^8.2.2","copyfiles":"^2.4.1","css-loader":"^6.7.1","eslint":"^7.4.0","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","html-webpack-plugin":"^5.5.0","identity-obj-proxy":"^3.0.0","jest":"^26.0.0","mkdirp":"^0.5.1","nodemon":"^2.0.16","npm-run-all":"^4.1.3","parallel-webpack":"^2.6.0","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^1.1.3","svelte-loader":"^3.1.3","svelte-preprocess":"^4.10.7","ts-jest":"^26.0.0","ts-loader":"^8.0.0","typescript":"~4.1.3","webpack":"^5.0.0","webpack-cli":"^4.0.0","webpack-merge":"^5.8.0"},"babel":{"presets":["@babel/preset-env","@babel/preset-react","@babel/preset-typescript"]},"jupyterlab":{"extension":"lib/plugin","outputDir":"../qsl/ui/labextension/","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);
Metadata-Version: 2.1
Name: dj_queue_health
Version: 1.0.0
Summary: django app for checking queue health. Targeted to be used for Kubernetes deployments
Home-page: https://github.com/yezz123/dj-queue-health
Author: Yasser Tahiri
Author-email: yasserth19@gmail.com
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Information Technology
Classifier: Natural Language :: English
Classifier: Framework :: Django
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3 :: Only
Classifier: Topic :: Internet :: WWW/HTTP :: Session
Classifier: Topic :: Internet :: WWW/HTTP :: HTTP Servers
Classifier: Topic :: Utilities
Classifier: Typing :: Typed
Requires-Dist: Django
Requires-Dist: django_rq
Requires-Dist: celery
Requires-Dist: pre-commit==2.19.0 ; extra == "dev"
Requires-Dist: pytest ; extra == "dev"
Requires-Dist: pytest-django ; extra == "dev"
Provides-Extra: dev

# dj-queue-health  - [![framework](https://img.shields.io/badge/Framework-Django-green?style)](https://www.djangoproject.com/)

Simple django app for checking queue health. Targeted to be used for Kubernetes deployments to periodically schedule `update_queue_timestamp` and set timestamp and verified by `test_queue_health` as a probe to verify if worker works and is not stacked.

## Installation

- Using pip:

```bash
pip install dj-queue-health
```

## Usage

- Add `dj_queue_health` to your INSTALLED_APPS setting like this:

```python
INSTALLED_APPS = [
...,
"dj_queue_health",
]
```

- Add variable `django_queue_health` to your settings like this:

```python
# Minutes django_queue_health to check if there is queue log and if queue is running
django_queue_health = 10
```

- Configure default [django cache](https://docs.djangoproject.com/en/4.0/topics/cache/).
- Queue Health use [django rq](https://github.com/rq/django-rq) or [celery](https://docs.celeryproject.org/en/stable/django/first-steps-with-django.html).
- Use commands:

```bash

# Push job to queue that updates the timestamp

python manage.py update_queue_timestamp

# Check if timestamp in cache less than django_queue_health

python manage.py test_queue_health
```


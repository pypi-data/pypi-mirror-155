{"version":3,"file":"podcast-form.js","sources":["../../../../static_src/admin/js/podcast-form.js"],"sourcesContent":["import $ from 'jquery';\n\nconst debounce = (callback, wait) => {\n  let timeoutId = null;\n\n  return (...args) => {\n    window.clearTimeout(timeoutId);\n    timeoutId = window.setTimeout(() => {\n      callback(...args);\n    }, wait);\n  };\n};\n\n/**\n * Format the time from seconds to HH:MM:SS.\n * @param {Number} seconds\n * @return {String}\n */\nconst formatDuration = (seconds) => {\n  return new Date(1000 * seconds).toISOString().substr(11, 8);\n};\n\n$(function () {\n  const fileInput = document.querySelector('input#id_sound_file');\n  const urlInput = document.querySelector('input#id_sound_url');\n  const durationInput = document.querySelector('input#id_duration');\n  const isValidInput = document.querySelector('input#id_is_sound_valid');\n\n  // Create a new Audio object with the current sound_url value or the sound\n  // file to validate it and set the duration value with the audio duration\n  const retrieve = debounce((src) => {\n    isValidInput.value = '0';\n\n    if (!urlInput.value && !fileInput.value) {\n      durationInput.value = '';\n      return;\n    }\n\n    const audio = new Audio();\n    audio.preload = 'metadata';\n\n    audio.addEventListener('error', () => {\n      durationInput.value = '';\n    });\n    audio.addEventListener('loadedmetadata', () => {\n      isValidInput.value = '1';\n      durationInput.value =\n        audio.duration === Infinity ? '' : formatDuration(audio.duration);\n    });\n\n    audio.src = src;\n  }, 500);\n\n  urlInput.addEventListener('input', () => {\n    retrieve(urlInput.value);\n  });\n  fileInput.addEventListener('input', () => {\n    const tmpUrl = URL.createObjectURL(fileInput.files[0]);\n    retrieve(tmpUrl);\n  });\n\n  // Check the current sound URL on page load\n  retrieve();\n});\n"],"names":["callback","wait","timeoutId","fileInput","document","querySelector","urlInput","durationInput","isValidInput","retrieve","src","value","audio","Audio","preload","addEventListener","seconds","duration","Infinity","Date","toISOString","substr","args","window","clearTimeout","setTimeout","tmpUrl","URL","createObjectURL","files"],"mappings":"gHAsBE,eApBgBA,EAAUC,EACtBC,EAoBEC,EAAYC,SAASC,cAAc,uBACnCC,EAAWF,SAASC,cAAc,sBAClCE,EAAgBH,SAASC,cAAc,qBACvCG,EAAeJ,SAASC,cAAc,2BAItCI,GA5BUT,EA4BU,SAACU,MACzBF,EAAaG,MAAQ,IAEhBL,EAASK,OAAUR,EAAUQ,WAK5BC,EAAQ,IAAIC,MAClBD,EAAME,QAAU,WAEhBF,EAAMG,iBAAiB,SAAS,WAC9BR,EAAcI,MAAQ,MAExBC,EAAMG,iBAAiB,kBAAkB,WA1BtB,IAACC,EA2BlBR,EAAaG,MAAQ,IACrBJ,EAAcI,MACZC,EAAMK,WAAaC,EAAAA,EAAW,IA7BdF,EA6BkCJ,EAAMK,SA5BvD,IAAIE,KAAK,IAAOH,GAASI,cAAcC,OAAO,GAAI,OA+BvDT,EAAMF,IAAMA,OAhBVH,EAAcI,MAAQ,IAhCAV,EAiDvB,IAhDCC,EAAY,KAET,sCAAIoB,2BAAAA,kBACTC,OAAOC,aAAatB,GACpBA,EAAYqB,OAAOE,YAAW,WAC5BzB,eAAYsB,KACXrB,KA4CLK,EAASS,iBAAiB,SAAS,WACjCN,EAASH,EAASK,UAEpBR,EAAUY,iBAAiB,SAAS,eAC5BW,EAASC,IAAIC,gBAAgBzB,EAAU0B,MAAM,IACnDpB,EAASiB,MAIXjB"}
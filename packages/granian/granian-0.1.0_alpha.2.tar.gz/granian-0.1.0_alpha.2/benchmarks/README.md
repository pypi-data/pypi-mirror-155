# Granian benchmarks

Run at: 2022-06-14T21:50:54.594368

CPUs: 4

## RSGI response types

| Type | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| bytes small (c256) | 1418687 | 94555 | 3.298ms | 134.24ms |
| str small (c256) | 1416653 | 93810 | 3.868ms | 135.586ms |
| bytes big (c256) | 31233 | 2074 | 129.681ms | 326.724ms |
| str big (c128) | 636770 | 42200 | 9.615ms | 250.426ms |

## RSGI vs ASGI

| Request | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| RSGI bytes (c256) | 1446467 | 95782 | 3.736ms | 133.38ms |
| RSGI str (c128) | 1217903 | 80657 | 2.197ms | 126.513ms |
| ASGI bytes (c256) | 964485 | 64287 | 5.03ms | 145.27ms |
| ASGI str (c128) | 956461 | 63343 | 3.581ms | 249.988ms |

## vs Uvicorn

| Mode | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- |
| Granian ASGI (c256) | 851934 | 56730 | 5.862ms | 141.864ms |
| Granian RSGI (c256) | 1454359 | 96311 | 3.503ms | 135.185ms |
| Uvicorn H11 (c256) | 294654 | 19576 | 13.139ms | 94.437ms |
| Uvicorn http-tools (c256) | 1065052 | 70977 | 3.714ms | 30.086ms |

## Threading

### ASGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c32)  | 1 | 1 | 230796 | 15374 | 2.066ms | 6.376ms |
| workers (c32)  | 1 | 1 | 234498 | 15615 | 2.03ms | 5.466ms |
| runtime (c256) | 1 | 2 | 235913 | 15715 | 16.253ms | 36.101ms |
| workers (c256) | 1 | 2 | 235246 | 15661 | 16.303ms | 41.055ms |
| runtime (c256) | 1 | 4 | 264367 | 17603 | 14.549ms | 48.145ms |
| workers (c256) | 1 | 4 | 264381 | 17608 | 14.595ms | 42.932ms |
| runtime (c256) | 1 | 5 | 282208 | 18795 | 13.668ms | 50.757ms |
| workers (c256) | 1 | 5 | 271450 | 18069 | 14.312ms | 54.474ms |
| runtime (c256) | 1 | 8 | 288278 | 19191 | 13.467ms | 52.833ms |
| workers (c256) | 1 | 8 | 273985 | 18136 | 14.501ms | 71.604ms |
| runtime (c128) | 2 | 1 | 308073 | 20516 | 6.221ms | 17.749ms |
| workers (c128) | 2 | 1 | 307277 | 20338 | 6.236ms | 21.586ms |
| runtime (c256) | 2 | 2 | 349298 | 23263 | 11.014ms | 41.908ms |
| workers (c128) | 2 | 2 | 350642 | 23356 | 5.579ms | 25.473ms |
| runtime (c128) | 2 | 4 | 393836 | 26231 | 4.868ms | 16.111ms |
| workers (c256) | 2 | 4 | 395089 | 26161 | 10.441ms | 67.685ms |
| runtime (c256) | 2 | 5 | 406491 | 27076 | 9.478ms | 34.393ms |
| workers (c256) | 2 | 5 | 387819 | 25678 | 10.888ms | 67.538ms |
| runtime (c256) | 2 | 8 | 419135 | 27914 | 9.25ms | 37.848ms |
| workers (c256) | 2 | 8 | 390388 | 26013 | 10.859ms | 68.537ms |
| runtime (c256) | 4 | 1 | 851255 | 56702 | 4.805ms | 48.699ms |
| workers (c256) | 4 | 1 | 864278 | 57563 | 4.786ms | 37.149ms |
| runtime (c256) | 4 | 2 | 983635 | 65537 | 4.759ms | 153.727ms |
| workers (c256) | 4 | 2 | 806073 | 53378 | 21.105ms | 143.205ms |
| runtime (c256) | 4 | 4 | 963691 | 63799 | 4.288ms | 143.918ms |
| workers (c256) | 4 | 4 | 785073 | 52297 | 14.876ms | 138.353ms |
| runtime (c256) | 4 | 5 | 871446 | 57693 | 4.536ms | 133.684ms |
| workers (c256) | 4 | 5 | 920652 | 60967 | 21.449ms | 181.449ms |
| runtime (c128) | 4 | 8 | 745051 | 49340 | 2.65ms | 31.082ms |
| workers (c64)  | 4 | 8 | 665624 | 44079 | 13.16ms | 250.317ms |
| runtime (c256) | 5 | 1 | 679619 | 45271 | 8.507ms | 130.538ms |
| workers (c256) | 5 | 1 | 716051 | 47714 | 8.346ms | 128.324ms |
| runtime (c256) | 5 | 2 | 896095 | 59718 | 10.38ms | 259.287ms |
| workers (c256) | 5 | 2 | 818705 | 54216 | 24.925ms | 377.944ms |
| runtime (c256) | 5 | 4 | 797970 | 52954 | 10.96ms | 252.1ms |
| workers (c256) | 5 | 4 | 790757 | 52364 | 13.788ms | 140.872ms |
| runtime (c256) | 5 | 5 | 886880 | 59047 | 4.324ms | 133.127ms |
| workers (c256) | 5 | 5 | 719889 | 47672 | 14.878ms | 152.776ms |
| runtime (c256) | 5 | 8 | 785735 | 52285 | 8.354ms | 149.15ms |
| workers (c256) | 5 | 8 | 697994 | 46218 | 16.069ms | 251.29ms |

### RSGI

| Threading mode | Procs | Threads | Total requests | RPS | avg latency | max latency |
| --- | --- | --- | --- | --- | --- | --- |
| runtime (c256) | 1 | 1 | 349520 | 23283 | 10.972ms | 23.487ms |
| workers (c64)  | 1 | 1 | 362849 | 24171 | 2.63ms | 6.89ms |
| runtime (c256) | 1 | 2 | 355090 | 23650 | 10.791ms | 29.376ms |
| workers (c256) | 1 | 2 | 360320 | 23993 | 10.629ms | 26.279ms |
| runtime (c256) | 1 | 4 | 407575 | 26983 | 9.461ms | 31.546ms |
| workers (c256) | 1 | 4 | 407748 | 27163 | 9.49ms | 43.677ms |
| runtime (c256) | 1 | 5 | 449719 | 29958 | 8.609ms | 38.167ms |
| workers (c256) | 1 | 5 | 463481 | 30686 | 8.501ms | 40.309ms |
| runtime (c256) | 1 | 8 | 493670 | 32885 | 7.889ms | 34.744ms |
| workers (c256) | 1 | 8 | 492354 | 32793 | 8.1ms | 56.86ms |
| runtime (c128) | 2 | 1 | 558906 | 36994 | 3.443ms | 11.093ms |
| workers (c256) | 2 | 1 | 570885 | 38009 | 6.681ms | 15.82ms |
| runtime (c256) | 2 | 2 | 928651 | 61860 | 4.113ms | 17.977ms |
| workers (c256) | 2 | 2 | 882285 | 58793 | 4.628ms | 34.902ms |
| runtime (c256) | 2 | 4 | 1032853 | 68821 | 3.687ms | 15.269ms |
| workers (c256) | 2 | 4 | 968276 | 64114 | 4.363ms | 48.802ms |
| runtime (c256) | 2 | 5 | 1037423 | 69043 | 3.707ms | 23.272ms |
| workers (c256) | 2 | 5 | 955117 | 63249 | 4.466ms | 54.329ms |
| runtime (c256) | 2 | 8 | 1052864 | 70001 | 3.512ms | 27.905ms |
| workers (c256) | 2 | 8 | 935810 | 61969 | 4.859ms | 73.0ms |
| runtime (c256) | 4 | 1 | 1216980 | 80585 | 3.917ms | 36.786ms |
| workers (c256) | 4 | 1 | 1340324 | 89323 | 3.437ms | 27.387ms |
| runtime (c256) | 4 | 2 | 1428873 | 94610 | 3.632ms | 129.666ms |
| workers (c256) | 4 | 2 | 1343703 | 88956 | 6.473ms | 137.185ms |
| runtime (c256) | 4 | 4 | 1297570 | 86359 | 3.774ms | 126.712ms |
| workers (c256) | 4 | 4 | 1252604 | 83463 | 6.778ms | 130.417ms |
| runtime (c256) | 4 | 5 | 1218597 | 80976 | 5.016ms | 134.389ms |
| workers (c256) | 4 | 5 | 1229877 | 81662 | 4.595ms | 133.225ms |
| runtime (c256) | 4 | 8 | 1194462 | 79077 | 4.163ms | 107.028ms |
| workers (c256) | 4 | 8 | 1224233 | 81062 | 5.443ms | 197.473ms |
| runtime (c256) | 5 | 1 | 1098419 | 72734 | 5.358ms | 88.748ms |
| workers (c256) | 5 | 1 | 1224119 | 81046 | 4.753ms | 94.965ms |
| runtime (c256) | 5 | 2 | 1229296 | 81541 | 13.877ms | 250.972ms |
| workers (c256) | 5 | 2 | 1175307 | 77816 | 15.124ms | 377.891ms |
| runtime (c256) | 5 | 4 | 1164606 | 77155 | 8.482ms | 138.174ms |
| workers (c128) | 5 | 4 | 1089064 | 72125 | 1.933ms | 68.833ms |
| runtime (c128) | 5 | 5 | 1036705 | 68688 | 9.447ms | 146.162ms |
| workers (c256) | 5 | 5 | 1097484 | 73149 | 4.616ms | 91.084ms |
| runtime (c128) | 5 | 8 | 1103845 | 73084 | 2.183ms | 38.25ms |
| workers (c256) | 5 | 8 | 1149877 | 76151 | 17.864ms | 254.572ms |

{"version":3,"file":"chunks/app_views_eventsV2_index_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"6hBAgBA,SAASA,EAAT,GAAsE,IAA3C,aAACC,EAAD,SAAeC,EAAf,SAAyBC,GAAkB,EACpE,MAAMC,GAAuBC,EAAAA,EAAAA,QAAO,IA2BpC,OAzBAC,EAAAA,EAAAA,YAEE,WACMH,EAASI,WAAaH,EAAqBI,UAC7CJ,EAAqBI,QAAUL,EAASI,SACxCE,EAAAA,eAAAA,KAAoB,CAClBF,SAAUJ,EAASI,SACnBG,MAAO,IACFP,EAASO,MACZC,kBAAcC,QAKtB,CAACT,KAYD,QAAC,IAAD,CACEU,SAAU,CAAC,kBACXZ,aAAcA,EACda,SAAS,kCACTC,eAbJ,WACE,OACE,QAAC,KAAD,WACE,QAAC,IAAD,CAAOC,KAAK,UAAZ,UAAuBC,EAAAA,EAAAA,GAAE,8CAM7B,SAMGf,IAnCEF,EAAAA,YAAAA,oBAwCT,SAAekB,EAAAA,EAAAA,GAAiBlB","sources":["webpack:///./app/views/eventsV2/index.tsx"],"sourcesContent":["import {useEffect, useRef} from 'react';\nimport {browserHistory} from 'react-router';\n\nimport Feature from 'sentry/components/acl/feature';\nimport Alert from 'sentry/components/alert';\nimport {t} from 'sentry/locale';\nimport {PageContent} from 'sentry/styles/organization';\nimport {Organization} from 'sentry/types';\nimport withOrganization from 'sentry/utils/withOrganization';\n\ntype Props = {\n  children: React.ReactChildren;\n  location: any;\n  organization: Organization;\n};\n\nfunction DiscoverContainer({organization, children, location}: Props) {\n  const prevLocationPathname = useRef('');\n\n  useEffect(\n    // when new discover page loads, query is pristine\n    function () {\n      if (location.pathname !== prevLocationPathname.current) {\n        prevLocationPathname.current = location.pathname;\n        browserHistory.push({\n          pathname: location.pathname,\n          query: {\n            ...location.query,\n            userModified: undefined,\n          },\n        });\n      }\n    },\n    [location]\n  );\n\n  function renderNoAccess() {\n    return (\n      <PageContent>\n        <Alert type=\"warning\">{t(\"You don't have access to this feature\")}</Alert>\n      </PageContent>\n    );\n  }\n\n  return (\n    <Feature\n      features={['discover-basic']}\n      organization={organization}\n      hookName=\"feature-disabled:discover2-page\"\n      renderDisabled={renderNoAccess}\n    >\n      {children}\n    </Feature>\n  );\n}\n\nexport default withOrganization(DiscoverContainer);\n"],"names":["DiscoverContainer","organization","children","location","prevLocationPathname","useRef","useEffect","pathname","current","browserHistory","query","userModified","undefined","features","hookName","renderDisabled","type","t","withOrganization"],"sourceRoot":""}
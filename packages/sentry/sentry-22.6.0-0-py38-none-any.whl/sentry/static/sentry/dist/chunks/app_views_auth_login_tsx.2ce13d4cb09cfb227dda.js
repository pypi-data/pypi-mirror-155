"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_auth_login_tsx"],{"./app/views/auth/login.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>E,formFooterClass:()=>U});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/components/loadingError.tsx"),a=s("./app/components/loadingIndicator.tsx"),l=s("./app/components/navTabs.tsx"),d=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),c=s("./app/utils/withApi.tsx"),h=s("../node_modules/react-router/es/index.js"),u=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),m=s("./app/components/button.tsx"),g=s("./app/components/deprecatedforms/form.tsx"),b=s("./app/components/deprecatedforms/passwordField.tsx"),Z=s("./app/components/deprecatedforms/textField.tsx"),f=s("./app/components/links/link.tsx"),x=s("./app/icons/index.tsx"),v=s("./app/stores/configStore.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const S=e=>{let{vstsLoginLink:t,githubLoginLink:s,googleLoginLink:r}=e;return(0,y.BX)(k,{children:[(0,y.tZ)(_,{children:(0,d.t)("External Account Login")}),r&&(0,y.tZ)(m.ZP,{align:"left",size:"small",icon:(0,y.tZ)(x.vY,{size:"xs"}),href:r,children:(0,d.t)("Sign in with Google")}),s&&(0,y.tZ)(m.ZP,{align:"left",size:"small",icon:(0,y.tZ)(x.Uv,{size:"xs"}),href:s,children:(0,d.t)("Sign in with GitHub")}),t&&(0,y.tZ)(m.ZP,{align:"left",size:"small",icon:(0,y.tZ)(x.mT,{size:"xs"}),href:t,children:(0,d.t)("Sign in with Azure DevOps")})]})};S.displayName="LoginProviders";class L extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null,errors:{}}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{try{const s=await this.props.api.requestPromise("/auth/login/",{method:"POST",data:e});t(e),v.Z.set("user",s.user),h.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{errorMessage:e,errors:t}=this.state,{githubLoginLink:s,vstsLoginLink:r}=this.props.authConfig,o=!(!s&&!r);return(0,y.tZ)(u.ms,{children:n=>{let{css:i}=n;return(0,y.BX)(w,{hasLoginProvider:o,children:[(0,y.BX)(g.Z,{submitLabel:(0,d.t)("Continue"),onSubmit:this.handleSubmit,footerClass:i`
                ${U}
              `,errorMessage:e,extraButton:(0,y.tZ)(N,{to:"/account/recover/",children:(0,d.t)("Lost your password?")}),children:[(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,d.t)("username or email"),label:(0,d.t)("Account"),error:t.username,required:!0}),(0,y.tZ)(b.Z,{name:"password",placeholder:(0,d.t)("password"),label:(0,d.t)("Password"),error:t.password,required:!0})]}),o&&(0,y.tZ)(S,{vstsLoginLink:r,githubLoginLink:s})]})}})}}L.displayName="LoginForm";const w=(0,o.Z)("div",{target:"e1f436793"})("display:grid;gap:60px;grid-template-columns:",(e=>e.hasLoginProvider?"1fr 0.8fr":"1fr"),";"),_=(0,o.Z)("div",{target:"e1f436792"})({name:"1u5acre",styles:"margin:0;font-size:15px;font-weight:bold;line-height:24px"}),k=(0,o.Z)("div",{target:"e1f436791"})("position:relative;display:grid;grid-auto-rows:max-content;gap:",(0,p.Z)(1.5),";&:before{position:absolute;display:block;content:'';top:0;bottom:0;left:-30px;border-left:1px solid ",(e=>e.theme.border),";}"),N=(0,o.Z)(f.Z,{target:"e1f436790"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),C=L;var P=s("./app/components/deprecatedforms/radioBooleanField.tsx"),O=s("./app/components/links/externalLink.tsx");const q=()=>(0,y.tZ)(P.Z,{name:"subscribe",yesLabel:(0,d.t)("Yes, I would like to receive updates via email"),noLabel:(0,d.t)("No, I'd prefer not to receive these updates"),help:(0,d._N)("We'd love to keep you updated via email with product and feature\n           announcements, promotions, educational materials, and events. Our\n           updates focus on relevant information, and we'll never sell your data\n           to third parties. See our [link] for more details.",{link:(0,y.tZ)("a",{href:"https://sentry.io/privacy/",children:"Privacy Policy"})})});q.displayName="SubscribeField";class J extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null,errors:{}}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/register/",{method:"POST",data:e});t(e),v.Z.set("user",s.user),h.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON||!e.responseJSON.errors)return void s(e);let t=e.responseJSON.detail;e.responseJSON.errors.__all__&&(t=e.responseJSON.errors.__all__),this.setState({errorMessage:t,errors:e.responseJSON.errors||{}}),s(e)}}))}render(){const{hasNewsletter:e}=this.props.authConfig,{errorMessage:t,errors:s}=this.state;return(0,y.tZ)(u.ms,{children:r=>{let{css:o}=r;return(0,y.BX)(g.Z,{initialData:{subscribe:!0},submitLabel:(0,d.t)("Continue"),onSubmit:this.handleSubmit,footerClass:o`
              ${U}
            `,errorMessage:t,extraButton:(0,y.tZ)(M,{href:"https://sentry.io/privacy/",children:(0,d.t)("Privacy Policy")}),children:[(0,y.tZ)(Z.Z,{name:"name",placeholder:(0,d.t)("Jane Bloggs"),label:(0,d.t)("Name"),error:s.name,required:!0}),(0,y.tZ)(Z.Z,{name:"username",placeholder:(0,d.t)("you@example.com"),label:(0,d.t)("Email"),error:s.username,required:!0}),(0,y.tZ)(b.Z,{name:"password",placeholder:(0,d.t)("something super secret"),label:(0,d.t)("Password"),error:s.password,required:!0}),e&&(0,y.tZ)(q,{})]})}})}}J.displayName="RegisterForm";const M=(0,o.Z)(O.Z,{target:"e138ohel0"})("color:",(e=>e.theme.gray300),";&:hover{color:",(e=>e.theme.textColor),";}"),j=J;class T extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{errorMessage:null}),(0,r.Z)(this,"handleSubmit",(async(e,t,s)=>{const{api:r}=this.props;try{const s=await r.requestPromise("/auth/sso-locate/",{method:"POST",data:e});t(e),h.browserHistory.push({pathname:s.nextUri})}catch(e){if(!e.responseJSON)return void s(e);const t=e.responseJSON.detail;this.setState({errorMessage:t}),s(e)}}))}render(){const{serverHostname:e}=this.props.authConfig,{errorMessage:t}=this.state;return(0,y.tZ)(g.Z,{className:"form-stacked",submitLabel:(0,d.t)("Continue"),onSubmit:this.handleSubmit,footerClass:"auth-footer",errorMessage:t,children:(0,y.tZ)(Z.Z,{name:"organization",placeholder:"acme",label:(0,d.t)("Organization ID"),required:!0,help:(0,d._N)("Your ID is the slug after the hostname. e.g. [example] is [slug].",{slug:(0,y.tZ)("strong",{children:"acme"}),example:(0,y.tZ)(z,{slug:"acme",hostname:e})})})})}}T.displayName="SsoForm";const z=e=>{let{hostname:t,slug:s}=e;return(0,y.BX)("code",{children:[t,"/",(0,y.tZ)("strong",{children:s})]})};z.displayName="SlugExample";const B={login:C,register:j,sso:T};class D extends n.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{loading:!0,error:null,activeTab:"login",authConfig:null}),(0,r.Z)(this,"handleSetTab",((e,t)=>{this.setState({activeTab:e}),t.preventDefault()})),(0,r.Z)(this,"fetchData",(async()=>{const{api:e}=this.props;try{const t=await e.requestPromise("/auth/config/"),{vsts_login_link:s,github_login_link:r,google_login_link:o,...n}=t,i={...n,vstsLoginLink:s,githubLoginLink:r,googleLoginLink:o};this.setState({authConfig:i})}catch(e){this.setState({error:!0})}this.setState({loading:!1})}))}componentDidMount(){this.fetchData()}get hasAuthProviders(){if(null===this.state.authConfig)return!1;const{githubLoginLink:e,googleLoginLink:t,vstsLoginLink:s}=this.state.authConfig;return!!(e||s||t)}render(){const{api:e}=this.props,{loading:t,error:s,activeTab:r,authConfig:o}=this.state,i=B[r],l=[["login",(0,d.t)("Login")],["sso",(0,d.t)("Single Sign-On")],["register",(0,d.t)("Register"),!(null!=o&&o.canRegister)]];return(0,y.BX)(n.Fragment,{children:[(0,y.BX)(A,{children:[(0,y.tZ)(X,{children:(0,d.t)("Sign in to continue")}),(0,y.tZ)(H,{children:l.map((e=>{let[t,s,o]=e;return!o&&(0,y.tZ)("li",{className:r===t?"active":"",children:(0,y.tZ)("a",{href:"#",onClick:e=>this.handleSetTab(t,e),children:s})},t)}))})]}),t&&(0,y.tZ)(a.Z,{}),s&&(0,y.tZ)(F,{message:(0,d.t)("Unable to load authentication configuration"),onRetry:this.fetchData}),!t&&null!==o&&!s&&(0,y.tZ)(I,{hasAuthProviders:this.hasAuthProviders,children:(0,y.tZ)(i,{api:e,authConfig:o})})]})}}D.displayName="Login";const F=(0,o.Z)(i.Z,{target:"e1omfq4b4"})("margin:",(0,p.Z)(2),";"),A=(0,o.Z)("div",{target:"e1omfq4b3"})("border-bottom:1px solid ",(e=>e.theme.border),";padding:20px 40px 0;"),X=(0,o.Z)("h3",{target:"e1omfq4b2"})({name:"cqisp1",styles:"font-size:24px;margin:0 0 20px 0"}),H=(0,o.Z)(l.Z,{target:"e1omfq4b1"})({name:"ti75j2",styles:"margin:0"}),I=(0,o.Z)("div",{target:"e1omfq4b0"})("padding:35px;width:",(e=>e.hasAuthProviders?"600px":"490px"),";"),U=`\n  display: grid;\n  grid-template-columns: max-content 1fr;\n  gap: ${(0,p.Z)(1)};\n  align-items: center;\n  justify-items: end;\n  border-top: none;\n  margin-bottom: 0;\n  padding: 0;\n`,E=(0,c.Z)(D)}}]);
//# sourceMappingURL=../sourcemaps/app_views_auth_login_tsx.c380ecab3c1a211fdc5a7730fda7d7c9.js.map
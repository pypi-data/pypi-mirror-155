"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_forms_teamSelector_tsx"],{"./app/components/forms/teamSelector.tsx":(e,t,s)=>{s.d(t,{Z:()=>O});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/react/index.js")),i=s("../node_modules/lodash/debounce.js"),a=s.n(i),l=s("./app/actionCreators/projects.tsx"),r=s("./app/components/button.tsx"),d=s("./app/components/forms/selectControl.tsx"),c=s("./app/components/idBadge/index.tsx"),p=s("./app/components/tooltip.tsx"),u=s("./app/constants/index.tsx"),m=s("./app/icons/index.tsx"),g=s("./app/locale.tsx"),b=s("./app/styles/space.tsx"),h=s("./app/utils/isActiveSuperuser.tsx"),f=s("./app/utils/useApi.tsx"),x=s("./app/utils/useTeams.tsx"),y=s("./app/utils/withOrganization.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const j=(0,n.Z)("div",{target:"e1bme5454"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),v=(0,n.Z)(m.qO,{target:"e1bme5453"})("margin-left:",(0,b.Z)(.25),";margin-right:",(0,b.Z)(1),";color:",(e=>e.theme.gray400),";"),w={value:null,label:(0,Z.BX)(j,{children:[(0,Z.tZ)(v,{size:"20px"}),(0,g.t)("Unassigned")]}),searchKey:"unassigned",actor:null,disabled:!1},_={option:(e,t)=>({...e,svg:{color:t.isSelected&&t.theme.white}})},k={input:(e,t)=>({...e,display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center",gridGap:(0,b.Z)(1),":before":{backgroundColor:t.theme.backgroundSecondary,height:24,width:24,borderRadius:3,content:'""',display:"block"}}),placeholder:e=>({...e,paddingLeft:32})};function C(e){const{includeUnassigned:t,styles:s,...n}=e,{teamFilter:i,organization:r,project:b,multiple:y,value:j,useId:v,onChange:C}=e,O=(0,f.Z)(),{teams:T,fetching:A,onSearch:$}=(0,x.Z)(),D=(0,o.useRef)(null),K=e=>({value:v?e.id:e.slug,label:y?`#${e.slug}`:(0,Z.tZ)(c.Z,{team:e}),searchKey:e.slug,actor:{type:"team",id:e.id,name:e.slug}});function R(){if(!D.current)return;const e=D.current.select.inputRef;e&&e.blur()}function B(e){if(j===(v?e.id:e.slug))return K(e);const t=r.access.includes("project:write");return{...K(e),disabled:!0,label:(0,Z.tZ)(S,{children:(0,Z.tZ)(z,{children:(0,Z.tZ)(p.Z,{position:"left",title:(0,g.t)("%s is not a member of project",`#${e.slug}`),children:(0,Z.tZ)(c.Z,{team:e})})})}),trailingItems:(0,Z.tZ)(p.Z,{title:t?(0,g.t)("Add %s to project",`#${e.slug}`):(0,g.t)("You do not have permission to add team to project."),containerDisplayMode:"flex",children:(0,Z.tZ)(I,{type:"button",size:"zero",borderless:!0,disabled:!t,onClick:()=>async function(e){if(!b)return void R();const t=y?[...null!=j?j:[]]:{value:j};null==C||C(K(e));try{await(0,l.Oe)(O,r.slug,b.slug,e)}catch(e){null==C||C(t)}R()}(e),icon:(0,Z.tZ)(m.N_,{isCircled:!0}),"aria-label":(0,g.t)("Add %s to project",`#${e.slug}`)})}),trailingItemsSpanFullHeight:!0}}return(0,Z.tZ)(d.Z,{ref:D,options:function(){const e=(0,h.M)()?T:i?T.filter(i):T;if(b){const s=new Set(b.teams.map((e=>e.id))),n=e.filter((e=>s.has(e.id))),o=e.filter((e=>!s.has(e.id)));return[...n.map(K),...o.map(B),...t?[w]:[]]}return[...e.map(K),...t?[w]:[]]}(),onInputChange:a()((e=>{$(e)}),u.Dk),isOptionDisabled:e=>!!e.disabled,getOptionValue:e=>e.searchKey,styles:{...t?_:{},...y?{}:k,...null!=s?s:{}},isLoading:A,...n})}C.displayName="TeamSelector";const S=(0,n.Z)("div",{target:"e1bme5452"})({name:"1laz9o6",styles:"display:flex;justify-content:space-between;align-items:flex-end"}),z=(0,n.Z)("div",{target:"e1bme5451"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"}),I=(0,n.Z)(r.ZP,{target:"e1bme5450"})({name:"ozd7xs",styles:"flex-shrink:0"}),O=(0,y.Z)(C)}}]);
//# sourceMappingURL=../sourcemaps/app_components_forms_teamSelector_tsx.75a2b32154935961c7b0ad32769b58cb.js.map
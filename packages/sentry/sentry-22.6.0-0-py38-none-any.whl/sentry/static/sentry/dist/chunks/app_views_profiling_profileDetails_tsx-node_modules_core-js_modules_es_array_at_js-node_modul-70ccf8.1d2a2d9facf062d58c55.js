"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_views_profiling_profileDetails_tsx-node_modules_core-js_modules_es_array_at_js-node_modul-70ccf8","node_modules_core-js_modules_es_array_at_js-node_modules_core-js_modules_es_string_at-alterna-5bc09d"],{"./app/utils/profiling/units/units.ts":(e,t,s)=>{s.d(t,{ab:()=>a,s4:()=>n}),s("../node_modules/core-js/modules/es.error.cause.js");const o={nanoseconds:1e-9,microseconds:1e-6,milliseconds:.001,seconds:1},r=(e,t,s)=>e.toFixed(s)+t;function n(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t;return s>=1?r(s,"s",2):s/.001>=1?r(s/.001,"ms",2):s/1e-6>=1?r(s/1e-6,"μs",2):r(s/1e-9,"ns",2)}}function i(e,t){return Math.floor(e).toString().padStart(t,"0")}function a(e){const t=o[e];if(void 0===t)throw new Error(`Cannot format from unit ${e}, duration mapping is not defined`);return e=>{const s=e*t,o=1e3*s;return`${i(s/60,2)}:${i(s%60,2)}.${i(o%1e3,3)}`}}},"./app/utils/useEffectAfterFirstRender.ts":(e,t,s)=>{s.d(t,{K:()=>n});var o=s("../node_modules/react/index.js");const r=[],n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;const s=(0,o.useRef)(!0);(0,o.useEffect)((()=>{s.current?s.current=!1:e()}),t)}},"./app/views/profiling/profileDetails.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>E});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("../node_modules/react-router/es/index.js"),i=s("../node_modules/fuse.js/dist/fuse.esm.js"),a=s("../node_modules/query-string/index.js"),l=s("./app/components/gridEditable/index.tsx"),u=s("./app/components/layouts/thirds.tsx"),d=s("./app/components/pagination.tsx"),c=s("./app/components/searchBar.tsx"),m=s("./app/components/sentryDocumentTitle.tsx"),p=s("./app/locale.tsx"),f=s("./app/styles/space.tsx"),g=s("./app/utils/discover/styles.tsx"),h=s("./app/utils/profiling/routes.tsx"),y=s("./app/utils/profiling/units/units.ts"),j=s("./app/utils/queryString.tsx"),_=s("./app/utils/useEffectAfterFirstRender.ts"),w=s("./app/utils/useLocation.tsx"),x=s("./app/utils/useOrganization.tsx"),b=s("./app/utils/useParams.tsx"),v=s("./app/views/profiling/profileGroupProvider.tsx"),Z=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function k(e){const t=[];return e.forEach((e=>{e.selfWeight>0&&t.push(e)}),(()=>{})),t.sort(((e,t)=>t.selfWeight-e.selfWeight)).slice(0,500).map((t=>({symbol:t.frame.name,image:t.frame.image,thread:e.threadId,type:t.frame.is_application?"application":"system","self weight":t.selfWeight,"total weight":t.totalWeight})))}const q=50;function $(){const e=(0,w.T)(),[t]=(0,v.useProfileGroup)(),s=(0,x.Z)(),o=(0,r.useMemo)((()=>{const t=(0,j.ro)(e.query.cursor,"");return parseInt(t,10)||0}),[e.query.cursor]),f=(0,r.useMemo)((()=>(0,j.ro)(e.query.query,"")),[e]),g=(0,r.useMemo)((()=>"resolved"===t.type?t.data.profiles.flatMap(k).sort(((e,t)=>t["self weight"]-e["self weight"])):[]),[t]),h=(0,r.useMemo)((()=>new i.default(g,{keys:["symbol"],threshold:.3})),[g]),y=(0,r.useCallback)((e=>e?h.search(e).map((e=>e.item)).sort(((e,t)=>t["self weight"]-e["self weight"])):g),[h,g]),[b,$]=(0,r.useState)((()=>y(f)));(0,_.K)((()=>{$(y(f))}),[g]);const C=(0,r.useMemo)((()=>{const t=o>=q?"true":"false",s=o>=q?o-q:0,r={...e.query,cursor:s},n=`<${e.pathname}${a.stringify(r)}>; rel="previous"; results="${t}"; cursor="${s}"`,i=o+q<b.length?"true":"false",l=o+q<b.length?o+q:0,u={...e.query,cursor:l};return`${n},<${e.pathname}${a.stringify(u)}>; rel="next"; results="${i}"; cursor="${l}"`}),[o,e,b]),I=(0,r.useCallback)((t=>{n.browserHistory.push({...e,query:{...e.query,query:t,cursor:void 0}}),$(y(t))}),[e,y]);return(0,Z.tZ)(r.Fragment,{children:(0,Z.tZ)(m.Z,{title:(0,p.t)("Profiling — Details"),orgSlug:s.slug,children:(0,Z.tZ)(u.uT,{children:(0,Z.BX)(u.or,{fullWidth:!0,children:[(0,Z.tZ)(S,{children:(0,Z.tZ)(c.Z,{defaultQuery:"",query:f,placeholder:(0,p.t)("Search for frames"),onChange:I})}),(0,Z.tZ)(l.ZP,{title:(0,p.t)("Slowest Functions"),isLoading:"loading"===t.type,error:"errored"===t.type,data:b.slice(o,o+q),columnOrder:T.map((e=>z[e])),columnSortBy:[],grid:{renderBodyCell:W},location:e}),(0,Z.tZ)(d.Z,{pageLinks:C})]})})})})}$.displayName="ProfileDetails";const S=(0,o.Z)("div",{target:"ecwa59y0"})("display:grid;gap:",(0,f.Z)(2),";grid-template-columns:auto;margin-bottom:",(0,f.Z)(2),";");function W(e,t,s,o){return(0,Z.tZ)(I,{column:e,dataRow:t,rowIndex:s,columnIndex:o})}W.displayName="renderFunctionCell";const C=(0,y.s4)("nanoseconds");function I(e){let{column:t,dataRow:s}=e;const o=s[t.key],{orgId:r,projectId:i,eventId:a}=(0,b.U)();switch(t.key){case"self weight":case"total weight":return(0,Z.tZ)(g.Hw,{children:C(o)});case"image":return(0,Z.tZ)(g.W2,{children:null!=o?o:"Unknown"});case"thread":return(0,Z.tZ)(g.W2,{children:(0,Z.tZ)(n.Link,{to:(0,h.J)({orgSlug:r,projectSlug:i,profileId:a,query:{tid:s.thread}}),children:o})});default:return(0,Z.tZ)(g.W2,{children:o})}}const T=["symbol","image","thread","type","self weight","total weight"],z={symbol:{key:"symbol",name:(0,p.t)("Symbol"),width:l.z7},image:{key:"image",name:(0,p.t)("Binary"),width:l.z7},thread:{key:"thread",name:(0,p.t)("Thread"),width:l.z7},type:{key:"type",name:(0,p.t)("Type"),width:l.z7},"self weight":{key:"self weight",name:(0,p.t)("Self Weight"),width:l.z7},"total weight":{key:"total weight",name:(0,p.t)("Total Weight"),width:l.z7}},E=$},"../node_modules/core-js/modules/es.array.at.js":(e,t,s)=>{var o=s("../node_modules/core-js/internals/export.js"),r=s("../node_modules/core-js/internals/to-object.js"),n=s("../node_modules/core-js/internals/length-of-array-like.js"),i=s("../node_modules/core-js/internals/to-integer-or-infinity.js"),a=s("../node_modules/core-js/internals/add-to-unscopables.js");o({target:"Array",proto:!0},{at:function(e){var t=r(this),s=n(t),o=i(e),a=o>=0?o:s+o;return a<0||a>=s?void 0:t[a]}}),a("at")},"../node_modules/core-js/modules/es.string.at-alternative.js":(e,t,s)=>{var o=s("../node_modules/core-js/internals/export.js"),r=s("../node_modules/core-js/internals/function-uncurry-this.js"),n=s("../node_modules/core-js/internals/require-object-coercible.js"),i=s("../node_modules/core-js/internals/to-integer-or-infinity.js"),a=s("../node_modules/core-js/internals/to-string.js"),l=s("../node_modules/core-js/internals/fails.js"),u=r("".charAt);o({target:"String",proto:!0,forced:l((function(){return"\ud842"!=="𠮷".at(-2)}))},{at:function(e){var t=a(n(this)),s=t.length,o=i(e),r=o>=0?o:s+o;return r<0||r>=s?void 0:u(t,r)}})}}]);
//# sourceMappingURL=../sourcemaps/app_views_profiling_profileDetails_tsx-node_modules_core-js_modules_es_array_at_js-node_modul-70ccf8.f254aef9bba25e8e3608d3a63203794f.js.map
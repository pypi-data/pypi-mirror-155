"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_actions_memberActions_tsx-app_components_charts_styles_tsx-app_components_forms_apiForm_t-911296","app_components_charts_styles_tsx"],{"./app/actions/memberActions.tsx":(e,t,s)=>{s.d(t,{Z:()=>o});const i=(0,s("../node_modules/reflux/src/index.js").createActions)(["createSuccess","update","updateError","updateSuccess","resendMemberInvite","resendMemberInviteSuccess","resendMemberInviteError"]),o="app"==s.j?i:null},"./app/components/charts/styles.tsx":(e,t,s)=>{s.d(t,{BO:()=>h,Gh:()=>l,OT:()=>d,m2:()=>n,r3:()=>c,uN:()=>a,ws:()=>p,xx:()=>r});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/styles/space.tsx");const d=(0,i.Z)("h4",{target:"ey7s1vy7"})("display:inline-grid;grid-auto-flow:column;gap:",(0,o.Z)(1),";align-items:center;color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin:",(0,o.Z)(1)," 0;"),a=(0,i.Z)("span",{target:"ey7s1vy6"})("color:",(e=>e.theme.subText),";font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,o.Z)(1),";"),n=(0,i.Z)("div",{target:"ey7s1vy5"})("display:grid;align-items:center;@media (min-width: ",(e=>e.theme.breakpoints.small),"){grid-auto-flow:column;grid-column-gap:",(0,o.Z)(1),";}"),r=(0,i.Z)("div",{target:"ey7s1vy4"})("padding:",(0,o.Z)(1)," ",(0,o.Z)(1)," ",(0,o.Z)(1)," ",(0,o.Z)(3),";border-top:1px solid ",(e=>e.theme.border),";@media (min-width: ",(e=>e.theme.breakpoints.small),"){display:flex;justify-content:space-between;flex-wrap:wrap;}"),l=(0,i.Z)("div",{target:"ey7s1vy3"})("display:inline-grid;grid-auto-flow:column;gap:",(0,o.Z)(1),";",(e=>e.theme.text.cardTitle),";color:",(e=>e.theme.headingColor),";align-items:center;"),p="app"==s.j?(0,i.Z)(l,{target:"ey7s1vy2"})("background-color:",(e=>e.theme.background),";border-bottom-right-radius:",(e=>e.theme.borderRadius),";position:absolute;z-index:1;"):null,c=(0,i.Z)("div",{target:"ey7s1vy1"})("display:inline-grid;grid-auto-flow:column;gap:",(0,o.Z)(1),";align-items:baseline;background-color:",(e=>e.theme.background),";position:absolute;top:40px;z-index:1;font-size:",(e=>e.theme.headerFontSize),";"),h=(0,i.Z)("div",{target:"ey7s1vy0"})("padding:",(0,o.Z)(2)," ",(0,o.Z)(3),";")},"./app/components/forms/apiForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>p});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),d=s("./app/actionCreators/indicator.tsx"),a=s("./app/api.tsx"),n=s("./app/components/forms/form.tsx"),r=s("./app/locale.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends o.Component{constructor(){super(...arguments),(0,i.Z)(this,"api",new a.KU),(0,i.Z)(this,"onSubmit",((e,t,s)=>{this.props.onSubmit&&this.props.onSubmit(e),(0,d.E3)((0,r.t)("Saving changesâ€¦")),this.api.request(this.props.apiEndpoint,{method:this.props.apiMethod,data:e,success:e=>{(0,d.B8)(),t(e)},error:e=>{(0,d.B8)(),s(e)}})}))}componentWillUnmount(){this.api.clear()}render(){const{onSubmit:e,apiMethod:t,apiEndpoint:s,...i}=this.props;return(0,l.tZ)(n.Z,{onSubmit:this.onSubmit,...i})}}p.displayName="ApiForm"},"./app/components/forms/checkboxField.tsx":(e,t,s)=>{s.d(t,{Z:()=>g});var i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=s("./app/components/checkbox.tsx"),d=s("./app/components/forms/field/fieldDescription.tsx"),a=s("./app/components/forms/field/fieldHelp.tsx"),n=s("./app/components/forms/field/fieldLabel.tsx"),r=s("./app/components/forms/field/fieldRequiredBadge.tsx"),l=s("./app/components/forms/formField/index.tsx"),p=s("./app/styles/space.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function h(e){const{name:t,disabled:s,stacked:i,id:p,required:h,label:g,help:b}=e,w="function"==typeof b?b(e):b;return(0,c.tZ)(l.Z,{name:t,inline:!1,stacked:i,children:e=>{let{onChange:l,value:b}=e;return(0,c.BX)(u,{children:[(0,c.tZ)(m,{children:(0,c.tZ)(o.Z,{id:p,name:t,disabled:s,checked:!0===b,onChange:function(e){const t=e.target.checked;null==l||l(t,e)}})}),(0,c.BX)(d.Z,{htmlFor:p,children:[g&&(0,c.tZ)(n.Z,{disabled:s,children:(0,c.BX)("span",{children:[g,h&&(0,c.tZ)(r.Z,{})]})}),w&&(0,c.tZ)(a.Z,{stacked:i,inline:!0,children:w})]})]})}})}h.displayName="CheckboxField";const m=(0,i.Z)("span",{target:"etw9sv71"})("align-self:flex-start;display:flex;margin-right:",(0,p.Z)(1),";& input{margin:0;}"),u=(0,i.Z)("div",{target:"etw9sv70"})({name:"ho1qnd",styles:"display:flex;flex-direction:row"}),g="app"==s.j?h:null},"./app/utils/withProject.tsx":(e,t,s)=>{s.d(t,{Z:()=>r});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/react/index.js"),d=s("./app/sentryTypes.tsx"),a=s("./app/utils/getDisplayName.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=e=>{var t;return t=class extends o.Component{render(){const{project:t,...s}=this.props;return(0,n.tZ)(e,{project:null!=t?t:this.context.project,...s})}},(0,i.Z)(t,"displayName",`withProject(${(0,a.Z)(e)})`),(0,i.Z)(t,"contextTypes",{project:d.Z.Project}),t}},"./app/views/dashboardsV2/dashboard.tsx":(e,t,s)=>{s.d(t,{ZP:()=>$,ey:()=>I,re:()=>L});var i=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),d=(s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react-grid-layout/css/styles.css"),s("../node_modules/react-resizable/css/styles.css"),s("../node_modules/react/index.js")),a=s("../node_modules/react-grid-layout/index.js"),n=s("../node_modules/react-lazyload/lib/index.js"),r=s("../node_modules/@dnd-kit/core/dist/core.esm.js"),l=s("../node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),p=s("../node_modules/lodash/cloneDeep.js"),c=s.n(p),h=s("../node_modules/lodash/debounce.js"),m=s.n(h),u=s("../node_modules/lodash/isEqual.js"),g=s.n(u),b=s("./app/actionCreators/dashboards.tsx"),w=s("./app/actionCreators/indicator.tsx"),y=s("./app/actionCreators/members.tsx"),x=s("./app/actionCreators/modal.tsx"),f=s("./app/actionCreators/tags.tsx"),Z=s("./app/components/button.tsx"),v=s("./app/icons/index.tsx"),_=s("./app/locale.tsx"),z=s("./app/styles/space.tsx"),W=s("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),j=s("./app/utils/theme.tsx"),k=s("./app/utils/withApi.tsx"),S=s("./app/utils/withPageFilters.tsx"),E=s("./app/views/dashboardsV2/addWidget.tsx"),A=s("./app/views/dashboardsV2/layoutUtils.tsx"),D=s("./app/views/dashboardsV2/sortableWidget.tsx"),C=s("./app/views/dashboardsV2/types.tsx"),R=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),T=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js");const L="widget-drag",M="desktop",B="mobile",I=6,N=[16,16],U={x:0,y:Number.MAX_SAFE_INTEGER},q=parseInt(j.ZP.breakpoints.small,10),H={[B]:0,[M]:q},P={[B]:2,[M]:I};class F extends d.Component{constructor(e){super(e),(0,i.Z)(this,"forceCheckTimeout",void 0),(0,i.Z)(this,"debouncedHandleResize",m()((()=>{this.setState({windowWidth:window.innerWidth})}),250)),(0,i.Z)(this,"handleStartAdd",(()=>{const{organization:e,dashboard:t,selection:s,handleUpdateWidgetList:i,handleAddCustomWidget:o,router:d,location:a,paramDashboardId:n}=this.props;if(e.features.includes("new-widget-builder-experience-design"))return n?void d.push({pathname:`/organizations/${e.slug}/dashboard/${n}/widget/new/`,query:{...a.query,source:C.EN.DASHBOARDS}}):void d.push({pathname:`/organizations/${e.slug}/dashboards/new/widget/new/`,query:{...a.query,source:C.EN.DASHBOARDS}});(0,W.Z)("dashboards_views.add_widget_modal.opened",{organization:e}),(0,W.Z)("dashboards_views.widget_library.opened",{organization:e}),(0,x.openAddDashboardWidgetModal)({organization:e,dashboard:t,selection:s,onAddWidget:o,onAddLibraryWidget:e=>i(e),source:C.EN.LIBRARY})})),(0,i.Z)(this,"handleUpdateComplete",(e=>t=>{const{isEditing:s,onUpdate:i,handleUpdateWidgetList:o}=this.props;let d=[...this.props.dashboard.widgets];const a=d.indexOf(e),n={...t,tempId:e.tempId};(0,A.I_)(e.displayType)!==(0,A.I_)(t.displayType)?(d[a]=(0,A.W8)(n),d=(0,A.Bb)(d)):d[a]=n,i(d),s||o(d)})),(0,i.Z)(this,"handleDeleteWidget",(e=>()=>{const{dashboard:t,onUpdate:s,isEditing:i,handleUpdateWidgetList:o}=this.props;let d=t.widgets.filter((t=>t!==e));d=(0,A.Bb)(d),s(d),i||o(d)})),(0,i.Z)(this,"handleDuplicateWidget",((e,t)=>()=>{const{dashboard:s,onUpdate:i,isEditing:o,handleUpdateWidgetList:d}=this.props,a=c()((0,A.TE)({...e,id:void 0,tempId:void 0}));let n=[...s.widgets];n.splice(t,0,a),n=(0,A.Bb)(n),i(n),o||d(n)})),(0,i.Z)(this,"handleEditWidget",((e,t)=>()=>{const{organization:s,dashboard:i,selection:o,router:d,location:a,paramDashboardId:n,handleAddCustomWidget:r,isEditing:l}=this.props;if(s.features.includes("new-widget-builder-experience-design")&&(!s.features.includes("new-widget-builder-experience-modal-access")||l))return n?void d.push({pathname:`/organizations/${s.slug}/dashboard/${n}/widget/${t}/edit/`,query:{...a.query,source:C.EN.DASHBOARDS}}):void d.push({pathname:`/organizations/${s.slug}/dashboards/new/widget/${t}/edit/`,query:{...a.query,source:C.EN.DASHBOARDS}});(0,W.Z)("dashboards_views.edit_widget_modal.opened",{organization:s});const p={organization:s,widget:e,selection:o,onAddWidget:r,onUpdateWidget:this.handleUpdateComplete(e)};(0,x.openAddDashboardWidgetModal)({...p,dashboard:i,source:C.EN.DASHBOARDS})})),(0,i.Z)(this,"handleLayoutChange",((e,t)=>{const{isMobile:s}=this.state,{dashboard:i,onUpdate:o}=this.props,d=e=>{let{i:t}=e;return t!==E.g},a={[M]:t.desktop.filter(d),[B]:t.mobile.filter(d)};let r=(0,A.Sp)(a.desktop);const l=i.widgets.map((e=>{const t=(0,A.Yb)(e);let i=a.desktop.find((e=>{let{i:s}=e;return s===t}));if(!i){const o=(0,A.I_)(e.displayType),d={w:A.c6,h:o,minH:o,i:t},[n,l]=(0,A.Hh)(r,o);if(r=l,i={...d,...n},s){const e=a.mobile.filter((e=>{let{i:s}=e;return s!==t}));e.push({...d,...U}),a.mobile=e}}return{...e,layout:(0,A.hq)(i)}}));this.setState({layouts:a}),o(l),window.clearTimeout(this.forceCheckTimeout),this.forceCheckTimeout=window.setTimeout(n.be,400)})),(0,i.Z)(this,"handleBreakpointChange",(e=>{const{layouts:t}=this.state,{dashboard:{widgets:s}}=this.props;e!==B?this.setState({isMobile:!1}):this.setState({isMobile:!0,layouts:{...t,[B]:(0,A.VW)(t.desktop,s)}})})),(0,i.Z)(this,"renderDndDashboard",(()=>{const{isEditing:e,onUpdate:t,dashboard:s,organization:i,widgetLimitReached:o}=this.props;let{widgets:d}=s;d=d.filter((e=>{let{widgetType:t}=e;return t!==C.l9.RELEASE||i.features.includes("dashboards-releases")}));const a=this.getWidgetIds();return(0,R.tZ)(r.LB,{collisionDetection:r.pE,onDragEnd:e=>{let{over:s,active:i}=e;const o=i.id,n=a.indexOf.bind(a),r=o?n(o):-1;if(s&&s.id!==E.g){const e=n(s.id);r!==e&&t((0,l.Rp)(d,r,e))}},children:(0,R.tZ)(O,{children:(0,R.BX)(l.Fo,{items:a,strategy:l.U2,children:[d.map(((e,t)=>this.renderWidget(e,t))),e&&!o&&(0,R.tZ)(E.Z,{onAddWidget:this.handleStartAdd})]})})})}));const{dashboard:t,organization:s}=e,o=s.features.includes("dashboard-grid-layout"),d=(0,A.RI)(t.widgets);this.state={isMobile:!1,layouts:{[M]:o?d:[],[B]:o?(0,A.VW)(d,t.widgets):[]},windowWidth:window.innerWidth}}static getDerivedStateFromProps(e,t){if(e.organization.features.includes("dashboard-grid-layout")){if(t.isMobile)return null;const s=(0,A.RI)(e.dashboard.widgets);if(!g()(s.map(A.hq),t.layouts.desktop.map(A.hq)))return{...t,layouts:{[M]:s,[B]:(0,A.VW)(s,e.dashboard.widgets)}}}return null}componentDidMount(){const{organization:e,newWidget:t}=this.props;e.features.includes("dashboard-grid-layout")&&window.addEventListener("resize",this.debouncedHandleResize),this.fetchTags(),t&&this.addNewWidget(),this.fetchMemberList()}componentDidUpdate(e){const{selection:t,newWidget:s}=this.props;s&&s!==e.newWidget&&this.addNewWidget(),g()(e.selection.projects,t.projects)||this.fetchMemberList()}componentWillUnmount(){this.props.organization.features.includes("dashboard-grid-layout")&&window.removeEventListener("resize",this.debouncedHandleResize),window.clearTimeout(this.forceCheckTimeout)}fetchMemberList(){var e;const{api:t,selection:s}=this.props;(0,y.MA)(t,this.props.organization.slug,null===(e=s.projects)||void 0===e?void 0:e.map((e=>String(e))))}async addNewWidget(){const{api:e,organization:t,newWidget:s,handleAddCustomWidget:i,onSetNewWidget:o}=this.props;if(s)try{await(0,b.QL)(e,t.slug,s),i(s),null==o||o()}catch(e){(0,w.Iw)(e)}}fetchTags(){const{api:e,organization:t,selection:s}=this.props;(0,f.QK)(e,t.slug,s)}getWidgetIds(){return[...this.props.dashboard.widgets.map(((e,t)=>(0,A.$n)(e,t))),E.g]}renderWidget(e,t){const{isMobile:s,windowWidth:i}=this.state,{isEditing:o,organization:d,widgetLimitReached:a,isPreview:n}=this.props,r={widget:e,isEditing:o,widgetLimitReached:a,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(e,t),onDuplicate:this.handleDuplicateWidget(e,t),isPreview:n};if(d.features.includes("dashboard-grid-layout")){const o=(0,A.Yb)(e),d=o;return(0,R.tZ)("div",{"data-grid":e.layout,children:(0,R.tZ)(D.Z,{...r,dragId:d,isMobile:s,windowWidth:i,index:String(t)})},o)}const l=(0,A.$n)(e,t),p=l;return(0,T.az)(D.Z,{...r,key:l,dragId:p,index:String(t)})}get addWidgetLayout(){const{isMobile:e,layouts:t}=this.state;let s=U;if(!e){const e=(0,A.Sp)(t.desktop),[i]=(0,A.Hh)(e,1);s=i}return{...s,w:A.c6,h:1,isResizable:!1}}renderGridDashboard(){const{layouts:e,isMobile:t}=this.state,{isEditing:s,dashboard:i,organization:o,widgetLimitReached:d}=this.props;let{widgets:a}=i;a=a.filter((e=>{let{widgetType:t}=e;return t!==C.l9.RELEASE||o.features.includes("dashboards-releases")}));const n=(0,A.Sp)(e.desktop),r=(0,A._F)(a,n),l=!t&&s;return(0,R.BX)(X,{breakpoints:H,cols:P,rowHeight:120,margin:N,draggableHandle:`.${L}`,draggableCancel:".widget-resize",layouts:e,onLayoutChange:this.handleLayoutChange,onBreakpointChange:this.handleBreakpointChange,isDraggable:l,isResizable:l,resizeHandle:(0,R.tZ)(G,{"aria-label":(0,_.t)("Resize Widget"),"data-test-id":"custom-resize-handle",className:"widget-resize",size:"xsmall",borderless:!0,icon:(0,R.tZ)(v.Iq,{size:"xs"})}),useCSSTransforms:!1,isBounded:!0,children:[r.map(((e,t)=>this.renderWidget(e,t))),s&&!d&&(0,R.tZ)(V,{"data-grid":this.addWidgetLayout,children:(0,R.tZ)(E.Z,{onAddWidget:this.handleStartAdd})},E.g)]})}render(){const{organization:e}=this.props;return e.features.includes("dashboard-grid-layout")?this.renderGridDashboard():this.renderDndDashboard()}}F.displayName="Dashboard";const $=(0,k.Z)((0,S.Z)(F)),O=(0,o.Z)("div",{target:"e1wa3gzn3"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;gap:",(0,z.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints.medium),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints.xlarge),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(e=>e.theme.breakpoints.xxlarge),"){grid-template-columns:repeat(8, minmax(0, 1fr));}"),V=(0,o.Z)("div",{target:"e1wa3gzn2"})("z-index:5;background-color:",(e=>e.theme.background),";"),X=(0,o.Z)((0,a.WidthProvider)(a.Responsive),{target:"e1wa3gzn1"})("margin:-",(0,z.Z)(2),";.react-grid-item.react-grid-placeholder{background:",(e=>e.theme.purple200),";border-radius:",(e=>e.theme.borderRadius),";}"),G=(0,o.Z)(Z.ZP,{target:"e1wa3gzn0"})("position:absolute;z-index:2;bottom:",(0,z.Z)(.5),";right:",(0,z.Z)(.5),";color:",(e=>e.theme.subText),";cursor:nwse-resize;.react-resizable-hide &{display:none;}")}}]);
//# sourceMappingURL=../sourcemaps/app_actions_memberActions_tsx-app_components_charts_styles_tsx-app_components_forms_apiForm_t-911296.3811c78d300a82bbd64c5f8d1d60a836.js.map
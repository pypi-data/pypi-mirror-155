"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_components_events_searchBar_tsx-app_utils_performance_histogram_utils_tsx-app_views_perfo-4df41c","app_utils_discover_charts_tsx-app_utils_performance_histogram_utils_tsx-app_views_performance-a97f34"],{"./app/components/events/searchBar.tsx":(e,t,n)=>{n.d(t,{Z:()=>j}),n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/core-js/modules/es.array.includes.js"),n("../node_modules/core-js/modules/es.string.replace.js");var r=n("../node_modules/react/index.js"),s=n("../node_modules/lodash/assign.js"),a=n.n(s),o=n("../node_modules/lodash/flatten.js"),i=n.n(o),l=n("../node_modules/lodash/memoize.js"),c=n.n(l),d=n("../node_modules/lodash/omit.js"),p=n.n(d),u=n("./app/actionCreators/tags.tsx"),m=n("./app/components/smartSearchBar/index.tsx"),g=n("./app/constants/index.tsx"),h=n("./app/types/index.tsx"),x=n("./app/utils.tsx"),f=n("./app/utils/discover/fields.tsx"),v=n("./app/utils/measurements/measurements.tsx"),Z=n("./app/utils/useApi.tsx"),y=n("./app/utils/withTags.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const _=new RegExp(`^${g.c$}|\\${g.ir}`,"g");function b(e){const{maxSearchItems:t,organization:n,tags:s,omitTags:o,fields:l,projectIds:d,includeSessionTagsValues:g,maxMenuHeight:y}=e,b=(0,Z.Z)();(0,r.useEffect)((()=>{var e,t;null===(e=(t=j.cache).clear)||void 0===e||e.call(t)}),[d]);const j=c()(((e,t,r)=>{const s=null==d?void 0:d.map(String);return(0,f.h1)(e.key)||(0,f.Xr)(e.key)?Promise.resolve([]):(0,u.Fo)(b,n.slug,e.key,t,s,r,!0,g).then((e=>i()(e.filter((e=>{let{name:t}=e;return(0,x.ri)(t)})).map((e=>{let{name:t}=e;return t})))),(()=>{throw new Error("Unable to fetch event field values")}))}),((e,t)=>{let{key:n}=e;return`${n}-${t}`})),S=e=>{const t=l?Object.fromEntries(l.filter((e=>!Object.keys(f.wZ).includes(e.field)&&!(0,f.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},r=n.features.includes("performance-view")?Object.assign({},e,f.wZ,t):p()(f.wZ,f.J8),i=a()({},s,r,f.jg);return i.has={key:"has",name:"Has property",values:Object.keys(i),predefined:!0},p()(i,null!=o?o:[])};return(0,w.tZ)(v.Z,{children:n=>{let{measurements:r}=n;return(0,w.tZ)(m.Z,{hasRecentSearches:!0,savedSearchType:h.L4.EVENT,onGetTagValues:j,supportedTags:S(r),prepareQuery:e=>e.replace(_,""),maxSearchItems:t,excludeEnvironment:!0,maxMenuHeight:null!=y?y:300,getFieldDoc:f.e$,...e})}})}b.displayName="SearchBar";const j=(0,y.Z)(b)},"./app/utils/discover/charts.tsx":(e,t,n)=>{n.d(t,{CX:()=>i,gu:()=>l});var r=n("./app/locale.tsx"),s=n("./app/utils.tsx"),a=n("./app/utils/discover/fields.tsx"),o=n("./app/utils/formatters.tsx");function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0,s.ri)(e))return"—";switch((0,a.Px)(t)){case"integer":case"number":return e.toLocaleString();case"percentage":return(0,o.rl)(e,2);case"duration":return(0,o.g9)(e/1e3,2,!0);default:return e.toString()}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch((0,a.Px)(t)){case"integer":case"number":return n?(0,o.Du)(e):e.toLocaleString();case"percentage":return(0,o.rl)(e,0);case"duration":return c(e);default:return e.toString()}}function c(e){if(0===e)return"0";if(e>=o.ps){const t=(e/o.ps).toFixed(0);return(0,r.t)("%swk",t)}if(e>=o.x4){const t=(e/o.x4).toFixed(0);return(0,r.t)("%sd",t)}if(e>=o.kr){const t=(e/o.kr).toFixed(0);return(0,r.t)("%shr",t)}if(e>=o.EB){const t=(e/o.EB).toFixed(0);return(0,r.t)("%smin",t)}if(e>=o.sh){const t=(e/o.sh).toFixed(0);return(0,r.t)("%ss",t)}const t=e.toFixed(0);return(0,r.t)("%sms",t)}},"./app/utils/measurements/measurements.tsx":(e,t,n)=>{n.d(t,{Z:()=>p,i:()=>c}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react/index.js"),s=n("./app/utils/performance/vitals/constants.tsx"),a=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,n]=e;return[t,{name:n.name,key:t}]})))}const i=o(s.TT),l=o(s.r9);function c(){return{...l,...i}}function d(e){let{children:t}=e;const n=c();return(0,a.tZ)(r.Fragment,{children:t({measurements:n})})}d.displayName="Measurements";const p=d},"./app/utils/performance/histogram/utils.tsx":(e,t,n)=>{n.d(t,{GT:()=>o,_W:()=>a,te:()=>s}),n("../node_modules/core-js/modules/es.error.cause.js");var r=n("./app/utils/formatters.tsx");function s(e){return e.length>=2?e[1].bin-e[0].bin:0}function a(e){const t=s(e);return e.map((e=>{const n=e.bin;return{start:n,end:n+t}}))}function o(e){let{precision:t,type:n,additionalFieldsFn:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e=>{switch(n){case"duration":const s=null!=t?t:e<1e3?0:3;return(0,r.g9)(e/1e3,s,!0);case"number":const a=10**(null!=t?t:0);return(Math.round((e+Number.EPSILON)*a)/a).toLocaleString();default:throw new Error(`Unable to format type: ${n}`)}};return e.map((e=>{var t;return{value:e.count,name:a(e.bin),...null!==(t=null==s?void 0:s(e.bin))&&void 0!==t?t:{}}}))}},"./app/utils/withTags.tsx":(e,t,n)=>{n.d(t,{Z:()=>l});var r=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),a=n("./app/stores/tagStore.tsx"),o=n("./app/utils/getDisplayName.tsx"),i=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends s.Component{constructor(){super(...arguments),(0,r.Z)(this,"state",{tags:a.Z.getAllTags()}),(0,r.Z)(this,"unsubscribe",a.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...n}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...n})}}return t.displayName="WithTags",(0,r.Z)(t,"displayName",`withTags(${(0,o.Z)(e)})`),t}},"./app/views/performance/transactionSummary/transactionEvents/utils.tsx":(e,t,n)=>{n.d(t,{Zq:()=>u,_S:()=>l,q3:()=>i,qg:()=>p,tb:()=>d,xr:()=>c}),n("../node_modules/core-js/modules/es.array.includes.js");var r=n("./app/locale.tsx"),s=n("./app/utils/queryString.tsx"),a=n("./app/views/performance/transactionSummary/filter.tsx"),o=n("./app/views/performance/transactionSummary/utils.tsx");let i;function l(e,t){const{p99:n,p95:s,p75:o,p50:l}=t||{p99:0,p95:0,p75:0,p50:0};return{[i.p50]:{name:i.p50,query:l?[["transaction.duration",`<=${l.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p50")},[i.p75]:{name:i.p75,query:o?[["transaction.duration",`<=${o.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p75")},[i.p95]:{name:i.p95,query:s?[["transaction.duration",`<=${s.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p95")},[i.p99]:{name:i.p99,query:n?[["transaction.duration",`<=${n.toFixed(0)}`]]:void 0,sort:{kind:"desc",field:(0,a.T$)(e)||"transaction.duration"},label:(0,r.t)("p99")},[i.p100]:{name:i.p100,label:(0,r.t)("p100")}}}function c(e){let{orgSlug:t,transaction:n,projectID:r,query:s}=e;return{pathname:`/organizations/${t}/performance/summary/events/`,query:{transaction:n,project:r,environment:s.environment,statsPeriod:s.statsPeriod,start:s.start,end:s.end,query:s.query}}}function d(e){return t=(0,s.ro)(e.query.showTransactions,i.p100),Object.values(i).includes(t)?t:i.p100;var t}function p(e,t){var n,r;const s=l(t),a=null===(n=s[e].sort)||void 0===n?void 0:n.kind,o=null===(r=s[e].sort)||void 0===r?void 0:r.field,i={showTransactions:e};return a&&o&&(i.sort=`${"desc"===a?"-":""}${o}`),i}function u(e){switch(e){case o.K0.OUTLIER:return i.p100;case o.K0.SLOW:return i.p95;default:return}}!function(e){e.p50="p50",e.p75="p75",e.p95="p95",e.p99="p99",e.p100="p100"}(i||(i={}))},"./app/views/performance/trends/changedTransactions.tsx":(e,t,n)=>{n.d(t,{H:()=>H,Z:()=>pe});var r,s=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(n("../node_modules/core-js/modules/es.error.cause.js"),n("../node_modules/react/index.js")),o=n("../node_modules/react-router/es/index.js"),i=n("./app/components/button.tsx"),l=n("./app/components/charts/styles.tsx"),c=n("./app/components/count.tsx"),d=n("./app/components/dropdownLink.tsx"),p=n("./app/components/duration.tsx"),u=n("./app/components/emptyStateWarning.tsx"),m=n("./app/components/forms/controls/radioGroup.tsx"),g=n("./app/components/idBadge/index.tsx"),h=n("./app/components/links/link.tsx"),x=n("./app/components/loadingIndicator.tsx"),f=n("./app/components/menuItem.tsx"),v=n("./app/components/pagination.tsx"),Z=n("./app/components/panels/index.tsx"),y=n("./app/components/questionTooltip.tsx"),w=n("./app/components/radio.tsx"),_=n("./app/components/tooltip.tsx"),b=n("./app/icons/index.tsx"),j=n("./app/locale.tsx"),S=n("./app/styles/space.tsx"),E=n("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),T=n("./app/utils/formatters.tsx"),k=n("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),C=n("./app/utils/queryString.tsx"),L=n("./app/utils/tokenizeSearch.tsx"),q=n("./app/utils/useApi.tsx"),R=n("./app/utils/withOrganization.tsx"),N=n("./app/utils/withProjects.tsx"),F=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),z=n("./app/views/performance/transactionSummary/utils.tsx"),P=n("./app/views/performance/trends/chart.tsx"),B=n("./app/views/performance/trends/types.tsx"),$=n("./app/views/performance/trends/utils.tsx"),A=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function O(e){switch(e){case B.ER.IMPROVED:return(0,j.t)("Most Improved Transactions");case B.ER.REGRESSION:return(0,j.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}function D(e,t,n){const r=(0,$.j_)(t),s=(0,C.ro)(e.query[r]);if(!n)return;return n.find((e=>`${e.transaction}-${e.project}`===s))||(n.length>0?n[0]:void 0)}function I(e,t,n){return function(r){const s=(0,$.j_)(n),a={...e.query};r?a[s]=r?`${r.transaction}-${r.project}`:void 0:delete a[s],o.browserHistory.push({pathname:e.pathname,query:a}),(0,E.Z)("performance_views.trends.widget_interaction",{organization:t,widget_type:n})}}function M(e,t,n,s,a,i,l){const c=(0,$.IO)(e,i,l).column,d=(0,C.ro)(e.query.query),p=new L.MY(null!=d?d:""),u=p.getFilterValues(c),m=s===r.GREATER_THAN_EQUALS?">":"<";u&&u.forEach((e=>{(e.startsWith(s)||e.startsWith(m))&&p.removeFilterValue(c,e)})),p.addFilterValues(c,[`${s}${n}`]);const g=p.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(g).trim()}}),(0,E.Z)("performance_views.trends.change_duration",{organization:t,widget_type:O(a),value:`${s}${n}`})}function V(e){const{location:t,trendChangeType:n,previousTrendFunction:r,previousTrendColumn:s,organization:i,projects:l,setError:c}=e,d=(0,q.Z)(),p=e.trendView.clone(),u=O(n);(0,$.kM)(p,t,n,l);const m=(e=>(t,n,r)=>{const s={};e===B.ER.IMPROVED?s.improvedCursor=t:e===B.ER.REGRESSION&&(s.regressionCursor=t),delete r[(0,$.j_)(e)],o.browserHistory.push({pathname:n,query:{...r,...s}})})(n),g=(0,C.ro)(t.query[$.vt[n]]),h=e=>{(0,E.Z)("performance_views.trends.widget_pagination",{organization:i,direction:e,widget_type:O(n)})};return(0,A.tZ)(k.ZP,{eventView:p,orgSlug:i.slug,location:t,trendChangeType:n,cursor:g,limit:5,setError:e=>c(null==e?void 0:e.message),children:o=>{let{isLoading:c,trendsData:g,pageLinks:f}=o;const Z=(0,$.CE)(t),w=(0,$.IO)(t,l,p.project),_=(0,$.RP)(g&&g.events&&g.events.data||[]),b=D(t,n,_),S=(null==g?void 0:g.stats)||{},E=_&&_.slice?_.slice(0,5):[],T=c&&r?r:Z.field,k=c&&s?s:w.column,C=(0,j.t)("This compares the baseline (%s) of the past with the present.",Z.legendLabel);return(0,A.BX)(Q,{"data-test-id":"changed-transactions",children:[(0,A.BX)(W,{children:[(0,A.BX)(Y,{children:[u,(0,A.tZ)(y.Z,{size:"sm",position:"top",title:C})]}),c?(0,A.tZ)(x.Z,{style:{margin:"237px auto"}}):(0,A.tZ)(a.Fragment,{children:E.length?(0,A.BX)(a.Fragment,{children:[(0,A.tZ)(K,{children:(0,A.tZ)(P.Z,{statsData:S,query:p.query,project:p.project,environment:p.environment,start:p.start,end:p.end,statsPeriod:p.statsPeriod,transaction:b,isLoading:c,...e})}),E.map(((r,s)=>(0,A.tZ)(X,{api:d,currentTrendFunction:T,currentTrendColumn:k,trendView:e.trendView,organization:i,transaction:r,index:s,trendChangeType:n,transactions:E,location:t,projects:l,statsData:S,handleSelectTransaction:I(t,i,n)},r.transaction)))]}):(0,A.tZ)(te,{small:!0,children:(0,j.t)("No results")})})]}),(0,A.tZ)(v.Z,{pageLinks:f,onCursor:m,paginationAnalyticsEvent:h})]})}})}function X(e){const{transaction:t,transactions:n,trendChangeType:s,currentTrendFunction:i,currentTrendColumn:l,index:p,location:u,organization:h,projects:x,handleSelectTransaction:v,trendView:Z}=e,y=$.es[s].default,S=D(u,s,n)===t,E=x.find((e=>{let{slug:n}=e;return n===t.project})),k=t.aggregate_range_2,q=t.aggregate_range_1,R=(0,T.rl)(Math.abs(t.trend_percentage-1),0),N=(0,T.g9)(q/1e3,q<1e3&&q>10?0:2),F=(0,T.g9)(k/1e3,k<1e3&&k>10?0:2),z=(0,j.t)("Over this period, the %s for %s has %s %s from %s to %s",i,l,s===B.ER.IMPROVED?(0,j.t)("decreased"):(0,j.t)("increased"),R,N,F),P=s===B.ER.IMPROVED?q:k,O=s===B.ER.IMPROVED?N:F;return(0,A.BX)(ne,{"data-test-id":"trends-list-item-"+s,children:[(0,A.tZ)(re,{color:y,children:(0,A.tZ)(_.Z,{title:(0,A.BX)(ce,{children:[(0,A.tZ)("span",{children:(0,j.t)("Total Events")}),(0,A.BX)("span",{children:[(0,A.tZ)(c.Z,{value:t.count_range_1}),(0,A.tZ)(de,{direction:"right",size:"xs"}),(0,A.tZ)(c.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,A.tZ)(m.V,{index:p,role:"radio",children:(0,A.tZ)(w.Z,{checked:S,onChange:()=>v(t)})})})}),(0,A.tZ)(U,{...e}),(0,A.tZ)(ie,{children:(0,A.tZ)(_.Z,{title:z,children:(0,A.BX)(a.Fragment,{children:[s===B.ER.REGRESSION?"+":"",(0,T.rl)(t.trend_percentage-1,0)]})})}),(0,A.BX)(d.Z,{caret:!1,anchorRight:!0,title:(0,A.tZ)(J,{size:"xsmall",icon:(0,A.tZ)(b.YR,{"data-test-id":"trends-item-action",size:"xs"}),"aria-label":(0,j.t)("Actions")}),children:[(0,A.tZ)(f.Z,{onClick:()=>M(u,h,P,r.LESS_THAN_EQUALS,s,x,Z.project),children:(0,A.tZ)(ee,{children:(0,j.t)("Show ≤ %s",O)})}),(0,A.tZ)(f.Z,{onClick:()=>M(u,h,P,r.GREATER_THAN_EQUALS,s,x,Z.project),children:(0,A.tZ)(ee,{children:(0,j.t)("Show ≥ %s",O)})}),(0,A.tZ)(f.Z,{onClick:()=>function(e,t){const n=(0,C.ro)(e.query.query),r=new L.MY(null!=n?n:"");r.addFilterValues("!transaction",[t]);const s=r.formatString();o.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(s).trim()}})}(u,t.transaction),children:(0,A.tZ)(ee,{children:(0,j.t)("Hide from list")})})]}),(0,A.BX)(ae,{children:[E&&(0,A.tZ)(_.Z,{title:t.project,children:(0,A.tZ)(g.Z,{avatarSize:16,project:E,hideName:!0})}),(0,A.tZ)(H,{...e})]}),(0,A.tZ)(le,{color:y,children:(0,A.tZ)(G,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(r||(r={})),V.displayName="ChangedTransactions",X.displayName="TrendsListItem";const H=e=>{let{transaction:t}=e;const{fromSeconds:n,toSeconds:r,showDigits:s}=(0,$.Kt)(t.aggregate_range_1,t.aggregate_range_2);return(0,A.BX)(oe,{children:[(0,A.tZ)(p.Z,{seconds:n,fixedDigits:s?1:0,abbreviation:!0}),(0,A.tZ)(de,{direction:"right",size:"xs"}),(0,A.tZ)(p.Z,{seconds:r,fixedDigits:s?1:0,abbreviation:!0})]})};H.displayName="CompareDurations";const G=e=>{let{transaction:t,trendChangeType:n}=e;const{seconds:r,fixedDigits:s,changeLabel:a}=(0,$.wx)(t.trend_difference,n);return(0,A.BX)("span",{children:[(0,A.tZ)(p.Z,{seconds:r,fixedDigits:s,abbreviation:!0})," ",a]})};G.displayName="ValueDelta";const U=e=>{const{organization:t,trendView:n,transaction:r,projects:s,currentTrendFunction:a,currentTrendColumn:o}=e,i=n.clone(),l=(0,$._H)(r,s),c=(0,z.e1)({orgSlug:t.slug,transaction:String(r.transaction),query:i.generateQueryStringObject(),projectID:l,display:F.D.TREND,trendFunction:a,trendColumn:o});return(0,A.tZ)(se,{to:c,"data-test-id":"item-transaction-name",children:r.transaction})};U.displayName="TransactionSummaryLink";const Q=(0,s.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),W=(0,s.Z)(Z.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),K=(0,s.Z)("div",{target:"e11bn3w113"})("padding:",(0,S.Z)(3),";"),Y=(0,s.Z)(l.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,S.Z)(2)," ",(0,S.Z)(3),";"),J=(0,s.Z)(i.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),ee=(0,s.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";");ee.defaultProps={"data-test-id":"menu-action"};const te=(0,s.Z)(u.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),ne=(0,s.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,S.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,S.Z)(1)," ",(0,S.Z)(2),";"),re=(0,s.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),se=(0,s.Z)(h.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,S.Z)(1),";",(e=>e.theme.overflowEllipsis),";"),ae=(0,s.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),oe=(0,s.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,S.Z)(1),";"),ie=(0,s.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),le=(0,s.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),ce=(0,s.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),de=(0,s.Z)(b.CC,{target:"e11bn3w10"})("margin:0 ",(0,S.Z)(1),";"),pe=(0,N.Z)((0,R.Z)(V))},"./app/views/performance/trends/chart.tsx":(e,t,n)=>{n.d(t,{Z:()=>Z,k:()=>v}),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/@emotion/react/dist/emotion-element-cbed451f.browser.esm.js"),a=n("./app/components/charts/chartZoom.tsx"),o=n("./app/components/charts/lineChart.tsx"),i=n("./app/components/charts/transitionChart.tsx"),l=n("./app/components/charts/transparentLoadingMask.tsx"),c=n("./app/components/organizations/pageFilters/parse.tsx"),d=n("./app/locale.tsx"),p=n("./app/utils/dates.tsx"),u=n("./app/utils/discover/charts.tsx"),m=n("./app/utils/getDynamicText.tsx"),g=n("./app/utils/queryString.tsx"),h=n("./app/views/performance/trends/utils.tsx"),x=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function f(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases"},{name:e}]}}function v(e){var t;let{trendChangeType:n,router:v,statsPeriod:Z,transaction:y,statsData:w,isLoading:_,location:b,start:j,end:S,trendFunctionField:E,disableXAxis:T,disableLegend:k,grid:C,height:L,projects:q,project:R}=e;const N=(0,s.a)(),F=e=>{const{selected:t}=e,s=Object.keys(t).filter((e=>!t[e])),a={...b.query};a[(0,h.P4)(n)]=s;const o={...b,query:a};r.browserHistory.push(o)},z=h.es[n||""],P=w&&null!=y&&y.project&&null!=y&&y.transaction?w[[y.project,y.transaction].join(",")]:void 0,B=null!==(t=null==P?void 0:P.data)&&void 0!==t?t:[],$=(0,h.CE)(b,E),A=(0,h.IO)(b,q,R),O=(0,h.ed)($.field,A.column),D=function(e,t){return[{seriesName:t||"Current",data:e.map((e=>{let[t,n]=e;return{name:1e3*t,value:n.reduce(((e,t)=>{let{count:n}=t;return e+n}),0)}}))}]}(B,O),{smoothedResults:I,minValue:M,maxValue:V}=(0,h.vq)(D,O),X=j?(0,p.hC)(j):null,H=S?(0,p.hC)(S):null,{utc:G}=(0,c.fK)(b.query),U=(0,g.qP)(b.query[(0,h.P4)(n)]).reduce(((e,t)=>(e[t]=!1,e)),{}),Q=k?{show:!1}:{...f(O),selected:U},W=_,K=_,Y=Math.max(V,(null==y?void 0:y.aggregate_range_2)||0,(null==y?void 0:y.aggregate_range_1)||0),J=Math.min(M,(null==y?void 0:y.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==y?void 0:y.aggregate_range_2)||Number.MAX_SAFE_INTEGER),ee=.1*(Y-J),te={tooltip:{valueFormatter:(e,t)=>(0,u.CX)(e,t)},yAxis:{min:Math.max(0,J-ee),max:Y+ee,axisLabel:{color:N.chartLabel,formatter:e=>(0,u.gu)(e,"p50()")}}};return(0,x.tZ)(a.Z,{router:v,period:Z,start:X,end:H,utc:"true"===G,children:e=>{const t=I?I.map((e=>({...e,color:z.default,lineStyle:{opacity:1}}))):[],n=function(e,t,n,r){if(!(r&&t.length&&t[0].data&&t[0].data.length))return[];const s=parseInt(t[0].data[0].name,10),a=parseInt(t[0].data.slice(-1)[0].name,10);if(a<s)return[];const o={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{color:e.textColor,type:"dashed",width:1},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0,color:e.textColor,silent:!0},l={...o,markLine:{...o.markLine},seriesName:"Baseline"},c={...o,markLine:{...o.markLine},seriesName:"Baseline"},p={...o,markLine:{...o.markLine},seriesName:"Period split"},m=.5*(a-s)+s;return l.markLine.data=[[{value:"Past",coord:[s,r.aggregate_range_1]},{coord:[m,r.aggregate_range_1]}]],l.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Past Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_1,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},c.markLine.data=[[{value:"Present",coord:[m,r.aggregate_range_2]},{coord:[a,r.aggregate_range_2]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",`<span class="tooltip-label"><strong>${(0,d.t)("Present Baseline")}</strong></span>`,(0,u.CX)(r.aggregate_range_2,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine={data:[{xAxis:m}],label:{show:!1},lineStyle:{color:e.textColor,type:"solid",width:2},symbol:["none","none"],tooltip:{show:!1},silent:!0},l.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},c.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[l,c,p]}(N,I||[],0,y);return(0,x.BX)(i.Z,{loading:W,reloading:K,children:[(0,x.tZ)(l.Z,{visible:K}),(0,m.Z)({value:(0,x.tZ)(o.w,{height:L,...e,...te,onLegendSelectChanged:F,series:[...t,...n],seriesOptions:{showSymbol:!1},legend:Q,toolBox:{show:!1},grid:null!=C?C:{left:"10px",right:"10px",top:"40px",bottom:"0px"},xAxis:T?{show:!1}:void 0}),fixed:"Duration Chart"})]})}})}v.displayName="Chart";const Z=(0,r.withRouter)(v)}}]);
//# sourceMappingURL=../sourcemaps/app_components_events_searchBar_tsx-app_utils_performance_histogram_utils_tsx-app_views_perfo-4df41c.c9c55f3794514a104a509008f5cad5bc.js.map
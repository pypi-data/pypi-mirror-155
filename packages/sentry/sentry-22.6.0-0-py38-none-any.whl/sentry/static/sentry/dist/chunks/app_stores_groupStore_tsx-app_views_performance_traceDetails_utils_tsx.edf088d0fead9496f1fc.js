"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["app_stores_groupStore_tsx-app_views_performance_traceDetails_utils_tsx","app_views_performance_traceDetails_utils_tsx"],{"./app/components/events/interfaces/spans/constants.tsx":(t,e,s)=>{s.d(e,{DX:()=>n,S5:()=>p,ZR:()=>o,bl:()=>a,h0:()=>r,rz:()=>i,tJ:()=>l});const n=120,i=4,a=n/i,r=20,o=n+r+20+1,p=18,l=10},"./app/components/events/interfaces/spans/utils.tsx":(t,e,s)=>{if(s.d(e,{IG:()=>y,Io:()=>W,PA:()=>V,PC:()=>R,PQ:()=>O,Rr:()=>A,TC:()=>b,ct:()=>L,h_:()=>F,hw:()=>I,is:()=>Z,k9:()=>D,kP:()=>T,ll:()=>z,n0:()=>E,o0:()=>M,rF:()=>k,ro:()=>x,sT:()=>U,vu:()=>q,yk:()=>C,yn:()=>P}),"app"==s.j)var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js");s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js");var i=s("../node_modules/react-router/es/index.js"),a=s("../node_modules/lodash/isNumber.js"),r=s.n(a),o=s("../node_modules/lodash/isString.js"),p=s.n(o),l=s("../node_modules/lodash/set.js"),d=s.n(l),c=s("../node_modules/moment/moment.js"),m=s.n(c),u=s("./app/components/performance/waterfall/treeConnector.tsx"),h=s("./app/types/event.tsx");if("app"==s.j)var f=s("./app/types/utils.tsx");var g=s("./app/utils/performance/vitals/constants.tsx"),S=s("./app/utils/performanceForSentry.tsx"),v=s("./app/components/events/interfaces/spans/constants.tsx");const T=t=>{const e=(0,S.Zz)();if(!e||0===t)return;const s=[10,100,200,300,400,500,600,700,800,900,1001].find((e=>t<=e))||-1;e.setTag("ui.spanCount",t),e.setTag("ui.spanCount.grouped",`<=${s}`)},w=t=>{const{startTimestamp:e,endTimestamp:s}=t;return e>s?{startTimestamp:s,endTimestamp:e}:t};let _;!function(t){t[t.Stable=0]="Stable",t[t.Reversed=1]="Reversed",t[t.Equal=2]="Equal"}(_||(_={}));const y=t=>{const{viewStart:e,viewEnd:s}=t,{startTimestamp:n,endTimestamp:i}=w({startTimestamp:t.traceStartTimestamp,endTimestamp:t.traceEndTimestamp}),a=i-n,r=n+e*a,o=i-(1-s)*a-r;return t=>{if(a<=0)return{type:"TRACE_TIMESTAMPS_EQUAL",isSpanVisibleInView:!0};if(o<=0)return{type:"INVALID_VIEW_WINDOW",isSpanVisibleInView:!0};const{startTimestamp:e,endTimestamp:s}=w(t),n=(t=>{const e=t.startTimestamp,s=t.endTimestamp;return e<s?_.Stable:e===s?_.Equal:_.Reversed})(t),i=(e-r)/o,p=(s-r)/o,l=p>0&&i<1;switch(n){case _.Equal:return{type:"TIMESTAMPS_EQUAL",start:i,width:1,isSpanVisibleInView:p>=0&&i<=1};case _.Reversed:return{type:"TIMESTAMPS_REVERSED",start:i,end:p,isSpanVisibleInView:l};case _.Stable:return{type:"TIMESTAMPS_STABLE",start:i,end:p,isSpanVisibleInView:l};default:return n}}};function E(t){return{trace_id:t.traceID,span_id:t.rootSpanID,parent_span_id:t.parentSpanID,start_timestamp:t.traceStartTimestamp,timestamp:t.traceEndTimestamp,op:t.op,description:t.description,data:{},status:t.rootSpanStatus,hash:t.hash,exclusive_time:t.exclusiveTime}}function b(t){return{start:m().unix(t.start).subtract(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS"),end:m().unix(t.end).add(12,"hours").utc().format("YYYY-MM-DDTHH:mm:ss.SSS")}}function I(t){return"type"in t&&"gap"===t.type}function x(t){if("type"in t){if("orphan"===t.type)return!0;if("gap"===t.type)return t.isOrphan}return!1}function A(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return I(t)?e:t.span_id}function C(t){if(!I(t))return t.op}function V(t){var e;return null==t||null===(e=t.contexts)||void 0===e?void 0:e.trace}function D(t){var e;const s=t.entries.find((t=>t.type===h.UZ.SPANS)),n=null!==(e=null==s?void 0:s.data)&&void 0!==e?e:[],i=V(t),a=i&&i.trace_id||"",o=i&&i.span_id||"",l=i&&i.op||"transaction",c=i&&i.description,m=i&&i.parent_span_id,u=i&&i.status,g=i&&i.hash,S=i&&i.exclusive_time;if(!s||n.length<=0)return{op:l,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:a,rootSpanID:o,rootSpanStatus:u,parentSpanID:m,spans:[],description:c,hash:g,exclusiveTime:S};const v=new Set(n.map((t=>t.span_id)));v.add(o);const T={op:l,childSpans:{},traceStartTimestamp:t.startTimestamp,traceEndTimestamp:t.endTimestamp,traceID:a,rootSpanID:o,rootSpanStatus:u,parentSpanID:m,spans:n,description:c,hash:g,exclusiveTime:S},w=n.reduce(((t,e)=>{var s;let n=e;const i=function(t){return I(t)?"gap-span":t.parent_span_id}(n),a=i&&v.has(i);var l;l=i,p()(l)&&l.length>0&&a||(n.parent_span_id=o,n={type:"orphan",...n}),(0,f.hu)(n.parent_span_id);const c=null!==(s=t.childSpans[n.parent_span_id])&&void 0!==s?s:[];c.push(n),d()(t.childSpans,n.parent_span_id,c),(!t.traceStartTimestamp||n.start_timestamp<t.traceStartTimestamp)&&(t.traceStartTimestamp=n.start_timestamp);const m=r()(n.timestamp);return t.traceEndTimestamp?m&&n.timestamp>t.traceEndTimestamp?(t.traceEndTimestamp=n.timestamp,t):(n.start_timestamp>t.traceEndTimestamp&&(t.traceEndTimestamp=n.start_timestamp),t):m?(t.traceEndTimestamp=n.timestamp,t):(t.traceEndTimestamp=n.start_timestamp,t)}),T);return Object.values(w.childSpans).forEach((t=>{t.sort(j)})),w}function j(t,e){return x(t)&&!x(e)?1:!x(t)&&x(e)||t.start_timestamp<e.start_timestamp?-1:t.start_timestamp===e.start_timestamp?0:1}function P(t){return"number"!=typeof t&&"orphan"===(null==t?void 0:t.type)}function F(t){return P(t)?t.depth:t}function R(t){var e;const s=null===(e=t.sdk)||void 0===e?void 0:e.name;return!!s&&["sentry.javascript.browser","sentry.javascript.react","sentry.javascript.gatsby","sentry.javascript.ember","sentry.javascript.vue","sentry.javascript.angular","sentry.javascript.nextjs","sentry.javascript.electron"].includes(s.toLowerCase())}const M="app"==s.j?["mark","paint"]:null;function $(t){const e=Object.keys(t);return Object.values(g.r9).filter((t=>e.includes(t.slug))).some((e=>{const{value:s}=t[e.slug];return"number"==typeof s&&"number"==typeof e.poorThreshold&&s>=e.poorThreshold}))}function Z(t,e){if(!t.measurements)return new Map;const s=Object.keys(t.measurements).filter((t=>t.startsWith("mark."))).map((e=>{const s=e.slice("mark.".length),n=t.measurements[s];return{name:e,timestamp:t.measurements[e].value,value:n?n.value:void 0}})),n=new Map;return s.forEach((t=>{const s=t.name.slice("mark.".length),i=t.value,a=e({startTimestamp:t.timestamp,endTimestamp:t.timestamp});if("TIMESTAMPS_EQUAL"!==a.type)return;const r=Math.round(100*a.start);for(const[e]of n)if(Math.abs(e-r)<=v.tJ){const a=n.get(e);return a.marks={...a.marks,[s]:{value:i,timestamp:t.timestamp}},a.failedThreshold||(a.failedThreshold=$(a.marks)),void n.set(e,a)}const o={[s]:{value:i,timestamp:t.timestamp}};n.set(r,{marks:o,failedThreshold:$(o)})})),n}function q(t,e){const s=e({startTimestamp:t,endTimestamp:t});switch(s.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:s.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:s.start,width:1e-5,isSpanVisibleInView:s.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:s.start,width:s.end-s.start,isSpanVisibleInView:s.isSpanVisibleInView};default:return s}}function k(t,e,s){return n=>{n.preventDefault();const a=L(t);e(a),i.browserHistory.push({...s,hash:a})}}function L(t){return`#span-${t}`}function O(t,e){return void 0!==e?`${t.op}.${t.description}.${e}`:`${t.op}.${t.description}`}function z(t){return t.reduce(((t,e)=>{const{start_timestamp:s,timestamp:n}=e.span;let i=t.startTimestamp,a=t.endTimestamp;return s<i&&(i=s),a<n&&(a=n),{startTimestamp:i,endTimestamp:a}}),{startTimestamp:t[0].span.start_timestamp,endTimestamp:t[0].span.timestamp})}function U(t,e){const{startTimestamp:s,endTimestamp:n}=z(t),i=e({startTimestamp:s,endTimestamp:n});switch(i.type){case"TRACE_TIMESTAMPS_EQUAL":case"INVALID_VIEW_WINDOW":return{warning:void 0,left:void 0,width:void 0,isSpanVisibleInView:i.isSpanVisibleInView};case"TIMESTAMPS_EQUAL":return{warning:void 0,left:i.start,width:1e-5,isSpanVisibleInView:i.isSpanVisibleInView};case"TIMESTAMPS_REVERSED":case"TIMESTAMPS_STABLE":return{warning:void 0,left:i.start,width:i.end-i.start,isSpanVisibleInView:i.isSpanVisibleInView};default:return i}}class W{constructor(){(0,n.Z)(this,"spanDepthsInView",void 0),(0,n.Z)(this,"treeDepthSum",void 0),(0,n.Z)(this,"length",void 0),(0,n.Z)(this,"isRootSpanInView",void 0),this.spanDepthsInView=new Map,this.treeDepthSum=0,this.length=0,this.isRootSpanInView=!0}addSpan(t,e){return!this.spanDepthsInView.has(t)&&(this.spanDepthsInView.set(t,e),this.length+=1,this.treeDepthSum+=e,0===e&&(this.isRootSpanInView=!0),!0)}removeSpan(t){if(!this.spanDepthsInView.has(t))return!1;const e=this.spanDepthsInView.get(t);return this.spanDepthsInView.delete(t),this.length-=1,this.treeDepthSum-=e,0===e&&(this.isRootSpanInView=!1),!0}has(t){return this.spanDepthsInView.has(t)}getScrollVal(){return this.isRootSpanInView?0:Math.round(this.treeDepthSum/this.length)*(u.Ll/2)-u.Y9/2}}},"./app/components/performance/waterfall/treeConnector.tsx":(t,e,s)=>{s.d(e,{DN:()=>c,Ll:()=>l,U1:()=>m,UV:()=>d,Y9:()=>p,jd:()=>h,rw:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=s("./app/components/performance/waterfall/constants.tsx"),a=s("./app/components/performance/waterfall/utils.tsx"),r=s("./app/icons/index.tsx"),o=s("./app/styles/space.tsx");const p=30,l=p+16,d="app"==s.j?(0,n.Z)("div",{target:"e1xp7sks4"})("height:250%;border-left:2px ",(t=>t.orphanBranch?"dashed":"solid")," ",(t=>t.theme.border),";position:absolute;top:0;"):null,c=(0,n.Z)("div",{target:"e1xp7sks3"})("height:",(t=>t.isLast?i.d/2+1:i.d),"px;width:100%;border-left:",(t=>`2px ${t.orphanBranch?"dashed":"solid"} ${t.theme.border};`),";position:absolute;top:0;",(t=>t.isLast?`\n      border-bottom: 2px ${t.orphanBranch?"dashed":"solid"} ${t.theme.border};\n      border-bottom-left-radius: ${t.theme.borderRadius};`:`\n      &:before {\n        content: '';\n        height: 2px;\n        left: -2px;\n        border-bottom: 2px ${t.orphanBranch?"dashed":"solid"} ${t.theme.border};\n        width: calc(100% - 2px);\n        position: absolute;\n        bottom: calc(50% - 1px);\n      }`)," &:after{content:'';background-color:",(t=>t.theme.border),";border-radius:50%;height:6px;width:6px;position:absolute;right:0;top:",i.d/2-3,"px;}"),m=(0,n.Z)("div",{target:"e1xp7sks2"})("height:16px;white-space:nowrap;min-width:30px;display:flex;align-items:center;justify-content:center;border-radius:99px;padding:0px ",(0,o.Z)(.5),";transition:all 0.15s ease-in-out;font-size:10px;line-height:0;z-index:1;box-shadow:",(t=>t.theme.dropShadowLightest),";",(t=>(0,a.uu)(t)),";"),u=(0,n.Z)("div",{target:"e1xp7sks1"})("position:relative;height:",i.d,"px;width:",40,"px;min-width:",40,"px;margin-right:",(0,o.Z)(1),";z-index:",(t=>t.theme.zIndex.traceView.spanTreeToggler),";display:flex;justify-content:flex-end;align-items:center;"),h=(0,n.Z)(r.g6,{target:"e1xp7sks0"})("width:7px;margin-left:",(0,o.Z)(.25),";")},"./app/stores/groupStore.tsx":(t,e,s)=>{s.d(e,{Z:()=>S});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.array.includes.js"),s("../node_modules/lodash/isArray.js")),a=s.n(i),r=s("../node_modules/lodash/isUndefined.js"),o=s.n(r),p=s("../node_modules/reflux/src/index.js"),l=s("./app/actions/groupActions.tsx"),d=s("./app/locale.tsx"),c=s("./app/stores/indicatorStore.tsx"),m=s("./app/utils/makeSafeRefluxStore.ts");function u(t,e){c.Z.addMessage(t,e,{duration:4e3})}class h{constructor(){(0,n.Z)(this,"changes",[])}getForItem(t){return this.changes.filter((e=>e[1]===t))}push(t,e,s){this.changes.push([t,e,s])}remove(t,e){this.changes=this.changes.filter((s=>s[0]!==t||s[1]!==e))}forEach(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];this.changes.forEach.apply(this.changes,e)}}const f={listenables:[l.Z],pendingChanges:new h,items:[],statuses:{},init(){this.reset()},reset(){this.pendingChanges=new h,this.items=[],this.statuses={}},loadInitialData(t){this.reset();const e=new Set;t.forEach((t=>{e.add(t.id),this.items.push(t)})),this.trigger(e)},add(t){a()(t)||(t=[t]);const e={},s=new Set;t.forEach((t=>{e[t.id]=t,s.add(t.id)})),this.items.forEach(((t,s)=>{e[t.id]&&(this.items[s]={...t,...e[t.id]},delete e[t.id])}));for(const t in e)this.items.push(e[t]);this.trigger(s)},remove(t){this.items=this.items.filter((e=>!t.includes(e.id))),this.trigger(new Set(t))},addStatus(t,e){o()(this.statuses[t])&&(this.statuses[t]={}),this.statuses[t][e]=!0},clearStatus(t,e){o()(this.statuses[t])||(this.statuses[t][e]=!1)},hasStatus(t,e){return!o()(this.statuses[t])&&(this.statuses[t][e]||!1)},indexOfActivity(t,e){const s=this.get(t);if(!s)return-1;for(let t=0;t<s.activity.length;t++)if(s.activity[t].id===e)return t;return-1},addActivity(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const n=this.get(t);n&&(-1===s?n.activity.unshift(e):n.activity.splice(s,0,e),"note"===e.type&&n.numComments++,this.trigger(new Set([t])))},updateActivity(t,e,s){const n=this.get(t);if(!n)return;const i=this.indexOfActivity(t,e);-1!==i&&(n.activity[i].data=Object.assign(n.activity[i].data,s),this.trigger(new Set([n.id])))},removeActivity(t,e){const s=this.get(t);if(!s)return-1;const n=this.indexOfActivity(s.id,e);return-1===n?-1:("note"===s.activity.splice(n,1)[0].type&&s.numComments--,this.trigger(new Set([s.id])),n)},get(t){const e=[];this.pendingChanges.forEach((s=>{s.id===t&&e.push(s)}));for(let s=0;s<this.items.length;s++)if(this.items[s].id===t){let t=this.items[s];if(e.length){t={...t};for(let s=0;s<e.length;s++)t={...t,...e[s].params}}return t}},getAllItemIds(){return this.items.map((t=>t.id))},getAllItems(){const t={};return this.pendingChanges.forEach((e=>{o()(t[e.id])&&(t[e.id]=[]),t[e.id].push(e)})),this.items.map((e=>{let s=e;return o()(t[e.id])||(s={...s},t[e.id].forEach((t=>{s={...s,...t.params}}))),s}))},onAssignTo(t,e,s){this.addStatus(e,"assignTo"),this.trigger(new Set([e]))},onAssignToError(t,e,s){this.clearStatus(e,"assignTo"),u((0,d.t)("Unable to change assignee. Please try again."),"error")},onAssignToSuccess(t,e,s){const n=this.get(e);n&&(n.assignedTo=s.assignedTo,this.clearStatus(e,"assignTo"),this.trigger(new Set([e])))},onDelete(t,e){(e=this._itemIdsOrAll(e)).forEach((t=>{this.addStatus(t,"delete")})),this.trigger(new Set(e))},onDeleteError(t,e,s){u((0,d.t)("Unable to delete events. Please try again."),"error"),e&&(e.forEach((t=>{this.clearStatus(t,"delete")})),this.trigger(new Set(e)))},onDeleteSuccess(t,e,s){if((e=this._itemIdsOrAll(e)).length>1)u((0,d.t)(`Deleted ${e.length} Issues`),"success");else{const t=e.map((t=>{var e;return null===(e=g.get(t))||void 0===e?void 0:e.shortId})).join("");u((0,d.t)(`Deleted ${t}`),"success")}const n=new Set(e);e.forEach((t=>{delete this.statuses[t],this.clearStatus(t,"delete")})),this.items=this.items.filter((t=>!n.has(t.id))),this.trigger(new Set(e))},onDiscard(t,e){this.addStatus(e,"discard"),this.trigger(new Set([e]))},onDiscardError(t,e,s){this.clearStatus(e,"discard"),u((0,d.t)("Unable to discard event. Please try again."),"error"),this.trigger(new Set([e]))},onDiscardSuccess(t,e,s){delete this.statuses[e],this.clearStatus(e,"discard"),this.items=this.items.filter((t=>t.id!==e)),u((0,d.t)("Similar events will be filtered and discarded."),"success"),this.trigger(new Set([e]))},onMerge(t,e){(e=this._itemIdsOrAll(e)).forEach((t=>{this.addStatus(t,"merge")})),this.trigger(new Set(e))},onMergeError(t,e,s){(e=this._itemIdsOrAll(e)).forEach((t=>{this.clearStatus(t,"merge")})),u((0,d.t)("Unable to merge events. Please try again."),"error"),this.trigger(new Set(e))},onMergeSuccess(t,e,s){(e=this._itemIdsOrAll(e)).forEach((t=>{this.clearStatus(t,"merge")}));const n=new Set(e);this.items=this.items.filter((t=>!n.has(t.id)||s&&s.merge&&t.id===s.merge.parent)),u((0,d.t)(`Merged ${e.length} Issues`),"success"),this.trigger(new Set(e))},_itemIdsOrAll(t){return o()(t)&&(t=this.items.map((t=>t.id))),t},onUpdate(t,e,s){(e=this._itemIdsOrAll(e)).forEach((e=>{this.addStatus(e,"update"),this.pendingChanges.push(t,e,s)})),this.trigger(new Set(e))},onUpdateError(t,e,s,n){e=this._itemIdsOrAll(e),this.pendingChanges.remove(t),e.forEach((t=>{this.clearStatus(t,"update")})),n||u((0,d.t)("Unable to update events. Please try again."),"error"),this.trigger(new Set(e))},onUpdateSuccess(t,e,s){e=this._itemIdsOrAll(e),this.items.forEach(((t,n)=>{-1!==e.indexOf(t.id)&&(this.items[n]={...t,...s},this.clearStatus(t.id,"update"))})),this.pendingChanges.remove(t),this.trigger(new Set(e))},onPopulateStats(t,e){const s=e.reduce(((t,e)=>(t[e.id]=e,t)),{});this.items.forEach(((e,n)=>{t.includes(e.id)&&(this.items[n]={...e,...s[e.id]})})),this.trigger(new Set(this.items.map((t=>t.id))))},onPopulateReleases(t,e){this.items.forEach(((s,n)=>{s.id===t&&(this.items[n]={...s,...e})})),this.trigger(new Set([t]))}},g=(0,p.createStore)((0,m.Y)(f)),S=g},"./app/utils/performance/quickTrace/utils.tsx":(t,e,s)=>{s.d(e,{$J:()=>T,Ci:()=>E,R8:()=>f,S2:()=>w,_Z:()=>v,eF:()=>S,eW:()=>u,hp:()=>c,q2:()=>m,xB:()=>_,y3:()=>y}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.error.cause.js");var n=s("../node_modules/lodash/omit.js"),i=s.n(n),a=s("../node_modules/moment-timezone/index.js"),r=s.n(a),o=s("./app/components/events/interfaces/spans/utils.tsx"),p=s("./app/constants/pageFilters.tsx"),l=s("./app/utils/analytics.tsx"),d=s("./app/utils/discover/eventView.tsx");function c(t){return"transaction"===t.type}function m(t,e){return c(e)?t.event_id===e.id:void 0!==t.errors&&t.errors.some((t=>t.event_id===e.id))}function u(t,e){const s=[],n=[],i=[{event:e,path:[]}];for(;i.length;){const e=i.shift();if(m(e.event,t)){for(const t of e.path)s.push(t);n.push(e.event)}else{const t=[...e.path,h(e.event)];for(const s of e.event.children)i.push({event:s,path:t})}}if(!n.length)throw new Error("No relevant path exists!");for(;n.length;){const t=n.shift();for(const e of t.children)n.push(e);s.push(h(t))}return s}function h(t){return i()(t,["children"])}function f(t,e,s){var n,i,a;const{type:r,trace:o}=t;if("empty"===r||null===o)throw new Error("Current event not in trace navigator!");const p="full"===r,d=null!==(n=o.find((t=>m(t,e))))&&void 0!==n?n:null;if(null===d)throw new Error("Current event not in trace navigator!");const c=d.parent_event_id&&null!==(i=o.find((t=>t.event_id===d.parent_event_id)))&&void 0!==i?i:null,u=null!==(a=o.find((t=>t.event_id!==d.event_id&&t.event_id!==(null==c?void 0:c.event_id)&&0===t.generation)))&&void 0!==a?a:null,h=p?[]:null,f=[],S=p?[]:null,v=new Set;return o.forEach((t=>{v.add(t.project_id),(t=>t.parent_event_id===d.event_id)(t)?f.push(t):p&&((t=>null!==d.generation&&null!==t.generation&&t.generation>0&&d.generation-1>t.generation)(t)?null==h||h.push(t):(t=>null!==d.generation&&null!==t.generation&&d.generation+1<t.generation)(t)&&(null==S||S.push(t)))})),p&&v.size>1&&function(t,e){(0,l.ec)({eventKey:"quick_trace.connected_services",eventName:"Quick Trace: Connected Services",organization_id:parseInt(t.id,10),projects:e})}(s,v.size),{root:u,ancestors:null===h?null:g(h),parent:c,current:d,children:g(f),descendants:null===S?null:g(S)}}function g(t){return t.sort(((t,e)=>e["transaction.duration"]-t["transaction.duration"]))}function S(t){let{eventView:e,location:s}=t;return i()(e.getEventsAPIPayload(s),["field","sort","per_page"])}function v(t){let{start:e,end:s,statsPeriod:n}=t;return d.ZP.fromSavedQuery({id:void 0,version:2,name:"",fields:["transaction.duration"],projects:[p.mP],query:"",environment:[],start:e,end:s,range:null!=n?n:void 0})}function T(t){const e=c(t)?t.startTimestamp:r()(t.dateReceived?t.dateReceived:t.dateCreated).valueOf()/1e3,s=c(t)?t.endTimestamp:e;return(0,o.TC)({start:e,end:s})}function w(t,e,s){let n=s;const i=[t];for(;i.length;){const t=i.pop();for(const e of t.children)i.push(e);n=e(n,t)}return n}function _(t,e){return w(t,((t,s)=>(e(s)&&t.push(s),t)),[])}function y(t){return Boolean(t.event_id)}function E(t){return Boolean(t.event_id)}},"./app/utils/performance/vitals/constants.tsx":(t,e,s)=>{s.d(e,{AR:()=>o,TT:()=>r,r9:()=>a});var n=s("./app/locale.tsx"),i=s("./app/utils/discover/fields.tsx");const a={[i.Zl.FP]:{slug:"fp",name:(0,n.t)("First Paint"),acronym:"FP",description:(0,n.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,i.Cq)(i.Zl.FP)},[i.Zl.FCP]:{slug:"fcp",name:(0,n.t)("First Contentful Paint"),acronym:"FCP",description:(0,n.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,i.Cq)(i.Zl.FCP)},[i.Zl.LCP]:{slug:"lcp",name:(0,n.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,n.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,i.Cq)(i.Zl.LCP)},[i.Zl.FID]:{slug:"fid",name:(0,n.t)("First Input Delay"),acronym:"FID",description:(0,n.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,i.Cq)(i.Zl.FID)},[i.Zl.CLS]:{slug:"cls",name:(0,n.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,n.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,i.Cq)(i.Zl.CLS)},[i.Zl.TTFB]:{slug:"ttfb",name:(0,n.t)("Time to First Byte"),acronym:"TTFB",description:(0,n.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,i.Cq)(i.Zl.TTFB)},[i.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,n.t)("Request Time"),acronym:"RT",description:(0,n.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,i.Cq)(i.Zl.RequestTime)}},r={[i.$n.AppStartCold]:{slug:"app_start_cold",name:(0,n.t)("App Start Cold"),description:(0,n.t)("Cold start is a measure of the application start up time from scratch."),type:(0,i.Cq)(i.$n.AppStartCold)},[i.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,n.t)("App Start Warm"),description:(0,n.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,i.Cq)(i.$n.AppStartWarm)},[i.$n.FramesTotal]:{slug:"frames_total",name:(0,n.t)("Total Frames"),description:(0,n.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,i.Cq)(i.$n.FramesTotal)},[i.$n.FramesSlow]:{slug:"frames_slow",name:(0,n.t)("Slow Frames"),description:(0,n.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,i.Cq)(i.$n.FramesSlow)},[i.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,n.t)("Frozen Frames"),description:(0,n.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,i.Cq)(i.$n.FramesFrozen)},[i.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,n.t)("Slow Frames Rate"),description:(0,n.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,i.Cq)(i.$n.FramesSlowRate)},[i.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,n.t)("Frozen Frames Rate"),description:(0,n.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,i.Cq)(i.$n.FramesFrozenRate)},[i.$n.StallCount]:{slug:"stall_count",name:(0,n.t)("Stalls"),description:(0,n.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,i.Cq)(i.$n.StallCount)},[i.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,n.t)("Total Stall Time"),description:(0,n.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,i.Cq)(i.$n.StallTotalTime)},[i.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,n.t)("Longest Stall Time"),description:(0,n.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,i.Cq)(i.$n.StallLongestTime)},[i.$n.StallPercentage]:{slug:"stall_percentage",name:(0,n.t)("Stall Percentage"),description:(0,n.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,i.Cq)(i.$n.StallPercentage)}};let o;!function(t){t.CHROME="Chrome",t.EDGE="Edge",t.OPERA="Opera",t.FIREFOX="Firefox",t.SAFARI="Safari",t.IE="IE"}(o||(o={}))},"./app/views/performance/traceDetails/utils.tsx":(t,e,s)=>{s.d(e,{Rg:()=>r,YA:()=>a,uM:()=>o}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("./app/constants/pageFilters.tsx"),i=s("./app/utils/performance/quickTrace/utils.tsx");function a(t,e,s,i){const{start:a,end:r,statsPeriod:o}=s;return{pathname:`/organizations/${t.slug}/performance/trace/${e}/`,query:{...i,statsPeriod:o,[n.V.PAGE_START]:a,[n.V.PAGE_END]:r}}}function r(t){const e={projects:new Set,errors:new Set,transactions:new Set,startTimestamp:Number.MAX_SAFE_INTEGER,endTimestamp:0,maxGeneration:0};return t.reduce(((t,e)=>(0,i.S2)(e,((t,e)=>{for(const n of null!==(s=e.errors)&&void 0!==s?s:[]){var s;t.errors.add(n.event_id)}return t.transactions.add(e.event_id),t.projects.add(e.project_slug),t.startTimestamp=Math.min(t.startTimestamp,e.start_timestamp),t.endTimestamp=Math.max(t.endTimestamp,e.timestamp),t.maxGeneration=Math.max(t.maxGeneration,e.generation),t}),t)),e)}function o(t){return null===t.parent_span_id}}}]);
//# sourceMappingURL=../sourcemaps/app_stores_groupStore_tsx-app_views_performance_traceDetails_utils_tsx.27767b44cdb1677c08d248e13bda5951.js.map
"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[4212],{24212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var a=n(9622),s=n(92238),c=n(87859),d=n(66711),o=n(96936),i=n(59985);const r="jp-mod-searchable";var l;!function(e){e.search="documentsearch:start",e.searchAndReplace="documentsearch:startWithReplace",e.findNext="documentsearch:highlightNext",e.findPrevious="documentsearch:highlightPrevious"}(l||(l={}));const h={id:"@jupyterlab/documentsearch:labShellWidgetListener",requires:[a.ILabShell,c.ISearchProviderRegistry],autoStart:!0,activate:(e,t,n)=>{const a=e=>{e&&(n.hasProvider(e)?e.addClass(r):e.removeClass(r))};n.changed.connect((()=>a(t.activeWidget))),t.activeChanged.connect(((e,t)=>{const n=t.oldValue;n&&n.removeClass(r),a(t.newValue)}))}},u={id:"@jupyterlab/documentsearch-extension:plugin",provides:c.ISearchProviderRegistry,requires:[o.ITranslator],optional:[s.ICommandPalette,d.ISettingRegistry],autoStart:!0,activate:(e,t,n,a)=>{const d=t.load("jupyterlab");let o=500;const r=new c.SearchProviderRegistry(t),h=new Map;if(a){const t=a.load(u.id),n=e=>{o=e.get("searchDebounceTime").composite};Promise.all([t,e.restored]).then((([e])=>{n(e),e.changed.connect((e=>{n(e)}))})).catch((e=>{console.error(e.message)}))}const m=()=>{const t=e.shell.currentWidget;return!!t&&r.hasProvider(t)},g=n=>{if(!n)return;const a=n.id;let d=h.get(a);if(!d){const s=r.getProvider(n);if(!s)return;const i=new c.SearchDocumentModel(s,o),u=new c.SearchDocumentView(i,t);h.set(a,u),[l.findNext,l.findPrevious].forEach((t=>{e.commands.notifyCommandChanged(t)})),u.closed.connect((()=>{n.isDisposed||n.activate()})),u.disposed.connect((()=>{n.isDisposed||n.activate(),h.delete(a),[l.findNext,l.findPrevious].forEach((t=>{e.commands.notifyCommandChanged(t)}))})),n.disposed.connect((()=>{u.dispose(),i.dispose(),s.dispose()})),d=u}return d.isAttached||(i.Widget.attach(d,n.node),n instanceof s.MainAreaWidget&&(d.node.style.top=`${n.toolbar.node.getBoundingClientRect().height+n.contentHeader.node.getBoundingClientRect().height}px`),d.model.searchExpression&&d.model.refresh()),d};return e.commands.addCommand(l.search,{label:d.__("Find…"),isEnabled:m,execute:t=>{const n=g(e.shell.currentWidget);if(n){const e=t.searchText;e&&n.setSearchText(e),n.focusSearchInput()}}}),e.commands.addCommand(l.searchAndReplace,{label:d.__("Find and Replace…"),isEnabled:m,execute:t=>{const n=g(e.shell.currentWidget);if(n){const e=t.searchText;e&&n.setSearchText(e);const a=t.replaceText;a&&n.setReplaceText(a),n.showReplace(),n.focusSearchInput()}}}),e.commands.addCommand(l.findNext,{label:d.__("Find Next"),isEnabled:()=>!!e.shell.currentWidget&&h.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;n&&await(null===(t=h.get(n.id))||void 0===t?void 0:t.model.highlightNext())}}),e.commands.addCommand(l.findPrevious,{label:d.__("Find Previous"),isEnabled:()=>!!e.shell.currentWidget&&h.has(e.shell.currentWidget.id),execute:async()=>{var t;const n=e.shell.currentWidget;n&&await(null===(t=h.get(n.id))||void 0===t?void 0:t.model.highlightPrevious())}}),n&&[l.search,l.findNext,l.findPrevious].forEach((e=>{n.addItem({command:e,category:d.__("Main Area")})})),r}},m=[u,h]}}]);
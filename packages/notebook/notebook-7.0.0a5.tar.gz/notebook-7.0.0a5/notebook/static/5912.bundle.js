"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[5912],{15912:(e,t,n)=>{n.r(t),n.d(t,{addCommands:()=>y,default:()=>f});var a,r=n(9622),i=n(92238),s=n(48328),o=n(33653),m=n(59594),c=n(24872),d=n(66711),l=n(10765),h=n(96936),u=n(43306),g=n(81734),_=n(59985);!function(e){e.createNew="terminal:create-new",e.open="terminal:open",e.refresh="terminal:refresh",e.increaseFont="terminal:increase-font",e.decreaseFont="terminal:decrease-font",e.setTheme="terminal:set-theme",e.shutdown="terminal:shut-down"}(a||(a={}));const w={activate:function(e,t,n,r,s,o,m,c,d){const l=n.load("jupyterlab"),{serviceManager:h,commands:f}=e,T=l.__("Terminal"),b=new i.WidgetTracker({namespace:"terminal"});if(!h.terminals.isAvailable())return console.warn("Disabling terminals plugin because they are not available on the server"),b;o&&o.restore(b,{command:a.createNew,args:e=>({name:e.content.session.name}),name:e=>e.content.session.name});const I={};function C(e){Object.keys(e.composite).forEach((t=>{I[t]=e.composite[t]}))}function M(){b.forEach((e=>function(e){const t=e.content;t&&Object.keys(I).forEach((e=>{t.setOption(e,I[e])}))}(e)))}if(t.load(w.id).then((e=>{C(e),M(),e.changed.connect((()=>{C(e),M()}))})).catch(p.showErrorMessage),null==c||c.themeChanged.connect(((e,t)=>{b.forEach((e=>{const t=e.content;"inherit"===t.getOption("theme")&&t.setOption("theme","inherit")}))})),y(e,b,t,n,I),m){const e=new _.Menu({commands:f});e.title.label=l._p("menu","Terminal Theme"),e.addItem({command:a.setTheme,args:{theme:"inherit",displayName:l.__("Inherit"),isPalette:!1}}),e.addItem({command:a.setTheme,args:{theme:"light",displayName:l.__("Light"),isPalette:!1}}),e.addItem({command:a.setTheme,args:{theme:"dark",displayName:l.__("Dark"),isPalette:!1}}),m.settingsMenu.addGroup([{command:a.increaseFont},{command:a.decreaseFont},{type:"submenu",submenu:e}],40),m.fileMenu.newMenu.addItem({command:a.createNew,rank:20}),m.fileMenu.closeAndCleaners.add({id:a.shutdown,isEnabled:e=>null!==b.currentWidget&&b.has(e)})}return r&&([a.createNew,a.refresh,a.increaseFont,a.decreaseFont].forEach((e=>{r.addItem({command:e,category:T,args:{isPalette:!0}})})),r.addItem({command:a.setTheme,category:T,args:{theme:"inherit",displayName:l.__("Inherit"),isPalette:!0}}),r.addItem({command:a.setTheme,category:T,args:{theme:"light",displayName:l.__("Light"),isPalette:!0}}),r.addItem({command:a.setTheme,category:T,args:{theme:"dark",displayName:l.__("Dark"),isPalette:!0}})),s&&s.add({command:a.createNew,category:l.__("Other"),rank:0}),d&&function(e,t,n){const a=n.load("jupyterlab"),r=t.serviceManager.terminals;e.add({name:a.__("Terminals"),running:()=>(0,g.toArray)(r.running()).map((e=>new i(e))),shutdownAll:()=>r.shutdownAll(),refreshRunning:()=>r.refreshRunning(),runningChanged:r.runningChanged,shutdownLabel:a.__("Shut Down"),shutdownAllLabel:a.__("Shut Down All"),shutdownAllConfirmationText:a.__("Are you sure you want to permanently shut down all running terminals?")});class i{constructor(e){this._model=e}open(){t.commands.execute("terminal:open",{name:this._model.name})}icon(){return u.terminalIcon}label(){return`terminals/${this._model.name}`}shutdown(){return r.shutdown(this._model.name)}}}(d,e,n),b},id:"@jupyterlab/terminal-extension:plugin",provides:l.ITerminalTracker,requires:[d.ISettingRegistry,h.ITranslator],optional:[i.ICommandPalette,s.ILauncher,r.ILayoutRestorer,o.IMainMenu,i.IThemeManager,m.IRunningSessionManagers],autoStart:!0},f=w;function y(e,t,n,r,s){const o=r.load("jupyterlab"),{commands:m,serviceManager:d}=e;m.addCommand(a.createNew,{label:e=>e.isPalette?o.__("New Terminal"):o.__("Terminal"),caption:o.__("Start a new terminal session"),icon:e=>e.isPalette?void 0:u.terminalIcon,execute:async n=>{let a;try{a=(await p.ensureWidget()).Terminal}catch(e){return void p.showErrorMessage(e)}const o=n.name,m=n.cwd;let l;l=o?(await c.TerminalAPI.listRunning()).map((e=>e.name)).includes(o)?d.terminals.connectTo({model:{name:o}}):await d.terminals.startNew({name:o,cwd:m}):await d.terminals.startNew({cwd:m});const h=new a(l,s,r);h.title.icon=u.terminalIcon,h.title.label="...";const g=new i.MainAreaWidget({content:h});return e.shell.add(g,"main",{type:"Terminal"}),t.add(g),e.shell.activateById(g.id),g}}),m.addCommand(a.open,{label:o.__("Open a terminal by its `name`."),execute:n=>{const r=n.name,i=t.find((e=>e.content.session.name===r||!1));if(!i)return m.execute(a.createNew,{name:r});e.shell.activateById(i.id)}}),m.addCommand(a.refresh,{label:o.__("Refresh Terminal"),caption:o.__("Refresh the current terminal session"),execute:async()=>{const n=t.currentWidget;if(n){e.shell.activateById(n.id);try{await n.content.refresh(),n&&n.content.activate()}catch(e){p.showErrorMessage(e)}}},isEnabled:()=>null!==t.currentWidget}),m.addCommand(a.shutdown,{label:o.__("Shutdown Terminal"),execute:()=>{const e=t.currentWidget;if(e)return e.content.session.shutdown()},isEnabled:()=>null!==t.currentWidget}),m.addCommand(a.increaseFont,{label:o.__("Increase Terminal Font Size"),execute:async()=>{const{fontSize:e}=s;if(e&&e<72)try{await n.set(w.id,"fontSize",e+1)}catch(e){p.showErrorMessage(e)}}}),m.addCommand(a.decreaseFont,{label:o.__("Decrease Terminal Font Size"),execute:async()=>{const{fontSize:e}=s;if(e&&e>9)try{await n.set(w.id,"fontSize",e-1)}catch(e){p.showErrorMessage(e)}}});const l={inherit:o.__("Inherit"),light:o.__("Light"),dark:o.__("Dark")};m.addCommand(a.setTheme,{label:e=>{if(void 0===e.theme)return o.__("Set terminal theme to the provided `theme`.");const t=e.theme,n=t in l?l[t]:o.__(t[0].toUpperCase()+t.slice(1));return e.isPalette?o.__("Use Terminal Theme: %1",n):n},caption:o.__("Set the terminal theme"),isToggled:e=>{const{theme:t}=s;return e.theme===t},execute:async e=>{const t=e.theme;try{await n.set(w.id,"theme",t),m.notifyCommandChanged(a.setTheme)}catch(e){console.log(e),p.showErrorMessage(e)}}})}var p;!function(e){e.ensureWidget=function(){return e.widgetReady||(e.widgetReady=Promise.all([n.e(753),n.e(4547),n.e(2404),n.e(2480)]).then(n.bind(n,40753))),e.widgetReady},e.showErrorMessage=function(e){console.error(`Failed to configure ${w.id}: ${e.message}`)}}(p||(p={}))}}]);
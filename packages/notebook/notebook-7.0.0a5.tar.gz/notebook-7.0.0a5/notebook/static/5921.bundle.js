"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[5921],{75921:(e,t,n)=>{n.r(t),n.d(t,{ITableOfContentsRegistry:()=>h,ITableOfContentsTracker:()=>d,TableOfContents:()=>g,TableOfContentsFactory:()=>r,TableOfContentsItem:()=>v,TableOfContentsModel:()=>p,TableOfContentsPanel:()=>w,TableOfContentsRegistry:()=>x,TableOfContentsTracker:()=>y,TableOfContentsTree:()=>C,TableOfContentsUtils:()=>i,TableOfContentsWidget:()=>b});var s={};n.r(s),n.d(s,{getHeadingId:()=>R,getHeadings:()=>I,isMarkdown:()=>D});var i={};n.r(i),n.d(i,{Markdown:()=>s,NUMBERING_CLASS:()=>H,addPrefix:()=>j,clearNumbering:()=>M,getHTMLHeadings:()=>O,getPrefix:()=>E,isHTML:()=>A});var a=n(50354);class r{constructor(e){this.tracker=e}isApplicable(e){return!!this.tracker.has(e)}createNew(e,t){const n=this._createNew(e,t),s=e.context,i=()=>{n.refresh().catch((e=>{console.error("Failed to update the table of contents.",e)}))},r=new a.ActivityMonitor({signal:s.model.contentChanged,timeout:1e3});r.activityStopped.connect(i);const o=()=>{n.title=a.PathExt.basename(s.localPath)};return s.pathChanged.connect(o),s.ready.then((()=>{o(),i()})).catch((e=>{console.error(`Failed to initiate headings for ${s.localPath}.`)})),e.disposed.connect((()=>{r.activityStopped.disconnect(i),s.pathChanged.disconnect(o)})),n}}var o=n(43306),l=n(74547),c=n(58646);const h=new l.Token("@jupyterlab/toc:ITableOfContentsRegistry"),d=new l.Token("@jupyterlab/toc:ITableOfContentsTracker");var g,u;!function(e){e.defaultConfig={baseNumbering:1,maximalDepth:4,numberingH1:!0,numberHeaders:!1,includeOutput:!0,syncCollapseState:!1}}(g||(g={}));class p extends o.VDomModel{constructor(e,t){super(),this.widget=e,this._activeHeading=null,this._activeHeadingChanged=new c.Signal(this),this._collapseChanged=new c.Signal(this),this._configuration=null!=t?t:Object.assign({},g.defaultConfig),this._headings=new Array,this._headingsChanged=new c.Signal(this),this._isActive=!1,this._isRefreshing=!1,this._needsRefreshing=!1}get activeHeading(){return this._activeHeading}set activeHeading(e){this._activeHeading!==e&&(this._activeHeading=e,this.stateChanged.emit(),this._activeHeadingChanged.emit(e))}get activeHeadingChanged(){return this._activeHeadingChanged}get collapseChanged(){return this._collapseChanged}get configuration(){return this._configuration}get headings(){return this._headings}get headingsChanged(){return this._headingsChanged}get isActive(){return this._isActive}set isActive(e){this._isActive=e,this._isActive&&!this.isAlwaysActive&&this.refresh().catch((e=>{console.error("Failed to refresh ToC model.",e)}))}get isAlwaysActive(){return!1}setConfiguration(e){const t=Object.assign(Object.assign({},this._configuration),e);l.JSONExt.deepEqual(this._configuration,t)||(this._configuration=t,this.refresh().catch((e=>{console.error("Failed to update the table of contents.",e)})))}get supportedOptions(){return["maximalDepth"]}get title(){return this._title}set title(e){e!==this._title&&(this._title=e,this.stateChanged.emit())}async refresh(){if(this._isRefreshing)return this._needsRefreshing=!0,Promise.resolve();this._isRefreshing=!0;try{const e=await this.getHeadings();if(this._needsRefreshing)return this._needsRefreshing=!1,this._isRefreshing=!1,this.refresh();e&&!u.areHeadingsEqual(e,this._headings)&&(this._headings=e,this.stateChanged.emit(),this._headingsChanged.emit())}finally{this._isRefreshing=!1}}toggleCollapse(e){var t,n;if(e.heading)e.heading.collapsed=null!==(t=e.collapsed)&&void 0!==t?t:!e.heading.collapsed,this.stateChanged.emit(),this._collapseChanged.emit(e.heading);else{const t=null!==(n=e.collapsed)&&void 0!==n?n:!this.headings.some((e=>{var t;return!(null!==(t=e.collapsed)&&void 0!==t&&t)}));this.headings.forEach((e=>e.collapsed=t)),this.stateChanged.emit(),this._collapseChanged.emit(null)}}}!function(e){e.areHeadingsEqual=function(e,t){if(e.length===t.length){for(let n=0;n<e.length;n++)if(e[n].level!==t[n].level||e[n].text!==t[n].text||e[n].prefix!==t[n].prefix)return!1;return!0}return!1}}(u||(u={}));var f,m=n(59985),_=n(72245);class v extends _.PureComponent{render(){const{children:e,isActive:t,heading:n,onCollapse:s,onMouseDown:i}=this.props;return _.createElement("li",{className:"jp-tocItem",key:`${n.level}-${n.text}`},_.createElement("div",{className:"jp-tocItem-heading "+(t?"jp-tocItem-active":""),onMouseDown:e=>{e.defaultPrevented||(e.preventDefault(),i(n))}},_.createElement("button",{className:"jp-tocItem-collapser",onClick:e=>{e.preventDefault(),s(n)},style:{visibility:e?"visible":"hidden"}},n.collapsed?_.createElement(o.caretRightIcon.react,{tag:"span",width:"20px"}):_.createElement(o.caretDownIcon.react,{tag:"span",width:"20px"})),_.createElement("span",Object.assign({className:"jp-tocItem-content",title:n.text},n.dataset),n.prefix,n.text)),e&&!n.collapsed&&_.createElement("ol",null,e))}}class C extends _.PureComponent{render(){const{documentType:e}=this.props;return _.createElement("ol",Object.assign({className:"jp-TableOfContents-content"},{"data-document-type":e}),this.buildTree())}buildTree(){if(0===this.props.headings.length)return[];let e=0;const t=(n,s)=>{const i=new Array;for(;e<n.length;){const a=n[e];if(!(a.level>=s))break;{e+=1;const r=n[e];i.push(_.createElement(v,{key:`${a.level}-${a.text}`,isActive:!!this.props.activeHeading&&a===this.props.activeHeading,heading:a,onMouseDown:this.props.setActiveHeading,onCollapse:this.props.onCollapseChange},r&&r.level>s&&t(n,s+1)))}}return i};return t(this.props.headings,this.props.headings[0].level)}}class b extends o.VDomRenderer{constructor(e={}){super(e.model)}render(){return this.model?_.createElement(C,{activeHeading:this.model.activeHeading,documentType:this.model.documentType,headings:this.model.headings,onCollapseChange:e=>{this.model.toggleCollapse({heading:e})},setActiveHeading:e=>{this.model.activeHeading=e}}):null}}class w extends o.SidePanel{constructor(e){super({content:new m.Panel,translator:e}),this._model=null,this.addClass("jp-TableOfContents"),this._title=new f.Header(this._trans.__("Table of Contents")),this.header.addWidget(this._title),this._treeview=new b,this._treeview.addClass("jp-TableOfContents-tree"),this.content.addWidget(this._treeview)}get model(){return this._model}set model(e){var t,n;this._model!==e&&(null===(t=this._model)||void 0===t||t.stateChanged.disconnect(this._onTitleChanged,this),this._model=e,this._model&&(this._model.isActive=this.isVisible),null===(n=this._model)||void 0===n||n.stateChanged.connect(this._onTitleChanged,this),this._onTitleChanged(),this._treeview.model=this._model)}onAfterHide(e){super.onAfterHide(e),this._model&&(this._model.isActive=!1)}onBeforeShow(e){super.onBeforeShow(e),this._model&&(this._model.isActive=!0)}_onTitleChanged(){var e,t;this._title.setTitle(null!==(t=null===(e=this._model)||void 0===e?void 0:e.title)&&void 0!==t?t:this._trans.__("Table of Contents"))}}!function(e){class t extends m.Widget{constructor(e){const t=document.createElement("h2");t.textContent=e,t.classList.add("jp-text-truncated"),super({node:t}),this._title=t}setTitle(e){this._title.textContent=e}}e.Header=t}(f||(f={}));var T=n(18108);class x{constructor(){this._generators=new Map,this._idCounter=0}getModel(e,t){for(const n of this._generators.values())if(n.isApplicable(e))return n.createNew(e,t)}add(e){const t=this._idCounter++;return this._generators.set(t,e),new T.DisposableDelegate((()=>{this._generators.delete(t)}))}}class y{constructor(){this.modelMapping=new WeakMap}add(e,t){this.modelMapping.set(e,t)}get(e){const t=this.modelMapping.get(e);return!t||t.isDisposed?null:t}}const H="numbering-entry";function A(e){return"text/html"===e}function O(e,t,n=[]){var s;const i=Object.assign(Object.assign({},g.defaultConfig),t),a=document.createElement("div");a.innerHTML=e;const r=n;let o=r.length;const l=new Array,c=a.querySelectorAll("h1, h2, h3, h4, h5, h6");for(const e of c){if(e.classList.contains("jp-toc-ignore")||e.classList.contains("tocSkip"))continue;let t=parseInt(e.tagName[1],10);if(t>0&&t<=i.maximalDepth){const n=E(t,o,r,i);o=t,l.push({text:null!==(s=e.textContent)&&void 0!==s?s:"",prefix:n,level:t,id:null==e?void 0:e.getAttribute("id")})}}return l}function j(e,t,n){let s=e.querySelector(t);if(!s)return null;if(s.querySelector(`span.${H}`)){const i=e.querySelectorAll(t);for(const e of i)if(!e.querySelector(`span.${H}`)){s=e,k(e,n);break}}else k(s,n);return s}function E(e,t,n,s){const{baseNumbering:i,numberingH1:a,numberHeaders:r}=s;let o="";if(r){const s=a?1:2;if(e>t){for(let s=t;s<e-1;s++)n[s]=0;n[e-1]=e===s?i:1}else n[e-1]+=1,e<t&&n.splice(e);a?o=n.map((e=>null!=e?e:0)).join(".")+". ":n.length>1&&(o=n.slice(1).map((e=>null!=e?e:0)).join(".")+". ")}return o}function k(e,t){e.insertAdjacentHTML("afterbegin",`<span class="${H}">${t}</span>`)}function M(e){e.querySelectorAll(`span.${H}`).forEach((e=>{e.remove()}))}var S=n(38186);async function R(e,t,n){try{const s=await e.render(t);if(!s)return null;const i=document.createElement("div");i.innerHTML=s;const a=i.querySelector(`h${n}`);return a?S.renderMarkdown.createHeaderId(a):null}catch(e){console.error("Failed to parse a heading.",e)}return null}function I(e,t,n=[]){const s=Object.assign(Object.assign({},g.defaultConfig),t),i=e.split("\n"),a=n;let r,o=a.length,l=new Array;for(let e=0;e<i.length;e++){let t=i[e];if(""===t)continue;if(t.startsWith("```")&&(r=!r),r)continue;const n=N(t,i[e+1]);if(n){let t=n.level;if(t>0&&t<=s.maximalDepth){const i=E(t,o,a,s);o=t,l.push({text:n.text,prefix:i,level:t,line:e,raw:n.raw})}}}return l}const P=["text/x-ipythongfm","text/x-markdown","text/x-gfm","text/markdown"];function D(e){return P.includes(e)}function N(e,t){let n=e.match(/^([#]{1,6}) (.*)/);return n&&!L.test(n[0])?{text:$(n[2]),level:n[1].length,raw:e}:t&&(n=t.match(/^ {0,3}([=]{2,}|[-]{2,})\s*$/),n&&!L.test(e))?{text:$(e),level:"="===n[1][0]?1:2,raw:[e,t].join("\n")}:(n=e.match(/<h([1-6]).*>(.*)<\/h\1>/i),n&&!L.test(n[0])?{text:n[2],level:parseInt(n[1],10),raw:e}:null)}function $(e){return e.replace(/\[(.+)\]\(.+\)/g,"$1")}const L=/<\w+\s(.*?\s)?class="(.*?\s)?(jp-toc-ignore|tocSkip)(\s.*?)?"(\s.*?)?>/}}]);
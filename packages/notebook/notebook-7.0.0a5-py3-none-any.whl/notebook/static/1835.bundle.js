"use strict";(self.webpackChunk_JUPYTERLAB_CORE_OUTPUT=self.webpackChunk_JUPYTERLAB_CORE_OUTPUT||[]).push([[1835],{11835:(e,t,o)=>{o.r(t),o.d(t,{ToolbarItems:()=>k,default:()=>D,downloadPlugin:()=>C,openBrowserTabPlugin:()=>x,pathStatusPlugin:()=>y,savingStatusPlugin:()=>f});var n,a=o(9622),r=o(92238),i=o(50354),l=o(65607),d=o(73343),s=o(66711),c=o(1721),u=o(96936),m=o(43306),g=o(81734),p=o(74547),h=o(59985),v=o(72245);!function(e){e.clone="docmanager:clone",e.deleteFile="docmanager:delete-file",e.newUntitled="docmanager:new-untitled",e.open="docmanager:open",e.openBrowserTab="docmanager:open-browser-tab",e.reload="docmanager:reload",e.rename="docmanager:rename",e.del="docmanager:delete",e.restoreCheckpoint="docmanager:restore-checkpoint",e.save="docmanager:save",e.saveAll="docmanager:save-all",e.saveAs="docmanager:save-as",e.download="docmanager:download",e.toggleAutosave="docmanager:toggle-autosave",e.showInFileBrowser="docmanager:show-in-file-browser"}(n||(n={}));const _="@jupyterlab/docmanager-extension:plugin",w={id:"@jupyterlab/docmanager-extension:manager",provides:l.IDocumentManager,optional:[u.ITranslator,a.ILabStatus,r.ISessionContextDialogs,d.IDocumentProviderFactory,a.JupyterLab.IInfo],activate:(e,t,o,n,a,r)=>{var i;const{serviceManager:d,docRegistry:s}=e,c=new WeakSet,m=e.restored.then((()=>{})),g={open:(t,n)=>{t.id||(t.id="document-manager-"+ ++W.id),t.title.dataset=Object.assign({type:"document-title"},t.title.dataset),t.isAttached||e.shell.add(t,"main",n||{}),e.shell.activateById(t.id);const a=p.contextForWidget(t);a&&!c.has(a)&&(o&&function(e,t){let o=null;const n=(t,n)=>{"dirty"===n.name&&(!0===n.newValue?o||(o=e.setDirty()):o&&(o.dispose(),o=null))};t.ready.then((()=>{t.model.stateChanged.connect(n),t.model.dirty&&(o=e.setDirty())})),t.disposed.connect((()=>{o&&o.dispose()}))}(o,a),c.add(a))}},p=new l.DocumentManager({registry:s,manager:d,opener:g,when:m,setBusy:null!==(i=o&&(()=>o.setBusy()))&&void 0!==i?i:void 0,sessionDialogs:n||void 0,translator:null!=t?t:u.nullTranslator,collaborative:!0,docProviderFactory:null!=a?a:void 0,isConnectedCallback:()=>!r||r.isConnected});return p}},b={id:_,autoStart:!0,requires:[l.IDocumentManager,s.ISettingRegistry],optional:[u.ITranslator,r.ICommandPalette,a.ILabShell],activate:(e,t,o,a,d,s)=>{const c=(a=null!=a?a:u.nullTranslator).load("jupyterlab"),h=e.docRegistry;!function(e,t,o,a,d,s,c){const u=d.load("jupyterlab"),{commands:p,shell:h}=e,v=u.__("File Operations"),w=()=>{const{currentWidget:e}=h;return!(!e||!t.contextForWidget(e))};s&&function(e,t,o,a,i){const d=i.load("jupyterlab"),{commands:s}=e,c=()=>{var n;const a=/[Pp]ath:\s?(.*)\n?/,r=e.contextMenuHitTest((e=>{var t;return!!(null===(t=e.title)||void 0===t?void 0:t.match(a))})),i=null==r?void 0:r.title.match(a);return null!==(n=i&&t.findWidget(i[1],null))&&void 0!==n?n:o.currentWidget},u=()=>{const{currentWidget:e}=o;return!(!e||!t.contextForWidget(e))};s.addCommand(n.clone,{label:()=>d.__("New View for %1",T(c(),t)),isEnabled:u,execute:e=>{const o=c(),n=e.options||{mode:"split-right"};if(!o)return;const r=t.cloneWidget(o);r&&a.open(r,n)}}),s.addCommand(n.rename,{label:()=>{let e=T(c(),t);return e&&(e=" "+e),d.__("Rename%1…",e)},isEnabled:u,execute:()=>{if(u()){const e=t.contextForWidget(c());return(0,l.renameDialog)(t,e.path)}}}),s.addCommand(n.del,{label:()=>d.__("Delete %1",T(c(),t)),isEnabled:u,execute:async()=>{if(u()){const o=t.contextForWidget(c());if(!o)return;(await(0,r.showDialog)({title:d.__("Delete"),body:d.__("Are you sure you want to delete %1",o.path),buttons:[r.Dialog.cancelButton({label:d.__("Cancel")}),r.Dialog.warnButton({label:d.__("Delete")})]})).button.accept&&await e.commands.execute("docmanager:delete-file",{path:o.path})}}}),s.addCommand(n.showInFileBrowser,{label:()=>d.__("Show in File Browser"),isEnabled:u,execute:async()=>{const e=c(),o=e&&t.contextForWidget(e);o&&(await s.execute("filebrowser:activate",{path:o.path}),await s.execute("filebrowser:go-to-path",{path:o.path}))}})}(e,t,s,o,d),p.addCommand(n.deleteFile,{label:()=>`Delete ${T(h.currentWidget,t)}`,execute:e=>{const o=void 0===e.path?"":e.path;if(!o){const e=n.deleteFile;throw new Error(`A non-empty path is required for ${e}.`)}return t.deleteFile(o)}}),p.addCommand(n.newUntitled,{execute:e=>{const o=e.error||u.__("Error"),n=void 0===e.path?"":e.path,a={type:e.type,path:n};return"file"===e.type&&(a.ext=e.ext||".txt"),t.services.contents.newUntitled(a).catch((e=>(0,r.showErrorMessage)(o,e)))},label:e=>e.label||`New ${e.type}`}),p.addCommand(n.open,{execute:e=>{const o=void 0===e.path?"":e.path,n=e.factory||void 0,a=null==e?void 0:e.kernel,r=e.options||void 0;return t.services.contents.get(o,{content:!1}).then((()=>t.openOrReveal(o,n,a,r)))},icon:e=>e.icon||"",label:e=>{var t;return null!==(t=e.label||e.factory)&&void 0!==t?t:u.__("Open the provided `path`.")},mnemonic:e=>e.mnemonic||-1}),p.addCommand(n.reload,{label:()=>u.__("Reload %1 from Disk",T(h.currentWidget,t)),caption:u.__("Reload contents from disk"),isEnabled:w,execute:()=>{if(!w())return;const e=t.contextForWidget(h.currentWidget),o=T(h.currentWidget,t);return e?e.model.dirty?(0,r.showDialog)({title:u.__("Reload %1 from Disk",o),body:u.__("Are you sure you want to reload the %1 from the disk?",o),buttons:[r.Dialog.cancelButton({label:u.__("Cancel")}),r.Dialog.warnButton({label:u.__("Reload")})]}).then((t=>{if(t.button.accept&&!e.isDisposed)return e.revert()})):e.isDisposed?void 0:e.revert():(0,r.showDialog)({title:u.__("Cannot Reload"),body:u.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:u.__("Ok")})]})}}),p.addCommand(n.restoreCheckpoint,{label:()=>u.__("Revert %1 to Checkpoint…",T(h.currentWidget,t)),caption:u.__("Revert contents to previous checkpoint"),isEnabled:w,execute:()=>{if(!w())return;const e=t.contextForWidget(h.currentWidget);return e?e.listCheckpoints().then((async o=>{const n=T(h.currentWidget,t);if(o.length<1)return void await(0,r.showErrorMessage)(u.__("No checkpoints"),u.__("No checkpoints are available for this %1.",n));const a=1===o.length?o[0]:await W.getTargetCheckpoint(o.reverse(),u);return a?(0,r.showDialog)({title:u.__("Revert %1 to checkpoint",n),body:new I(a,u,n),buttons:[r.Dialog.cancelButton({label:u.__("Cancel")}),r.Dialog.warnButton({label:u.__("Revert")})]}).then((t=>{if(!e.isDisposed)return t.button.accept?e.model.readOnly?e.revert():e.restoreCheckpoint(a.id).then((()=>e.revert())):void 0})):void 0})):(0,r.showDialog)({title:u.__("Cannot Revert"),body:u.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:u.__("Ok")})]})}});p.addCommand(n.save,{label:()=>u.__("Save %1",T(h.currentWidget,t)),caption:()=>"true"==i.PageConfig.getOption("collaborative")?u.__("In collaborative mode, the document is saved automatically after every change"):u.__("Save and create checkpoint"),icon:e=>e.toolbar?m.saveIcon:"",isEnabled:()=>{const{currentWidget:e}=h;if(!e)return!1;const o=t.contextForWidget(e);return!!(o&&o.contentsModel&&o.contentsModel.writable)},execute:()=>{if(w()){const e=h.currentWidget,o=t.contextForWidget(e);return o?o.model.readOnly?(0,r.showDialog)({title:u.__("Cannot Save"),body:u.__("Document is read-only"),buttons:[r.Dialog.okButton({label:u.__("Ok")})]}):o.save().then((()=>{if(!(null==e?void 0:e.isDisposed))return o.createCheckpoint()})).catch((e=>{if("ModalCancelError"!==e.name)throw e})):(0,r.showDialog)({title:u.__("Cannot Save"),body:u.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:u.__("Ok")})]})}}}),p.addCommand(n.saveAll,{label:()=>u.__("Save All"),caption:u.__("Save all open documents"),isEnabled:()=>(0,g.some)((0,g.map)(h.widgets("main"),(e=>t.contextForWidget(e))),(e=>{var t,o;return null!==(o=null===(t=null==e?void 0:e.contentsModel)||void 0===t?void 0:t.writable)&&void 0!==o&&o})),execute:()=>{const e=[],o=new Set;return(0,g.each)(h.widgets("main"),(n=>{const a=t.contextForWidget(n);!a||a.model.readOnly||o.has(a.path)||(o.add(a.path),e.push(a.save()))})),Promise.all(e)}}),p.addCommand(n.saveAs,{label:()=>u.__("Save %1 As…",T(h.currentWidget,t)),caption:u.__("Save with new path"),isEnabled:w,execute:()=>{if(w()){const e=t.contextForWidget(h.currentWidget);return e?e.saveAs():(0,r.showDialog)({title:u.__("Cannot Save"),body:u.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:u.__("Ok")})]})}}}),p.addCommand(n.toggleAutosave,{label:u.__("Autosave Documents"),isToggled:()=>t.autosave,execute:()=>{const e=!t.autosave,o="autosave";return a.set(_,o,e).catch((e=>{console.error(`Failed to set ${_}:${o} - ${e.message}`)}))}}),c&&[n.reload,n.restoreCheckpoint,n.save,n.saveAs,n.toggleAutosave].forEach((e=>{c.addItem({command:e,category:v})}))}(e,t,opener,o,a,s,d);const v=o=>{const a=o.get("autosave").composite;t.autosave=!0!==a&&!1!==a||a,e.commands.notifyCommandChanged(n.toggleAutosave);const r=o.get("autosaveInterval").composite;t.autosaveInterval=r||120;const i=o.get("lastModifiedCheckMargin").composite;t.lastModifiedCheckMargin=i||500;const l=o.get("defaultViewers").composite,d={};Object.keys(l).forEach((e=>{h.getFileType(e)?(h.getWidgetFactory(l[e])||console.warn(`Document viewer ${l[e]} not found`),d[e]=l[e]):console.warn(`File Type ${e} not found`)})),(0,g.each)(h.fileTypes(),(e=>{try{h.setDefaultWidgetFactory(e.name,d[e.name])}catch(t){console.warn(`Failed to set default viewer ${d[e.name]} for file type ${e.name}`)}}))};Promise.all([o.load(_),e.restored]).then((([e])=>{e.changed.connect(v),v(e)})).catch((e=>{console.error(e.message)})),o.transform(_,{fetch:e=>{const t=(0,g.toArray)(h.fileTypes()).map((e=>e.name)).join("    \n"),o=(0,g.toArray)(h.widgetFactories()).map((e=>e.name)).join("    \n"),n=c.__('Overrides for the default viewers for file types.\nSpecify a mapping from file type name to document viewer name, for example:\n\ndefaultViewers: {\n  markdown: "Markdown Preview"\n}\n\nIf you specify non-existent file types or viewers, or if a viewer cannot\nopen a given file type, the override will not function.\n\nAvailable viewers:\n%1\n\nAvailable file types:\n%2',o,t),a=p.JSONExt.deepCopy(e.schema);return a.properties.defaultViewers.description=n,Object.assign(Object.assign({},e),{schema:a})}}),h.changed.connect((()=>o.reload(_)))}},f={id:"@jupyterlab/docmanager-extension:saving-status",autoStart:!0,requires:[l.IDocumentManager,a.ILabShell],optional:[u.ITranslator,c.IStatusBar],activate:(e,t,o,n,a)=>{if(!a)return;const r=new l.SavingStatus({docManager:t,translator:null!=n?n:u.nullTranslator});r.model.widget=o.currentWidget,o.currentChanged.connect((()=>{r.model.widget=o.currentWidget})),a.registerStatusItem(f.id,{item:r,align:"middle",isActive:()=>null!==r.model&&null!==r.model.status,activeStateChanged:r.model.stateChanged})}},y={id:"@jupyterlab/docmanager-extension:path-status",autoStart:!0,requires:[l.IDocumentManager,a.ILabShell],optional:[c.IStatusBar],activate:(e,t,o,n)=>{if(!n)return;const a=new l.PathStatus({docManager:t});a.model.widget=o.currentWidget,o.currentChanged.connect((()=>{a.model.widget=o.currentWidget})),n.registerStatusItem(y.id,{item:a,align:"right",rank:0})}},C={id:"@jupyterlab/docmanager-extension:download",autoStart:!0,requires:[l.IDocumentManager],optional:[u.ITranslator,r.ICommandPalette],activate:(e,t,o,a)=>{const i=(null!=o?o:u.nullTranslator).load("jupyterlab"),{commands:l,shell:d}=e,s=()=>{const{currentWidget:e}=d;return!(!e||!t.contextForWidget(e))};l.addCommand(n.download,{label:i.__("Download"),caption:i.__("Download the file to your computer"),isEnabled:s,execute:()=>{if(s()){const e=t.contextForWidget(d.currentWidget);return e?e.download():(0,r.showDialog)({title:i.__("Cannot Download"),body:i.__("No context found for current widget!"),buttons:[r.Dialog.okButton({label:i.__("OK")})]})}}});const c=i.__("File Operations");a&&a.addItem({command:n.download,category:c})}},x={id:"@jupyterlab/docmanager-extension:open-browser-tab",autoStart:!0,requires:[l.IDocumentManager],optional:[u.ITranslator],activate:(e,t,o)=>{const a=(null!=o?o:u.nullTranslator).load("jupyterlab"),{commands:r}=e;r.addCommand(n.openBrowserTab,{execute:e=>{const o=void 0===e.path?"":e.path;if(o)return t.services.contents.getDownloadUrl(o).then((e=>{const t=window.open();if(!t)throw new Error("Failed to open new browser tab.");t.opener=null,t.location.href=e}))},icon:e=>e.icon||"",label:()=>a.__("Open in New Browser Tab")})}},D=[w,b,y,f,C,x];var k,W;!function(e){e.createSaveButton=function(e,t){return(0,r.addCommandToolbarButtonClass)(r.ReactWidget.create(v.createElement(r.UseSignal,{signal:t},(()=>v.createElement(r.CommandToolbarButtonComponent,{commands:e,id:n.save,label:"",args:{toolbar:!0}})))))}}(k||(k={}));class I extends h.Widget{constructor(e,t,o="notebook"){super({node:W.createRevertConfirmNode(e,o,t)})}}function T(e,t){if(!e)return"File";const o=t.contextForWidget(e);if(!o)return"";const n=t.registry.getFileTypesForPath(o.path);return n.length&&n[0].displayName?n[0].displayName:"File"}!function(e){e.id=0,e.createRevertConfirmNode=function(e,t,o){const n=document.createElement("div"),a=document.createElement("p"),r=document.createTextNode(o.__("Are you sure you want to revert the %1 to checkpoint? ",t)),l=document.createElement("strong");l.textContent=o.__("This cannot be undone."),a.appendChild(r),a.appendChild(l);const d=document.createElement("p"),s=document.createTextNode(o.__("The checkpoint was last updated at: ")),c=document.createElement("p"),u=new Date(e.last_modified);return c.style.textAlign="center",c.textContent=i.Time.format(u,"dddd, MMMM Do YYYY, h:mm:ss a")+" ("+i.Time.formatHuman(u)+")",d.appendChild(s),d.appendChild(c),n.appendChild(a),n.appendChild(d),n},e.getTargetCheckpoint=async function(e,t){const o=e.map(((e,t)=>`${t}. ${i.Time.format(e.last_modified)} (${i.Time.formatHuman(e.last_modified)})`)),n=(await r.InputDialog.getItem({items:o,title:t.__("Choose a checkpoint")})).value;if(!n)return;const a=n.split(".",1)[0];return e[parseInt(a,10)]}}(W||(W={}))}}]);